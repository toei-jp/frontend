{"version":3,"sources":["webpack:///C:/Users/user/Desktop/workspace/TOEI/frontend/node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/components/app/app.component.html","webpack:///./src/app/components/app/app.component.ts","webpack:///./src/app/components/auth/auth-signin/auth-signin.component.ts","webpack:///./src/app/components/base/base.component.html","webpack:///./src/app/components/base/base.component.ts","webpack:///./src/app/components/error/error.component.html","webpack:///./src/app/components/error/error.component.ts","webpack:///./src/app/components/expired/expired.component.html","webpack:///./src/app/components/expired/expired.component.ts","webpack:///./src/app/components/inquiry/inquiry-confirm/inquiry-confirm.component.html","webpack:///./src/app/components/inquiry/inquiry-confirm/inquiry-confirm.component.ts","webpack:///./src/app/components/inquiry/inquiry-login/inquiry-login.component.html","webpack:///./src/app/components/inquiry/inquiry-login/inquiry-login.component.ts","webpack:///./src/app/components/not-found/not-found.component.html","webpack:///./src/app/components/not-found/not-found.component.ts","webpack:///./src/app/components/parts/buttons/buttons.component.html","webpack:///./src/app/components/parts/buttons/buttons.component.ts","webpack:///./src/app/components/parts/footer/footer.component.html","webpack:///./src/app/components/parts/footer/footer.component.ts","webpack:///./src/app/components/parts/header/header.component.html","webpack:///./src/app/components/parts/header/header.component.ts","webpack:///./src/app/components/parts/icon/icon.component.html","webpack:///./src/app/components/parts/icon/icon.component.ts","webpack:///./src/app/components/parts/loading/loading.component.html","webpack:///./src/app/components/parts/loading/loading.component.ts","webpack:///./src/app/components/parts/modal/modal.component.html","webpack:///./src/app/components/parts/modal/modal.component.ts","webpack:///./src/app/components/parts/next-button/next-button.component.html","webpack:///./src/app/components/parts/next-button/next-button.component.ts","webpack:///./src/app/components/parts/purchase-film-order-performance/purchase-film-order-performance.component.html","webpack:///./src/app/components/parts/purchase-film-order-performance/purchase-film-order-performance.component.ts","webpack:///./src/app/components/parts/purchase-film-order/purchase-film-order.component.html","webpack:///./src/app/components/parts/purchase-film-order/purchase-film-order.component.ts","webpack:///./src/app/components/parts/purchase-note/purchase-note.component.html","webpack:///./src/app/components/parts/purchase-note/purchase-note.component.ts","webpack:///./src/app/components/parts/purchase-step/purchase-step.component.html","webpack:///./src/app/components/parts/purchase-step/purchase-step.component.ts","webpack:///./src/app/components/parts/purchase-term/purchase-term.component.html","webpack:///./src/app/components/parts/purchase-term/purchase-term.component.ts","webpack:///./src/app/components/parts/screen/screen.component.html","webpack:///./src/app/components/parts/screen/screen.component.ts","webpack:///./src/app/components/parts/seat-info/seat-info.component.html","webpack:///./src/app/components/parts/seat-info/seat-info.component.ts","webpack:///./src/app/components/parts/site-seal/site-seal.component.html","webpack:///./src/app/components/parts/site-seal/site-seal.component.ts","webpack:///./src/app/components/purchase/purchase-base/purchase-base.component.html","webpack:///./src/app/components/purchase/purchase-base/purchase-base.component.ts","webpack:///./src/app/components/purchase/purchase-complete/purchase-complete.component.html","webpack:///./src/app/components/purchase/purchase-complete/purchase-complete.component.ts","webpack:///./src/app/components/purchase/purchase-confirm/purchase-confirm.component.html","webpack:///./src/app/components/purchase/purchase-confirm/purchase-confirm.component.ts","webpack:///./src/app/components/purchase/purchase-input/purchase-input.component.html","webpack:///./src/app/components/purchase/purchase-input/purchase-input.component.ts","webpack:///./src/app/components/purchase/purchase-mvtk-confirm/purchase-mvtk-confirm.component.html","webpack:///./src/app/components/purchase/purchase-mvtk-confirm/purchase-mvtk-confirm.component.ts","webpack:///./src/app/components/purchase/purchase-mvtk-input/purchase-mvtk-input.component.html","webpack:///./src/app/components/purchase/purchase-mvtk-input/purchase-mvtk-input.component.ts","webpack:///./src/app/components/purchase/purchase-overlap/purchase-overlap.component.html","webpack:///./src/app/components/purchase/purchase-overlap/purchase-overlap.component.ts","webpack:///./src/app/components/purchase/purchase-schedule/purchase-schedule.component.html","webpack:///./src/app/components/purchase/purchase-schedule/purchase-schedule.component.ts","webpack:///./src/app/components/purchase/purchase-seat/purchase-seat.component.html","webpack:///./src/app/components/purchase/purchase-seat/purchase-seat.component.ts","webpack:///./src/app/components/purchase/purchase-ticket/purchase-ticket.component.html","webpack:///./src/app/components/purchase/purchase-ticket/purchase-ticket.component.ts","webpack:///./src/app/components/purchase/purchase-transaction/purchase-transaction.component.html","webpack:///./src/app/components/purchase/purchase-transaction/purchase-transaction.component.ts","webpack:///./src/app/components/test/test-screen/test-screen.component.html","webpack:///./src/app/components/test/test-screen/test-screen.component.ts","webpack:///./src/app/models/index.ts","webpack:///./src/app/models/reservation.ts","webpack:///./src/app/pipes/duration/duration.pipe.ts","webpack:///./src/app/pipes/libphonenumber-format/libphonenumber-format.pipe.ts","webpack:///./src/app/pipes/time-format/time-format.pipe.ts","webpack:///./src/app/services/aws-cognito/aws-cognito.service.ts","webpack:///./src/app/services/call-native/call-native.service.ts","webpack:///./src/app/services/cinerino/cinerino.service.ts","webpack:///./src/app/services/error/error.service.ts","webpack:///./src/app/services/member-guard/member-guard.service.ts","webpack:///./src/app/services/purchase-guard/purchase-guard.service.ts","webpack:///./src/app/services/purchase/purchase.service.ts","webpack:///./src/app/services/storage/storage.service.ts","webpack:///./src/app/services/test-guard/test-guard.service.ts","webpack:///./src/app/services/user/user.service.ts","webpack:///./src/app/services/util/util.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/environments/ticket.ts","webpack:///./src/main.ts","webpack:///fs (ignored)"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"main.js","sourcesContent":["var map = {\n\t\"./af\": \"../../node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"../../node_modules/moment/locale/af.js\",\n\t\"./ar\": \"../../node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"../../node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"../../node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"../../node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"../../node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"../../node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"../../node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"../../node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"../../node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"../../node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"../../node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"../../node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"../../node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"../../node_modules/moment/locale/ar.js\",\n\t\"./az\": \"../../node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"../../node_modules/moment/locale/az.js\",\n\t\"./be\": \"../../node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"../../node_modules/moment/locale/be.js\",\n\t\"./bg\": \"../../node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"../../node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"../../node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"../../node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"../../node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"../../node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"../../node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"../../node_modules/moment/locale/bo.js\",\n\t\"./br\": \"../../node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"../../node_modules/moment/locale/br.js\",\n\t\"./bs\": \"../../node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"../../node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"../../node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"../../node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"../../node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"../../node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"../../node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"../../node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"../../node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"../../node_modules/moment/locale/cy.js\",\n\t\"./da\": \"../../node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"../../node_modules/moment/locale/da.js\",\n\t\"./de\": \"../../node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"../../node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"../../node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"../../node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"../../node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"../../node_modules/moment/locale/de.js\",\n\t\"./dv\": \"../../node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"../../node_modules/moment/locale/dv.js\",\n\t\"./el\": \"../../node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"../../node_modules/moment/locale/el.js\",\n\t\"./en-au\": \"../../node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"../../node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"../../node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"../../node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"../../node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"../../node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"../../node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"../../node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"../../node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"../../node_modules/moment/locale/en-il.js\",\n\t\"./en-nz\": \"../../node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"../../node_modules/moment/locale/en-nz.js\",\n\t\"./eo\": \"../../node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"../../node_modules/moment/locale/eo.js\",\n\t\"./es\": \"../../node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"../../node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"../../node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"../../node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"../../node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"../../node_modules/moment/locale/es.js\",\n\t\"./et\": \"../../node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"../../node_modules/moment/locale/et.js\",\n\t\"./eu\": \"../../node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"../../node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"../../node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"../../node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"../../node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"../../node_modules/moment/locale/fi.js\",\n\t\"./fo\": \"../../node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"../../node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"../../node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"../../node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"../../node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"../../node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"../../node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"../../node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"../../node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"../../node_modules/moment/locale/fy.js\",\n\t\"./gd\": \"../../node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"../../node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"../../node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"../../node_modules/moment/locale/gl.js\",\n\t\"./gom-latn\": \"../../node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"../../node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"../../node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"../../node_modules/moment/locale/gu.js\",\n\t\"./he\": \"../../node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"../../node_modules/moment/locale/he.js\",\n\t\"./hi\": \"../../node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"../../node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"../../node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"../../node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"../../node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"../../node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"../../node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"../../node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"../../node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"../../node_modules/moment/locale/id.js\",\n\t\"./is\": \"../../node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"../../node_modules/moment/locale/is.js\",\n\t\"./it\": \"../../node_modules/moment/locale/it.js\",\n\t\"./it.js\": \"../../node_modules/moment/locale/it.js\",\n\t\"./ja\": \"../../node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"../../node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"../../node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"../../node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"../../node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"../../node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"../../node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"../../node_modules/moment/locale/kk.js\",\n\t\"./km\": \"../../node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"../../node_modules/moment/locale/km.js\",\n\t\"./kn\": \"../../node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"../../node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"../../node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"../../node_modules/moment/locale/ko.js\",\n\t\"./ky\": \"../../node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"../../node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"../../node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"../../node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"../../node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"../../node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"../../node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"../../node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"../../node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"../../node_modules/moment/locale/lv.js\",\n\t\"./me\": \"../../node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"../../node_modules/moment/locale/me.js\",\n\t\"./mi\": \"../../node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"../../node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"../../node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"../../node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"../../node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"../../node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"../../node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"../../node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"../../node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"../../node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"../../node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"../../node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"../../node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"../../node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"../../node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"../../node_modules/moment/locale/mt.js\",\n\t\"./my\": \"../../node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"../../node_modules/moment/locale/my.js\",\n\t\"./nb\": \"../../node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"../../node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"../../node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"../../node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"../../node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"../../node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"../../node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"../../node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"../../node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"../../node_modules/moment/locale/nn.js\",\n\t\"./pa-in\": \"../../node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"../../node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"../../node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"../../node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"../../node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"../../node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"../../node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"../../node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"../../node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"../../node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"../../node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"../../node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"../../node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"../../node_modules/moment/locale/sd.js\",\n\t\"./se\": \"../../node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"../../node_modules/moment/locale/se.js\",\n\t\"./si\": \"../../node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"../../node_modules/moment/locale/si.js\",\n\t\"./sk\": \"../../node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"../../node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"../../node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"../../node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"../../node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"../../node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"../../node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"../../node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"../../node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"../../node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"../../node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"../../node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"../../node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"../../node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"../../node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"../../node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"../../node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"../../node_modules/moment/locale/ta.js\",\n\t\"./te\": \"../../node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"../../node_modules/moment/locale/te.js\",\n\t\"./tet\": \"../../node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"../../node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"../../node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"../../node_modules/moment/locale/tg.js\",\n\t\"./th\": \"../../node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"../../node_modules/moment/locale/th.js\",\n\t\"./tl-ph\": \"../../node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"../../node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"../../node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"../../node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"../../node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"../../node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"../../node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"../../node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"../../node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"../../node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"../../node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"../../node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"../../node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"../../node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"../../node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"../../node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"../../node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"../../node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"../../node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"../../node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"../../node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"../../node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"../../node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"../../node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"../../node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"../../node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"../../node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"../../node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"../../node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"../../node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"../../node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"../../node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-tw\": \"../../node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"../../node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tvar module = __webpack_require__(id);\n\treturn module;\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"../../node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthSigninComponent } from './components/auth/auth-signin/auth-signin.component';\r\nimport { BaseComponent } from './components/base/base.component';\r\nimport { ErrorComponent } from './components/error/error.component';\r\nimport { ExpiredComponent } from './components/expired/expired.component';\r\nimport { InquiryConfirmComponent } from './components/inquiry/inquiry-confirm/inquiry-confirm.component';\r\nimport { InquiryLoginComponent } from './components/inquiry/inquiry-login/inquiry-login.component';\r\nimport { NotFoundComponent } from './components/not-found/not-found.component';\r\nimport { PurchaseBaseComponent } from './components/purchase/purchase-base/purchase-base.component';\r\nimport { PurchaseCompleteComponent } from './components/purchase/purchase-complete/purchase-complete.component';\r\nimport { PurchaseConfirmComponent } from './components/purchase/purchase-confirm/purchase-confirm.component';\r\nimport { PurchaseInputComponent } from './components/purchase/purchase-input/purchase-input.component';\r\nimport { PurchaseMvtkConfirmComponent } from './components/purchase/purchase-mvtk-confirm/purchase-mvtk-confirm.component';\r\nimport { PurchaseMvtkInputComponent } from './components/purchase/purchase-mvtk-input/purchase-mvtk-input.component';\r\nimport { PurchaseOverlapComponent } from './components/purchase/purchase-overlap/purchase-overlap.component';\r\n// import { PurchasePointComponent } from './components/purchase/purchase-point/purchase-point.component';\r\nimport { PurchaseScheduleComponent } from './components/purchase/purchase-schedule/purchase-schedule.component';\r\nimport { PurchaseSeatComponent } from './components/purchase/purchase-seat/purchase-seat.component';\r\nimport { PurchaseTicketComponent } from './components/purchase/purchase-ticket/purchase-ticket.component';\r\nimport { PurchaseTransactionComponent } from './components/purchase/purchase-transaction/purchase-transaction.component';\r\nimport { TestScreenComponent } from './components/test/test-screen/test-screen.component';\r\n// import { MemberGuardService } from './services/member-guard/member-guard.service';\r\nimport { PurchaseGuardService } from './services/purchase-guard/purchase-guard.service';\r\nimport { TestGuardService } from './services/test-guard/test-guard.service';\r\n\r\nconst routes: Routes = [\r\n    { path: '', redirectTo: 'purchase/schedule', pathMatch: 'full' },\r\n    { path: 'purchase/transaction', component: PurchaseTransactionComponent },\r\n    { path: 'auth/signin', component: AuthSigninComponent },\r\n    {\r\n        path: '',\r\n        component: BaseComponent,\r\n        children: [\r\n            { path: 'purchase/schedule', component: PurchaseScheduleComponent },\r\n            { path: 'purchase/overlap', component: PurchaseOverlapComponent },\r\n            { path: 'inquiry/login/:theater', component: InquiryLoginComponent },\r\n            { path: 'inquiry/confirm', component: InquiryConfirmComponent }\r\n        ]\r\n    },\r\n    {\r\n        path: 'purchase',\r\n        component: PurchaseBaseComponent,\r\n        canActivate: [PurchaseGuardService],\r\n        children: [\r\n            { path: 'seat', component: PurchaseSeatComponent },\r\n            { path: 'ticket', component: PurchaseTicketComponent },\r\n            { path: 'input', component: PurchaseInputComponent },\r\n            { path: 'confirm', component: PurchaseConfirmComponent },\r\n            { path: 'mvtk/input', component: PurchaseMvtkInputComponent },\r\n            { path: 'mvtk/confirm', component: PurchaseMvtkConfirmComponent },\r\n            // { path: 'point', canActivate: [MemberGuardService], component: PurchasePointComponent }\r\n        ]\r\n    },\r\n    {\r\n        path: 'purchase',\r\n        component: PurchaseBaseComponent,\r\n        children: [\r\n            { path: 'complete', component: PurchaseCompleteComponent }\r\n        ]\r\n    },\r\n    {\r\n        path: 'test',\r\n        canActivate: [TestGuardService],\r\n        children: [\r\n            { path: ':theaterCode/:screenCode/screen', component: TestScreenComponent }\r\n        ]\r\n    },\r\n    {\r\n        path: '',\r\n        component: BaseComponent,\r\n        children: [\r\n            { path: 'error', component: ErrorComponent },\r\n            { path: 'expired', component: ExpiredComponent },\r\n            { path: '**', component: NotFoundComponent }\r\n        ]\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forRoot(routes, { useHash: true, enableTracing: true })],\r\n    exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { HttpClientModule } from '@angular/common/http';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './components/app/app.component';\r\nimport { AuthSigninComponent } from './components/auth/auth-signin/auth-signin.component';\r\nimport { BaseComponent } from './components/base/base.component';\r\nimport { ErrorComponent } from './components/error/error.component';\r\nimport { ExpiredComponent } from './components/expired/expired.component';\r\nimport { InquiryBaseComponent } from './components/inquiry/inquiry-base/inquiry-base.component';\r\nimport { InquiryConfirmComponent } from './components/inquiry/inquiry-confirm/inquiry-confirm.component';\r\nimport { InquiryLoginComponent } from './components/inquiry/inquiry-login/inquiry-login.component';\r\nimport { NotFoundComponent } from './components/not-found/not-found.component';\r\nimport { ButtonsComponent } from './components/parts/buttons/buttons.component';\r\nimport { FooterComponent } from './components/parts/footer/footer.component';\r\nimport { HeaderComponent } from './components/parts/header/header.component';\r\nimport { IconComponent } from './components/parts/icon/icon.component';\r\nimport { LoadingComponent } from './components/parts/loading/loading.component';\r\nimport { ModalComponent } from './components/parts/modal/modal.component';\r\nimport { NextButtonComponent } from './components/parts/next-button/next-button.component';\r\nimport {\r\n    PurchaseFilmOrderPerformanceComponent\r\n} from './components/parts/purchase-film-order-performance/purchase-film-order-performance.component';\r\nimport { PurchaseFilmOrderComponent } from './components/parts/purchase-film-order/purchase-film-order.component';\r\nimport { PurchaseNoteComponent } from './components/parts/purchase-note/purchase-note.component';\r\nimport { PurchaseStepComponent } from './components/parts/purchase-step/purchase-step.component';\r\nimport { PurchaseTermComponent } from './components/parts/purchase-term/purchase-term.component';\r\nimport { ScreenComponent } from './components/parts/screen/screen.component';\r\nimport { SeatInfoComponent } from './components/parts/seat-info/seat-info.component';\r\nimport { SiteSealComponent } from './components/parts/site-seal/site-seal.component';\r\nimport { PurchaseBaseComponent } from './components/purchase/purchase-base/purchase-base.component';\r\nimport { PurchaseCompleteComponent } from './components/purchase/purchase-complete/purchase-complete.component';\r\nimport { PurchaseConfirmComponent } from './components/purchase/purchase-confirm/purchase-confirm.component';\r\nimport { PurchaseInputComponent } from './components/purchase/purchase-input/purchase-input.component';\r\nimport { PurchaseMvtkConfirmComponent } from './components/purchase/purchase-mvtk-confirm/purchase-mvtk-confirm.component';\r\nimport { PurchaseMvtkInputComponent } from './components/purchase/purchase-mvtk-input/purchase-mvtk-input.component';\r\nimport { PurchaseOverlapComponent } from './components/purchase/purchase-overlap/purchase-overlap.component';\r\n// import { PurchasePointComponent } from './components/purchase/purchase-point/purchase-point.component';\r\nimport { PurchaseScheduleComponent } from './components/purchase/purchase-schedule/purchase-schedule.component';\r\nimport { PurchaseSeatComponent } from './components/purchase/purchase-seat/purchase-seat.component';\r\nimport { PurchaseTicketComponent } from './components/purchase/purchase-ticket/purchase-ticket.component';\r\nimport { PurchaseTransactionComponent } from './components/purchase/purchase-transaction/purchase-transaction.component';\r\nimport { TestScreenComponent } from './components/test/test-screen/test-screen.component';\r\nimport { DurationPipe } from './pipes/duration/duration.pipe';\r\nimport { LibphonenumberFormatPipe } from './pipes/libphonenumber-format/libphonenumber-format.pipe';\r\nimport { TimeFormatPipe } from './pipes/time-format/time-format.pipe';\r\nimport { AwsCognitoService } from './services/aws-cognito/aws-cognito.service';\r\nimport { CallNativeService } from './services/call-native/call-native.service';\r\nimport { CinerinoService } from './services/cinerino/cinerino.service';\r\nimport { ErrorService } from './services/error/error.service';\r\nimport { MemberGuardService } from './services/member-guard/member-guard.service';\r\nimport { PurchaseGuardService } from './services/purchase-guard/purchase-guard.service';\r\nimport { PurchaseService } from './services/purchase/purchase.service';\r\nimport { StorageService } from './services/storage/storage.service';\r\nimport { TestGuardService } from './services/test-guard/test-guard.service';\r\nimport { UserService } from './services/user/user.service';\r\nimport { UtilService } from './services/util/util.service';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent,\r\n        PurchaseBaseComponent,\r\n        PurchaseCompleteComponent,\r\n        PurchaseScheduleComponent,\r\n        PurchaseSeatComponent,\r\n        PurchaseTicketComponent,\r\n        PurchaseInputComponent,\r\n        PurchaseConfirmComponent,\r\n        PurchaseMvtkInputComponent,\r\n        PurchaseMvtkConfirmComponent,\r\n        InquiryBaseComponent,\r\n        InquiryLoginComponent,\r\n        InquiryConfirmComponent,\r\n        ScreenComponent,\r\n        HeaderComponent,\r\n        FooterComponent,\r\n        PurchaseStepComponent,\r\n        LoadingComponent,\r\n        SiteSealComponent,\r\n        ModalComponent,\r\n        ButtonsComponent,\r\n        PurchaseTransactionComponent,\r\n        ErrorComponent,\r\n        PurchaseFilmOrderComponent,\r\n        PurchaseFilmOrderPerformanceComponent,\r\n        TimeFormatPipe,\r\n        DurationPipe,\r\n        SeatInfoComponent,\r\n        IconComponent,\r\n        LibphonenumberFormatPipe,\r\n        PurchaseOverlapComponent,\r\n        BaseComponent,\r\n        NextButtonComponent,\r\n        NotFoundComponent,\r\n        ExpiredComponent,\r\n        PurchaseTermComponent,\r\n        PurchaseNoteComponent,\r\n        // PurchasePointComponent,\r\n        AuthSigninComponent,\r\n        TestScreenComponent\r\n    ],\r\n    imports: [\r\n        BrowserModule,\r\n        AppRoutingModule,\r\n        HttpClientModule,\r\n        FormsModule,\r\n        ReactiveFormsModule\r\n    ],\r\n    providers: [\r\n        PurchaseGuardService,\r\n        ErrorService,\r\n        StorageService,\r\n        PurchaseService,\r\n        AwsCognitoService,\r\n        CallNativeService,\r\n        CinerinoService,\r\n        UserService,\r\n        TestGuardService,\r\n        UtilService,\r\n        MemberGuardService\r\n    ],\r\n    bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","<div class=\"wrapper\" [class.ticket-app]=\"user.isNative()\" [class.member]=\"user.isMember()\">\r\n    <router-outlet></router-outlet>\r\n</div>","import { Component } from '@angular/core';\r\nimport { NavigationEnd, Router } from '@angular/router';\r\nimport { environment } from '../../../environments/environment';\r\nimport { UserService } from '../../services/user/user.service';\r\n\r\ndeclare const ga: Function;\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: './app.component.html',\r\n    styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n    constructor(\r\n        public user: UserService,\r\n        private router: Router\r\n    ) {\r\n        this.router.events.subscribe(event => {\r\n            if (event instanceof NavigationEnd) {\r\n                // Googleアナリティクス pageview\r\n                try {\r\n                    ga('create', environment.ANALYTICS_ID, 'auto');\r\n                    ga('set', 'page', event.urlAfterRedirects);\r\n                    ga('send', 'pageview');\r\n                } catch (err) {\r\n                    console.error(err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { UserService } from '../../../services/user/user.service';\r\n\r\n@Component({\r\n    selector: 'app-auth-signin',\r\n    templateUrl: './auth-signin.component.html',\r\n    styleUrls: ['./auth-signin.component.scss']\r\n})\r\nexport class AuthSigninComponent implements OnInit {\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private user: UserService,\r\n        private error: ErrorService\r\n    ) { }\r\n\r\n    public async ngOnInit() {\r\n        try {\r\n            // await this.user.initMember();\r\n            this.user.save();\r\n            this.router.navigate(['/']);\r\n        } catch (err) {\r\n            console.error(err);\r\n            this.error.redirect(err);\r\n        }\r\n    }\r\n}\r\n","<app-header></app-header>\r\n<router-outlet></router-outlet>\r\n<app-footer></app-footer>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-base',\r\n    templateUrl: './base.component.html',\r\n    styleUrls: ['./base.component.scss']\r\n})\r\nexport class BaseComponent implements OnInit {\r\n\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">エラーが発生しました</h1>\r\n    <p class=\"read\">お手続きの途中でエラーが発生いたしました。\r\n        <br>お手数をおかけいたしますが、もう一度最初から操作をお願いいたします。</p>\r\n    <div class=\"button-area\">\r\n        <div class=\"prev-link ticket-app-hide\">\r\n            <a href=\"{{ environment.PORTAL_SITE_URL }}\">\r\n                <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>戻る</a>\r\n        </div>\r\n        <div class=\"prev-link ticket-app-show\">\r\n            <a href=\"{{ environment.APP_SITE_URL }}/#/purchase\">\r\n                <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>戻る</a>\r\n        </div>\r\n    </div>\r\n    <code *ngIf=\"message && !environment.production\">{{ message }}</code>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { environment } from '../../../environments/environment';\r\nimport { ErrorService } from '../../services/error/error.service';\r\nimport { PurchaseService } from '../../services/purchase/purchase.service';\r\n\r\n@Component({\r\n    selector: 'app-error',\r\n    templateUrl: './error.component.html',\r\n    styleUrls: ['./error.component.scss']\r\n})\r\nexport class ErrorComponent implements OnInit {\r\n    public environment = environment;\r\n    public message: string;\r\n    constructor(\r\n        public purchase: PurchaseService,\r\n        private error: ErrorService\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        this.purchase.reset();\r\n        this.message = (this.error.errorDetail !== undefined) ? this.error.errorDetail.message : '';\r\n    }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">エラーが発生しました</h1>\r\n    <p class=\"read\">お手続きの有効期限がきれました。\r\n        <br>お手数をおかけいたしますが、もう一度最初から操作をお願いいたします。</p>\r\n    <div class=\"button-area\">\r\n        <div class=\"prev-link\">\r\n            <a class=\"ticket-app-hide\" href=\"{{ environment.PORTAL_SITE_URL }}\">\r\n                <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>戻る</a>\r\n            <a class=\"ticket-app-show\" href=\"{{ environment.APP_SITE_URL }}/#/purchase\">\r\n                <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>戻る</a>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { environment } from '../../../environments/environment';\r\nimport { PurchaseService } from '../../services/purchase/purchase.service';\r\n\r\n@Component({\r\n    selector: 'app-expired',\r\n    templateUrl: './expired.component.html',\r\n    styleUrls: ['./expired.component.scss']\r\n})\r\nexport class ExpiredComponent implements OnInit {\r\n    public environment = environment;\r\n    constructor(public purchase: PurchaseService) { }\r\n\r\n    public ngOnInit() {\r\n        this.purchase.reset();\r\n    }\r\n\r\n}\r\n","<p>\r\n  inquiry-confirm works!\r\n</p>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-inquiry-confirm',\r\n  templateUrl: './inquiry-confirm.component.html',\r\n  styleUrls: ['./inquiry-confirm.component.scss']\r\n})\r\nexport class InquiryConfirmComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  public ngOnInit() {\r\n  }\r\n\r\n}\r\n","<p>\r\n  inquiry-login works!\r\n</p>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-inquiry-login',\r\n  templateUrl: './inquiry-login.component.html',\r\n  styleUrls: ['./inquiry-login.component.scss']\r\n})\r\nexport class InquiryLoginComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  public ngOnInit() {\r\n  }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">エラーが発生しました</h1>\r\n    <p class=\"read\">お手続きの途中でエラーが発生いたしました。\r\n        <br>お手数をおかけいたしますが、もう一度最初から操作をお願いいたします。</p>\r\n    <div class=\"button-area\">\r\n        <div class=\"prev-link\">\r\n            <a href=\"{{ environment.PORTAL_SITE_URL }}\">\r\n                <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>戻る</a>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { environment } from '../../../environments/environment';\r\n@Component({\r\n    selector: 'app-not-found',\r\n    templateUrl: './not-found.component.html',\r\n    styleUrls: ['./not-found.component.scss']\r\n})\r\nexport class NotFoundComponent implements OnInit {\r\n    public environment = environment;\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n\r\n}\r\n","<div class=\"button-area\">\r\n    <app-next-button>{{ nextLabel }}</app-next-button>\r\n    <div class=\"prev-link\">\r\n        <a routerLink=\"{{ prevLink }}\"><app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>{{ prevLabel }}</a>\r\n    </div>\r\n</div>","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-buttons',\r\n    templateUrl: './buttons.component.html',\r\n    styleUrls: ['./buttons.component.scss']\r\n})\r\nexport class ButtonsComponent implements OnInit {\r\n    @Input() public nextLabel: string;\r\n    @Input() public prevLabel: string;\r\n    @Input() public prevLink: string;\r\n\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n\r\n}\r\n","<footer class=\"footer\">\r\n    <div class=\"inner\">\r\n        <ul class=\"clearfix\">\r\n            <li><a href=\"{{ environment.PORTAL_SITE_URL }}/privacy/\" target=\"_blank\">プライバシーポリシー</a></li>\r\n            <li><a href=\"{{ environment.PORTAL_SITE_URL }}/law/\" target=\"_blank\">特定商取引法に基づく表記</a></li>\r\n        </ul>\r\n        <div class=\"copyright\">&copy; TOEI THEATERS All rights reserved.</div>\r\n    </div>\r\n</footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { environment } from '../../../../environments/environment';\r\n\r\n@Component({\r\n    selector: 'app-footer',\r\n    templateUrl: './footer.component.html',\r\n    styleUrls: ['./footer.component.scss']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n    public environment = environment;\r\n\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n\r\n}\r\n","<header class=\"ticket-app-header ticket-app-show\">\r\n    <div class=\"close\">\r\n        <a href=\"{{ environment.APP_SITE_URL }}/#/purchase\">\r\n            閉じる\r\n        </a>\r\n    </div>\r\n</header>\r\n<header class=\"header clearfix ticket-app-hide\">\r\n    <div class=\"inner\">\r\n        <div class=\"logo\">\r\n            <a href=\"{{ environment.PORTAL_SITE_URL }}\">\r\n                <img src=\"/assets/images/common/logo.svg\" alt=\"\">\r\n            </a>\r\n            <a href=\"{{ environment.PORTAL_SITE_URL }}\">\r\n                <div class=\"company-name\">TOEI THEATERS</div>\r\n            </a>\r\n        </div>\r\n        <ng-content></ng-content>\r\n    </div>\r\n</header>","import { Component, OnInit } from '@angular/core';\r\nimport { environment } from '../../../../environments/environment';\r\n\r\n@Component({\r\n    selector: 'app-header',\r\n    templateUrl: './header.component.html',\r\n    styleUrls: ['./header.component.scss']\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n    public environment = environment;\r\n\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n\r\n}\r\n","<div class=\"icon {{ iconName }}\" [style]=\"styles\"></div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\r\n\r\n@Component({\r\n    selector: 'app-icon',\r\n    templateUrl: './icon.component.html',\r\n    styleUrls: ['./icon.component.scss']\r\n})\r\nexport class IconComponent implements OnInit {\r\n    @Input() public iconName: string;\r\n    @Input() public width?: number;\r\n    @Input() public height?: number;\r\n    public styles: SafeStyle;\r\n\r\n    constructor(private sanitizer: DomSanitizer) { }\r\n\r\n    public ngOnInit() {\r\n        this.styles = this.sanitizer.bypassSecurityTrustStyle('');\r\n        if (this.width !== undefined && this.height !== undefined) {\r\n            const style = `width: ${this.width}px; height: ${this.height}px; background-size: ${this.width}px ${this.height}px;`;\r\n            this.styles = this.sanitizer.bypassSecurityTrustStyle(style);\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"cover\" [class.active]=\"show\"></div>\r\n<div class=\"loading\" [class.active]=\"show\">\r\n    <div class=\"bar1\"></div>\r\n    <div class=\"bar2\"></div>\r\n    <div class=\"bar3\"></div>\r\n    <div class=\"bar4\"></div>\r\n    <div class=\"bar5\"></div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-loading',\r\n    templateUrl: './loading.component.html',\r\n    styleUrls: ['./loading.component.scss']\r\n})\r\nexport class LoadingComponent implements OnInit {\r\n    @Input() public show: boolean;\r\n\r\n    constructor() { }\r\n\r\n    /**\r\n     * 初期化\r\n     * @method ngOnInit\r\n     * @returns {Promise<void>}\r\n     */\r\n    public ngOnInit(): void { }\r\n\r\n}\r\n","<div class=\"parent\" [class.active]=\"open\">\r\n    <div class=\"modal-cover\" (click)=\"close.emit()\"></div>\r\n    <div class=\"modal position-center\">\r\n        <div class=\"inner\">\r\n            <div *ngIf=\"layout\">\r\n                <div class=\"box radius bg-white\">\r\n                    <div class=\"modal-body mb-middle\">\r\n                        <ng-content></ng-content>\r\n                    </div>\r\n                    <div class=\"prev-link\">\r\n                        <a (click)=\"close.emit()\">\r\n                            <app-icon iconName=\"close-black\" width=\"15\" height=\"15\"></app-icon>閉じる</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"!layout\">\r\n                <ng-content select=\"[inner]\"></ng-content>\r\n            </div>\r\n        </div>\r\n        <div class=\"close-button\">\r\n            <a class=\"modal-close\" (click)=\"close.emit()\"></a>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-modal',\r\n    templateUrl: './modal.component.html',\r\n    styleUrls: ['./modal.component.scss']\r\n})\r\nexport class ModalComponent implements OnInit {\r\n    @Input() public open: boolean;\r\n    @Input() public layout: boolean;\r\n    @Output() public close = new EventEmitter();\r\n\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n\r\n}\r\n","<div class=\"button next-button blue-button\">\r\n    <button type=\"submit\">\r\n        <app-icon iconName=\"next-white\" width=\"15\" height=\"15\"></app-icon><ng-content></ng-content>\r\n    </button>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-next-button',\r\n    templateUrl: './next-button.component.html',\r\n    styleUrls: ['./next-button.component.scss']\r\n})\r\nexport class NextButtonComponent implements OnInit {\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n\r\n}\r\n","<li class=\"button white-button {{ availability.className }}\" (click)=\"start()\">\r\n    <dl>\r\n        <dt>\r\n            <div class=\"text-left\">\r\n                <div class=\"large-text mb-x-small\">\r\n                    <strong>{{ data.startDate| timeFormat }}</strong>\r\n                </div>\r\n                <div>～{{ data.endDate | timeFormat }}</div>\r\n            </div>\r\n            <div class=\"text-center small-x-text status\">\r\n                <div class=\"mb-x-small text\">{{ availability.text }}</div>\r\n                <div class=\"image\"></div>\r\n            </div>\r\n        </dt>\r\n        <dd class=\"small-text text-center\">\r\n            <div class=\"screen-name\">{{ data.location.name.ja }}</div>\r\n        </dd>\r\n    </dl>\r\n</li>","import { Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport * as cinerino from '@toei-jp/cinerino-api-javascript-client';\r\nimport * as moment from 'moment';\r\nimport { SaveType, StorageService } from '../../../services/storage/storage.service';\r\n// import { environment } from '../../../../environments/environment';\r\n\r\ntype IScreeningEvent = cinerino.factory.chevre.event.screeningEvent.IEvent;\r\ninterface Iavailability {\r\n    text: string;\r\n    className: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'app-purchase-film-order-performance',\r\n    templateUrl: './purchase-film-order-performance.component.html',\r\n    styleUrls: ['./purchase-film-order-performance.component.scss']\r\n})\r\nexport class PurchaseFilmOrderPerformanceComponent implements OnInit {\r\n    @Input() public data: IScreeningEvent;\r\n    public availability: Iavailability;\r\n    private isEndSale: boolean;\r\n\r\n    constructor(\r\n        private storage: StorageService,\r\n        private router: Router\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        const now = moment();\r\n        const start = moment(this.data.startDate);\r\n        this.isEndSale = now.add(this.data.endSaleTimeAfterScreening, 'minute') > start;\r\n        this.availability = this.getAvailability(this.data.remainingAttendeeCapacity);\r\n    }\r\n\r\n    /**\r\n     * @method getAvailability\r\n     * @param {number | undefined} remaining\r\n     * @returns {Iavailability}\r\n     */\r\n    public getAvailability(remaining?: number): Iavailability {\r\n        const availabilityList = [\r\n            {\r\n                text: '満席',\r\n                className: 'vacancy-full'\r\n            },\r\n            {\r\n                text: '残りわずか',\r\n                className: 'vacancy-little'\r\n            },\r\n            {\r\n                text: '空席あり',\r\n                className: 'vacancy-large'\r\n            },\r\n            {\r\n                text: '販売終了',\r\n                className: 'vacancy-full'\r\n            }\r\n        ];\r\n\r\n        return this.isEndSale\r\n                ? availabilityList[3] : (remaining === 0 || remaining === undefined)\r\n                ? availabilityList[0] : (remaining <= 10)\r\n                ? availabilityList[1] : availabilityList[2];\r\n    }\r\n\r\n    /**\r\n     * @method start\r\n     * @returns {void}\r\n     */\r\n    public start(): void {\r\n        const availability = this.data.remainingAttendeeCapacity;\r\n        if (availability === 0 || availability === undefined || this.isEndSale) {\r\n            return;\r\n        }\r\n        // location.href = `${environment.ENTRANCE_SERVER_URL}/purchase/index.html?id=${this.data.identifier}`;\r\n        this.storage.save('parameters', {\r\n            passportToken: '',\r\n            signInRedirect: false,\r\n            performanceId: this.data.id\r\n        }, SaveType.Session);\r\n        this.router.navigate(['/purchase/transaction']);\r\n    }\r\n\r\n}\r\n","<li class=\"performance mb-x-small\">\r\n    <dl>\r\n        <dt>\r\n            <div class=\"mb-x-small\">\r\n                <strong>{{ title }}</strong>\r\n            </div>\r\n            <div class=\"small-text\">{{ duration | duration: 'minutes' }}分</div>\r\n        </dt>\r\n        <dd>\r\n            <ul>\r\n                <app-purchase-film-order-performance *ngFor=\"let film of data.films\" [data]=\"film\"></app-purchase-film-order-performance>\r\n            </ul>\r\n        </dd>\r\n    </dl>\r\n</li>","import { Component, Input, OnInit } from '@angular/core';\r\nimport * as cinerino from '@toei-jp/cinerino-api-javascript-client';\r\n\r\ntype IScreeningEvent = cinerino.factory.chevre.event.screeningEvent.IEvent;\r\ninterface IFilmOrder {\r\n    id: string;\r\n    films: IScreeningEvent[];\r\n}\r\n\r\n@Component({\r\n    selector: 'app-purchase-film-order',\r\n    templateUrl: './purchase-film-order.component.html',\r\n    styleUrls: ['./purchase-film-order.component.scss']\r\n})\r\nexport class PurchaseFilmOrderComponent implements OnInit {\r\n    @Input() public data: IFilmOrder;\r\n    public title: string;\r\n    public duration: string;\r\n\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n        this.title = this.data.films[0].name.ja;\r\n        this.duration = this.data.films[0].workPerformed.duration;\r\n    }\r\n\r\n}\r\n","<div class=\"box radius small-x-text notes \">\r\n    <ol>\r\n        <li>\r\n            1. {{ ordinance }}の定めにより、18歳未満及び高校生の方は終映が{{ limit }}を過ぎる上映回のﾁｹｯﾄをご購入頂けません。また保護者同伴でもご入場頂けません。\r\n        </li>\r\n        <li>\r\n            2. チケット購入はクレジット決済のみとなり、発券の際には予約番号、電話番号が必要となります。\r\n        </li>\r\n        <li>\r\n            3. 決済をしてご購入いただいたチケットは、上映中止・もしくは上映延期とならない限り、交通渋滞・電車遅延などいかなる理由があっても、チケットのキャンセル・変更・払い戻しは一切致しません。\r\n        </li>\r\n        <li>\r\n            4. 上映中止・および上映延期の場合の旅費などは補償いたしません。\r\n        </li>\r\n        <li>\r\n            5. 学生料金・シニア料金の各チケットを購入された方は、ご入場時にチケットと一緒に、以下の証明書をご提示頂きます。\r\n            <ul class=\"note_child\">\r\n                <li>・学生の方は、学校長発行の学生証または生徒手帳。</li>\r\n                <li>・シニアの方は、生年月日が確認できる公的機関発行の証明書。</li>\r\n                <li>・ハンディキャップの方は、障害者手帳。</li>\r\n            </ul>\r\n            ご提示いただけない場合は、一般料金との差額をいただきます。\r\n        </li>\r\n        <li>\r\n            6. その他の利用規約についても同意します。\r\n        </li>\r\n        <li class=\"ticket-app-hide\">\r\n            7. 購入完了ページに表示される予約番号はチケットの発券に必要となりますのでメモをとるなどして、必ずお控えください。\r\n        </li>\r\n        <li class=\"ticket-app-show\">\r\n            7. 購入完了ページに表示される予約番号はメモを取るなどして、必ずお控えください\r\n        </li>\r\n    </ol>\r\n</div>","import { Component, Input, OnInit } from '@angular/core';\r\n\r\nconst PURCHASE_NOTE = {\r\n    '01': { ordinance: '東京都青少年健全育成条例', limit: '23:00' },\r\n    '12': { ordinance: '徳島県青少年健全育成条例', limit: '23:00' },\r\n    '18': { ordinance: '鹿児島県青少年保護育成条例', limit: '23:00' },\r\n    '19': { ordinance: '千葉県青少年健全育成条例', limit: '23:00' }\r\n};\r\n\r\n@Component({\r\n    selector: 'app-purchase-note',\r\n    templateUrl: './purchase-note.component.html',\r\n    styleUrls: ['./purchase-note.component.scss']\r\n})\r\nexport class PurchaseNoteComponent implements OnInit {\r\n\r\n    @Input() public theaterCode: string;\r\n    public ordinance: string;\r\n    public limit: string;\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n        this.ordinance = '';\r\n        this.limit = '';\r\n        if (this.theaterCode === '01'\r\n            || this.theaterCode === '12'\r\n            || this.theaterCode === '18'\r\n            || this.theaterCode === '19') {\r\n            this.ordinance = PURCHASE_NOTE[this.theaterCode].ordinance;\r\n            this.limit = PURCHASE_NOTE[this.theaterCode].limit;\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"steps not-print\">\r\n    <ul>\r\n        <li class=\"step step-01\" [class.active]=\"url === '/purchase/schedule'\"><div class=\"text\">スケジュール選択</div></li>\r\n        <li class=\"step step-02\" [class.active]=\"url === '/purchase/seat'\"><div class=\"text\">座席選択</div></li>\r\n        <li class=\"step step-03\" [class.active]=\"url === '/purchase/ticket'\"><div class=\"text\">券種選択</div></li>\r\n        <li class=\"step step-04\" [class.active]=\"url === '/purchase/input'\"><div class=\"text\">情報入力</div></li>\r\n        <li class=\"step step-05\" [class.active]=\"url === '/purchase/confirm'\"><div class=\"text\">確認</div></li>\r\n        <li class=\"step step-06\" [class.active]=\"url === '/purchase/complete'\"><div class=\"text\">購入完了</div></li>\r\n    </ul>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { NavigationEnd, Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'app-purchase-step',\r\n    templateUrl: './purchase-step.component.html',\r\n    styleUrls: ['./purchase-step.component.scss']\r\n})\r\nexport class PurchaseStepComponent implements OnInit {\r\n    public url: string;\r\n    constructor(\r\n        private router: Router\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        this.changePage(this.router.url);\r\n        this.router.events.subscribe((event) => {\r\n            if (event instanceof NavigationEnd) {\r\n                this.changePage(event.url);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * ページ変更\r\n     * @method changePage\r\n     */\r\n    private changePage(url: string) {\r\n        this.url = url;\r\n    }\r\n\r\n}\r\n","<div class=\"box radius bg-ultra-light-gray term small-x-text\">\r\n    <p>\r\n        <br>東映株式会社（以下「当社」といいます）は、インターネットチケット販売（以下「本サービス」といいます）をご利用いただくに当たって\"インターネットチケット販売利用規約\"（以下「本規約」といいます）を以下の通りに定めます。本規約に同意の上本サービスをご利用ください。\r\n        <br>\r\n        <br>\r\n        <strong>1.利用条件</strong>\r\n        <br>\r\n        <br>(1)本サービスは当社オンラインシステムを利用する当社の運営する映画館（以下「実施劇場」といいます）にてご利用いただけます。\r\n        <br>(2)本サービスをご利用いただけるのは本規約に同意したお客様のみです。お客様が本規約に違反した場合には本サービスのご利用をお断りする場合があります。\r\n        <br>(3)お客様ご自身の責任で電子端末の操作およびインターネットの利用ができ、本サービス利用に当たって文字表示や電子メール等の諸設定が適切になされている方を対象にしています。\r\n        <br>(4)また、上記条件をみたしていても、お客様が使用されている電子端末やインターネット環境の事情によって、本サービスが正常に作動しない場合に、それがもたらす諸影響について、当社は一切責任を負いません。当社は本サービスの内容およびお客様が本サービスを通じて取得する情報等の完全性、正確性、確実性、有用性等について、いかなる保証も行いません。\r\n        <br>(5)当社はお客様に対して事前の通知をすることなく本規約を変更することがありますので、本サービスをご利用の際は必ず本規約をご確認ください。内容変更後は変更後の内容のみを有効とさせていただきます。\r\n        <br>\r\n        <br>\r\n        <strong>2.販売について</strong>\r\n        <br>\r\n        <br>(1)お客様には、本サービスのご利用の際、お客様のお名前、電子メールアドレスおよび電話番号等の情報（以下「個人情報」といいます）を正確に入力していただきます。個人情報が不正確な場合には、お申込みは無効扱いとなります。\r\n        <br>(2)本サービスにおいて、お客様の入力ミスまたは通信環境の不具合等により重複申込みされた場合でも、当社は一切責任を負いません。また、その代金についての払戻しはいたしません。\r\n        <br>(3)本サービスにおいてお客様がチケットご購入お申込み時に指定可能な事項は販売画面で選択可能な範囲に限ります。一部の作品、上映時間に関しては、取扱いがない、または本サービスで用意されているすべての機能をご利用できない場合があります。\r\n        <br>(4)本サービスはインターネットを利用したリアルタイムチケット購入システムであるため、通信回線の混雑またはオンラインシステム上の不慮の事故等により、チケット購入の成否の確定もしくはその通知が大幅に遅れ、または不可能となる場合があります。\r\n        <br>(5)当社は、前項に定めるチケット購入の成否について、お客様および第三者に対し一切責任を負いません。\r\n        <br>(6)本サービスにおいては、特定のお客様が同じ内容のお申込みを多数回行い、当社が購入意思のないものと判断した場合、全てのお申込みに対してその後のいかなる購入手続きもしない場合があります。また、当社が不適切なお申込みと判断した場合には今後のご利用をご遠慮いただく場合もあります。\r\n        <br>(7)本サービスでのご購入お申込み完了後、上映中止の場合を除いては、交通渋滞や駐車場渋滞による来場遅延等の理由の如何にかかわらず上映作品・時間・座席の変更およびご購入のキャンセル、払戻し等一切受け付けていません。お客様のご都合でチケットをお引取りにならない場合も払戻しはいたしませんのでご注意ください。\r\n        <br>(8)チケットのご購入お申込みが成立した場合には、当社はお客様に対して「予約番号」を発行します。チケットを取得する際、予約番号と電話番号の入力が必要です。\r\n        <br>(9)チケットのお引渡しは、チケット情報照会ページから表示されるＱＲコード(スマート入場の場合)、または該当劇場窓口での発券によるものとさせていただきます。上映開始時間を著しく過ぎてしまった場合は入場をお断りさせていただく場合もあります。また、当日窓口で発券の場合、劇場指定の制限時間までに発券手続きを完了しない場合には予約は無効となります。\r\n        <br>(10)何らかの理由によるご購入対象映画の上映中止により払戻しを行う場合は、払戻し金額はチケット券面額として、それ以外の費用は適用外となります。払戻し方法は、ご利用のクレジットカード会社、株式会社ムービーウォーカーおよび弊社の処理方法に準じます。\r\n        <br>(11)ご購入お申込み完了後、当社よりご購入確認の電子メールを送信させていただきます。チケット購入お申込み時のオーダーフォームへの入力漏れ、正しくない電子メールアドレスの入力、判読不可能な文字化け現象等、お客様からのお申込み内容に何らかの不具合が生じた場合、電子メールを送信できないことがあります。電子メールの不達・誤達・遅達等について当社は一切責任を負いません。\r\n        <br>\r\n        <br>\r\n        <strong>3.料金について</strong>\r\n        <br>\r\n        <br>(1)本サービスは当社規定の料金体系に基づいてご利用いただくことを前提とします。チケット購入時には適切な券種をご指定ください。\r\n        <br>(2)実施劇場のチケットの価格は全国的な料金体系に基づいて設定されており、作品によって異なる場合があります。\r\n        <br>(3)一回のお申込みにつき、お申込み枚数を6枚までに制限させていただきます。7枚以上の複数枚数をお申込みの場合はお申込み手続きを必要回数行ってください。この場合、お座席はお申込み単位で離れた位置となる場合がございますのでご了承ください。\r\n        <br>(4)一般料金以外のチケットをご購入の場合は各種証明書をご提示いただきます。ご来場の際にはあらかじめご準備ください。ご提示いただけない場合はご入場をお断りいたします。\r\n        <br>(5)上映される映画には映倫管理委員会の定めたレイティング（作品内容による鑑賞年齢制限）を適用しています。レイティングの定められた映画においては、本サービスを中止する場合があります。\r\n        <br>\r\n        <br>\r\n        <strong>4.決済について</strong>\r\n        <br>\r\n        <br>本サービスにおいて提供する決済方法について以下のように規定します。\r\n        <br>\r\n        <br>(1)本サービスは成年者のご利用を推奨しております。未成年者が本サービスをご利用される場合、必ず保護者同意の上ご利用ください。未成年者が本サービスをご利用された場合、全ての事項において保護者の同意を得たものとみなします。\r\n        <br>(2)国内発行、かつ、当社指定のクレジットカードをお持ちのお客様にご利用いただけます。\r\n        <br>クレジットカードの与信手続き完了をもって販売契約の成立とします。なお、お申込みの際の虚偽入力、誤入力もしくは入力漏れ、または各クレジットカード発行会社の規約等に準じない等の何らかの理由でお客様のクレジットカードによる決済ができない場合には、チケット購入は無効となります。お取り扱いできなかった場合のお問い合わせ等はクレジットカード発行会社に直接お問い合わせください。\r\n        <br>クレジットカード利用におけるトラブルについて当社は一切責任を負いません。\r\n        <br>(3)ムビチケをお持ちのお客様にご利用いただけます。\r\n        <br>ムビチケ決済手続き完了をもって販売契約の成立とします。なお、お申込みの際の虚偽入力、誤入力もしくは入力漏れ、または株式会社ムービーウォーカーの規約等に準じない等の何らかの理由でムビチケによる決済ができない場合には、チケット購入は無効となります。お取り扱いできなかった場合のお問い合わせ等は、株式会社ムービーウォーカーに直接お問い合わせください。\r\n        <br>ムビチケ利用におけるトラブルについて当社は一切責任を負いません。\r\n        <br>(4)お客様ご自身の過失によるトラブルについて当社は一切責任を負いません。\r\n        <br>\r\n        <br>\r\n        <strong>5.禁止行為</strong>\r\n        <br>\r\n        <br>(1)お客様は本サービスのご利用にあたって、以下の行為を行ってはならないものとします。\r\n        <br>・本サービスをご利用される他のお客様およびその他の第三者に迷惑もしくは不利益を及ぼす行為、または本サービスおよびその他のサービスに支障を来す行為\r\n        <br>・法令に違反する行為\r\n        <br>・利用者の許諾を得ることなく、いかなる方法によっても、本サービスを通じて提供される著作物等を著作権法で定める個人の私的使用の範囲を超えて使用する行為\r\n        <br>・本サービスを通じて、もしくは本サービスに関連して営利を目的とする行為またはその準備を目的とする行為（転売目的によるチケットの購入、チケットの転売行為を含む）\r\n        <br>・コンピューターウィルス等の有害なプログラムを、本サービスを通じて、もしくは本サービスに関連して使用し、または提供する行為\r\n        <br>・公序良俗に反する、もしくはその恐れのある行為、または公序良俗に反する情報を本サービスの他の利用者もしくは第三者に提供する行為\r\n        <br>・政治・宗教・性風俗に関する行為\r\n        <br>その他インターネット利用の一般的なマナー、モラルおよび技術を遵守していただきます。当社が不適切と判断する行為を行うお客様には、本サービスのご利用をお断りする場合があります。\r\n        <br>\r\n        <br>\r\n        <strong>6.お客様の情報について</strong>\r\n        <br>\r\n        <br>(1)当社はお客様の個人情報を利用して、電子メールその他の手段によりチケットの購入・販売等に関する通知等をお客様に発信することができるものとします。\r\n        <br>(2)お客様は当社に対し、お申込の際に入力した個人情報を下記各利用目的の範囲内で利用することに同意するものとします。\r\n        <span class=\"space-left\">\r\n            <p>1. ・電子メールその他の手段により当社、関連会社、及び当社と取引関係のある第三者のサー ビスに関する推奨・告知を行うこと\r\n                <br>2. ・アンケート調査並びに景品等の送付を行うこと\r\n                <br>3. ・当社のサービスの改善又は新たなサービスの開発を行うこと\r\n                <br>4. ・上記の他、当社の営業に関する行為\r\n            </p>\r\n        </span>\r\n        (3)当社はお客様がお申込みの際に入力した個人情報を、以下の項目に該当する場合または正当な理由のある場合を除き、第三者に対して開示しないものとします。\r\n        <span class=\"space-left\">\r\n            <p>5. ・お客様が個人情報の開示について同意している場合\r\n                <br>6. ・法令に基づき、行政官庁または司法機関等により開示を求められた場合\r\n                <br>7. ・その他本サービスの運営上必要な場合\r\n            </p>\r\n        </span>\r\n        <br>\r\n        <strong>7.システムに関する項目</strong>\r\n        <br>\r\n        <br>(1)本サービスは、当社以外のサイトおよびサーバーに接続します。\r\n        <br>(2)本サービスはSSL通信を採用しています。\r\n        <br>(3)本サービスの利用途中でお客様がブラウザーの長時間の停止・終了、電子端末操作の停止、ネットワークの切断等の行為を行った場合に生じるいかなる問題にも当社は責任を負いません。\r\n        <br>\r\n        <br>\r\n        <strong>8.本サービスの内容変更・中止・中断について</strong>\r\n        <br>\r\n        <br>(1)当社は本サービスの運営上、そのシステムや内容の変更が必要であると判断した場合、お客様に対し事前に通知することなく、本サービスの内容に変更を行うことがあります。\r\n        <br>(2)当社は以下の各号に該当する場合には、本サービスの運営を中止・中断することがあります。\r\n        <span class=\"space-left\">\r\n            <p>1. ・本サービスのシステムの停止または緊急の保守・点検を行う場合\r\n                <br>2. ・その他、当社が本サービスの運営上必要と判断した場合\r\n                <br>3. ・戦争・暴動・騒乱・労働争議・地震・噴火・洪水・津波・火災・停電・輸送手段の混乱その他当社の合理的支配を超える事由により本サービスの提供ができなくなった場合\r\n            </p>\r\n        </span>\r\n        (3)当社は前項の規定に基づく本サービスの中止、中断、変更もしくは廃止、または本サービスの提供の遅滞、その他本サービスに関連して発生したお客様または第三者の損害について一切責任を負わないものとします。\r\n        <br>\r\n        <br>\r\n        <strong>9.紛争解決について</strong>\r\n        <br>\r\n        <br>(1)本規約の解釈、適用にかかわる準拠法は日本法とします。\r\n        <br>(2)本サービスに関連して、お客様と当社との間で紛争が生じた場合には、双方誠意を持って協議の上解決するものとします。\r\n        <br>(3)本サービスに関連して、お客様が他のお客様もしくは第三者に損害を与えた場合、またはお客様と他のお客様もしくは第三者との間に紛争が生じた場合、\r\n        お客様は自己の費用と責任でかかる損害を賠償し、またはかかる紛争を解決するものとし、当社に何らの迷惑や損害を与えないものとします。\r\n        <br>(4)協議をしても紛争を解決できない場合には、東京地方裁判所をもって第一審の専属的管轄裁判所とします。\r\n        <br>\r\n        <br>\r\n        <br>2018年11月○日現在\r\n    </p>\r\n</div>","import { Component, Input, OnInit } from '@angular/core';\r\n\r\nconst PURCHASE_TERM = {\r\n    '01': { ordinance: '東京都青少年健全育成条例', limit: '23:00' },\r\n    '12': { ordinance: '徳島県青少年健全育成条例', limit: '23:00' },\r\n    '18': { ordinance: '鹿児島県青少年保護育成条例', limit: '23:00' },\r\n    '19': { ordinance: '千葉県青少年健全育成条例', limit: '23:00' }\r\n};\r\n\r\n@Component({\r\n    selector: 'app-purchase-term',\r\n    templateUrl: './purchase-term.component.html',\r\n    styleUrls: ['./purchase-term.component.scss']\r\n})\r\nexport class PurchaseTermComponent implements OnInit {\r\n    @Input() public theaterCode: string;\r\n    public ordinance: string;\r\n    public limit: string;\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n        this.ordinance = '';\r\n        this.limit = '';\r\n        if (this.theaterCode === '01'\r\n            || this.theaterCode === '12'\r\n            || this.theaterCode === '18'\r\n            || this.theaterCode === '19') {\r\n            this.ordinance = PURCHASE_TERM[this.theaterCode].ordinance;\r\n            this.limit = PURCHASE_TERM[this.theaterCode].limit;\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"radius bg-light-gray\">\r\n    <div class=\"screen\" [class.zoom]=\"zoomState\" style=\"visibility: visible;\" (window:resize)=\"resize()\">\r\n        <div [class.active]=\"zoomState\" class=\"zoom-btn text-center\" (click)=\"scaleDown()\">\r\n            <app-icon iconName=\"zoom-out\" width=\"15\" height=\"15\"></app-icon>\r\n            <div class=\"small-x-text\" href=\"#\">ズーム\r\n                <br>解除</div>\r\n        </div>\r\n        <div *ngIf=\"data\" class=\"screen-scroll\" \r\n        [ngStyle]=\"{ \r\n            'height.px': height,\r\n            'transform-origin': origin,\r\n            'transform': 'scale(' + scale + ')'\r\n        }\">\r\n            <div class=\"screen-inner {{ data.screenType }} screen-{{ theaterCode }}-{{ screenCode }}\" \r\n            [ngStyle]=\"{ 'width.px': data.screen.size.w, 'height.px': data.screen.size.h }\"\r\n            (click)=\"scaleUp($event)\">\r\n                \r\n                <div *ngFor=\"let object of data.objects\" \r\n                class=\"object\" \r\n                [ngStyle]=\"{\r\n                    'width.px': object.w, \r\n                    'height.px': object.h, \r\n                    'top.px': object.y, \r\n                    'left.px': object.x, \r\n                    'background-image': 'url(' + object.image + ')',\r\n                    'background-size': object.w + 'px ' +object.h + 'px'\r\n                }\" ></div>\r\n                \r\n                <div *ngFor=\"let columnLabel of data.columnLabels\" \r\n                class=\"object label-object column-object column-object-{{ columnLabel.id }}\" \r\n                [ngStyle]=\"{\r\n                    'width.px': columnLabel.w,\r\n                    'height.px': columnLabel.h, \r\n                    'top.px': columnLabel.y, \r\n                    'left.px': columnLabel.x\r\n                }\">{{ columnLabel.label }}</div>\r\n\r\n                <div *ngFor=\"let lineLabel of data.lineLabels\" \r\n                class=\"object label-object line-object line-object-{{ lineLabel.id }}\" \r\n                [ngStyle]=\"{\r\n                    'width.px': lineLabel.w,\r\n                    'height.px': lineLabel.h, \r\n                    'top.px': lineLabel.y, \r\n                    'left.px': lineLabel.x\r\n                }\">{{ lineLabel.label }}</div>\r\n                \r\n                \r\n                <div *ngFor=\"let seat of data.seats\" \r\n                class=\"seat {{ seat.className }}\" \r\n                [ngStyle]=\"{\r\n                    'top.px': seat.y, \r\n                    'left.px': seat.x\r\n                }\">\r\n                    <a class=\"{{ seat.status }}\" \r\n                    [ngStyle]=\"{\r\n                        'width.px': seat.w,\r\n                        'height.px': seat.h\r\n                    }\" (click)=\"seatSelect(seat)\"><span>{{ seat.label }}</span></a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"device-type-pc\"></div>\r\n        <div class=\"device-type-sp\"></div>\r\n        <div class=\"screen-style\"></div>\r\n    </div>\r\n    <div *ngIf=\"data\" class=\"{{ data.screenType }}\">\r\n        <ng-content></ng-content>\r\n    </div>\r\n</div>","import { HttpClient } from '@angular/common/http';\r\nimport { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { factory } from '@toei-jp/cinerino-api-javascript-client';\r\nimport 'rxjs/add/operator/toPromise';\r\nimport { IReservationSeat } from '../../../models';\r\nimport { CinerinoService } from '../../../services/cinerino/cinerino.service';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\n\r\n@Component({\r\n    selector: 'app-screen',\r\n    templateUrl: './screen.component.html',\r\n    styleUrls: ['./screen.component.scss']\r\n})\r\nexport class ScreenComponent implements OnInit, AfterViewInit {\r\n    public static ZOOM_SCALE = 1;\r\n    @Input() public inputData: IInputScreenData;\r\n    @Input() public test: boolean;\r\n    @Output() public select = new EventEmitter<IReservationSeat[]>();\r\n    @Output() public alert = new EventEmitter();\r\n    @Output() public load = new EventEmitter<IReservationSeat[]>();\r\n    public data: IData;\r\n    public zoomState: boolean;\r\n    public scale: number;\r\n    public height: number;\r\n    public origin: string;\r\n\r\n    constructor(\r\n        private elementRef: ElementRef,\r\n        private http: HttpClient,\r\n        private purchase: PurchaseService,\r\n        private cinerino: CinerinoService,\r\n        private error: ErrorService\r\n    ) { }\r\n\r\n    /**\r\n     * 初期化\r\n     */\r\n    public async ngOnInit() {\r\n        this.zoomState = false;\r\n        this.scale = 1;\r\n        this.height = 0;\r\n        this.origin = '0 0';\r\n        try {\r\n            const data = await this.getData();\r\n            this.data = this.createScreen(data);\r\n        } catch (err) {\r\n            this.error.redirect(new Error('data is not found'));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * レンダリング後処理\r\n     */\r\n    public ngAfterViewInit() {\r\n        const time = 300;\r\n        const timer = setInterval(() => {\r\n            if (this.data !== undefined) {\r\n                clearInterval(timer);\r\n                const screenElement = document.querySelector('.screen-style');\r\n                if (screenElement !== null && this.data.screen.style !== undefined) {\r\n                    screenElement.innerHTML = this.data.screen.style;\r\n                }\r\n                this.scaleDown();\r\n                this.load.emit(this.getSelectSeats());\r\n            }\r\n        }, time);\r\n    }\r\n\r\n    /**\r\n     * モバイル判定\r\n     * @method isMobile\r\n     * @returns {boolean}\r\n     */\r\n    public isMobile(): boolean {\r\n        if (window.innerWidth > 768) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 選択座席取得\r\n     * @method getSelectSeats\r\n     */\r\n    public getSelectSeats(): IReservationSeat[] {\r\n        const activeSeats = this.data.seats.filter((seat) => {\r\n            return (seat.status === 'active');\r\n        });\r\n\r\n        return activeSeats.map((seat) => {\r\n            return {\r\n                seatNumber: seat.code,\r\n                seatSection: seat.section\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 座席選択\r\n     * @method seatSelect\r\n     * @param {Event} event\r\n     * @param {Iseat} seat\r\n     */\r\n    public seatSelect(seat: ISeat) {\r\n        if (this.isMobile() && !this.zoomState) {\r\n            return;\r\n        }\r\n        if (seat.status === 'default') {\r\n            seat.status = 'active';\r\n        } else if (seat.status === 'active') {\r\n            seat.status = 'default';\r\n        }\r\n        const screeningEvent = this.purchase.data.screeningEvent;\r\n        if (screeningEvent !== undefined\r\n            && screeningEvent.maxSeatNumber < this.getSelectSeats().length\r\n        ) {\r\n            seat.status = 'default';\r\n            this.alert.emit();\r\n\r\n            return;\r\n        }\r\n        this.select.emit(this.getSelectSeats());\r\n    }\r\n\r\n    /**\r\n     * 拡大\r\n     * @method scaleUp\r\n     * @param {Event} event\r\n     * @returns {void}\r\n     */\r\n    public scaleUp(event: MouseEvent) {\r\n        if (this.zoomState) {\r\n            return;\r\n        }\r\n        if (!this.isMobile()) {\r\n            return;\r\n        }\r\n        this.zoomState = true;\r\n        const element: HTMLElement = this.elementRef.nativeElement;\r\n        const screen = <HTMLDivElement>element.querySelector('.screen');\r\n        const scroll = <HTMLDivElement>element.querySelector('.screen-scroll');\r\n        const rect = scroll.getBoundingClientRect();\r\n        const scrollTop = window.pageYOffset || (<HTMLElement>document.documentElement).scrollTop;\r\n        const scrollLeft = window.pageXOffset || (<HTMLElement>document.documentElement).scrollLeft;\r\n        const offset = {\r\n            top: rect.top + scrollTop,\r\n            left: rect.left + scrollLeft\r\n        };\r\n        const pos = {\r\n            x: event.pageX - offset.left,\r\n            y: event.pageY - offset.top\r\n        };\r\n        const scrollPos = {\r\n            x: pos.x / this.scale - screen.offsetWidth / 2,\r\n            y: pos.y / this.scale - screen.offsetHeight / 2,\r\n        };\r\n        this.scale = ScreenComponent.ZOOM_SCALE;\r\n        this.origin = '50% 50%';\r\n\r\n        setTimeout(() => {\r\n            scroll.scrollLeft = scrollPos.x;\r\n            scroll.scrollTop = scrollPos.y;\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * 縮小\r\n     * @method scaleDown\r\n     * @returns {void}\r\n     */\r\n    public scaleDown(): void {\r\n        const element: HTMLElement = this.elementRef.nativeElement;\r\n        const screen = <HTMLDivElement>element.querySelector('.screen');\r\n        this.zoomState = false;\r\n        const scale = screen.offsetWidth / this.data.screen.size.w;\r\n        this.scale = (scale > ScreenComponent.ZOOM_SCALE) ? ScreenComponent.ZOOM_SCALE : scale;\r\n        this.height = this.data.screen.size.h * this.scale;\r\n        this.origin = '0 0';\r\n    }\r\n\r\n    /**\r\n     * リサイズ処理\r\n     * @method resize\r\n     */\r\n    public resize(): void {\r\n        this.scaleDown();\r\n    }\r\n\r\n    /**\r\n     * データ取得\r\n     * @method getData\r\n     */\r\n    public async getData(): Promise<{\r\n        screen: IScreen,\r\n        status: factory.chevre.event.screeningEvent.IScreeningRoomSectionOffer[]\r\n    }> {\r\n        const DIGITS = {\r\n            '02': -2,\r\n            '03': -3\r\n        };\r\n        const theaterCode = `00${this.inputData.theaterCode}`.slice(DIGITS['02']);\r\n        const screenCode = `000${this.inputData.screenCode}`.slice(DIGITS['03']);\r\n        const screen = await this.http.get<IScreen>(`/assets/json/theater/${theaterCode}/${screenCode}.json`).toPromise();\r\n        const setting = await this.http.get<IScreen>('/assets/json/theater/setting.json').toPromise();\r\n\r\n        await this.cinerino.getServices();\r\n        let seatStatus: factory.chevre.event.screeningEvent.IScreeningRoomSectionOffer[];\r\n        if (this.test) {\r\n            seatStatus = [];\r\n        } else {\r\n            if (this.purchase.data.screeningEvent === undefined) {\r\n                throw new Error('screeningEvent is undefined');\r\n            }\r\n            seatStatus = await this.cinerino.event.searchScreeningEventOffers({\r\n                eventId: this.purchase.data.screeningEvent.id\r\n            });\r\n        }\r\n        // スクリーンデータをマージ\r\n        return {\r\n            screen: Object.assign(setting, screen),\r\n            status: seatStatus\r\n        };\r\n    }\r\n\r\n    /**\r\n     * スクリーン作成\r\n     */\r\n    public createScreen(data: {\r\n        screen: IScreen,\r\n        status: factory.chevre.event.screeningEvent.IScreeningRoomSectionOffer[]\r\n    }): IData {\r\n        console.log('-------------------', data);\r\n        const screenData = data.screen;\r\n        const seatStatus = data.status;\r\n        // y軸ラベル\r\n        const labels: string[] = [];\r\n        const startLabelNo = 65;\r\n        const endLabelNo = 91;\r\n        for (let i = startLabelNo; i < endLabelNo; i++) {\r\n            labels.push(String.fromCharCode(i));\r\n        }\r\n        // 行ラベル\r\n        const lineLabels: ILabel[] = [];\r\n        // 列ラベル\r\n        const columnLabels: ILabel[] = [];\r\n        // 座席リスト\r\n        const seats: ISeat[] = [];\r\n\r\n        const pos = { x: 0, y: 0 };\r\n        let labelCount = 0;\r\n        for (let y = 0; y < screenData.map.length; y++) {\r\n            if (y === 0) {\r\n                pos.y = 0;\r\n            }\r\n            // ポジション設定\r\n            if (y === 0) {\r\n                pos.y += screenData.seatStart.y;\r\n            } else if (screenData.map[y].length === 0) {\r\n                pos.y += screenData.aisle.middle.h - screenData.seatMargin.h;\r\n            } else {\r\n                labelCount++;\r\n                pos.y += screenData.seatSize.h + screenData.seatMargin.h;\r\n            }\r\n\r\n            for (let x = 0; x < screenData.map[y].length; x++) {\r\n                if (x === 0) {\r\n                    pos.x = screenData.seatStart.x;\r\n                }\r\n\r\n                // 座席ラベルHTML生成\r\n                if (x === 0) {\r\n                    lineLabels.push({\r\n                        id: labelCount,\r\n                        w: screenData.seatSize.w,\r\n                        h: screenData.seatSize.h,\r\n                        y: pos.y,\r\n                        x: pos.x - screenData.seatLabelPos,\r\n                        label: labels[labelCount]\r\n                    });\r\n                }\r\n\r\n                if (screenData.map[y][x] === 8) {\r\n                    pos.x += screenData.aisle.middle.w;\r\n                } else if (screenData.map[y][x] === 9) {\r\n                    pos.x += screenData.aisle.middle.w;\r\n                } else if (screenData.map[y][x] === 10) {\r\n                    pos.x += (screenData.seatSize.w / 2) + screenData.seatMargin.w;\r\n                } else if (screenData.map[y][x] === 11) {\r\n                    pos.x += (screenData.seatSize.w / 2) + screenData.seatMargin.w;\r\n                }\r\n\r\n                // 座席番号HTML生成\r\n                if (y === 0) {\r\n\r\n                    const label = (data.screen.seatNumberAlign === 'left')\r\n                        ? String(x + 1)\r\n                        : String(screenData.map[0].length - x);\r\n                    columnLabels.push({\r\n                        id: x,\r\n                        w: screenData.seatSize.w,\r\n                        h: screenData.seatSize.h,\r\n                        y: pos.y - screenData.seatNumberPos,\r\n                        x: pos.x,\r\n                        label: label\r\n                    });\r\n\r\n                }\r\n                if (screenData.map[y][x] === 1\r\n                    || screenData.map[y][x] === 4\r\n                    || screenData.map[y][x] === 5\r\n                    || screenData.map[y][x] === 8\r\n                    || screenData.map[y][x] === 10) {\r\n                    // 座席HTML生成\r\n                    const code = (data.screen.seatNumberAlign === 'left')\r\n                        ? `${labels[labelCount]}-${String(x + 1)}`\r\n                        : `${labels[labelCount]}-${String(screenData.map[y].length - x)}`;\r\n                    const label = (data.screen.seatNumberAlign === 'left')\r\n                        ? `${labels[labelCount]}${String(x + 1)}`\r\n                        : `${labels[labelCount]}${String(screenData.map[y].length - x)}`;\r\n                    let section = '';\r\n                    let status = 'disabled';\r\n                    const inStock = factory.chevre.itemAvailability.InStock;\r\n                    for (const listSeatSection of seatStatus) {\r\n                        const targetSeat = listSeatSection.containsPlace.find((s) => {\r\n                            return (\r\n                                s.branchCode === code\r\n                                && s.offers !== undefined\r\n                                && s.offers.find((o) => o.availability === inStock) !== undefined\r\n                            );\r\n                        });\r\n                        if (targetSeat !== undefined) {\r\n                            section = listSeatSection.branchCode;\r\n                            status = 'default';\r\n                            break;\r\n                        }\r\n                    }\r\n                    // 選択中\r\n                    if (this.purchase.data.reservations.length > 0) {\r\n                        const findReservationResult = this.purchase.data.reservations.find((reservation) => {\r\n                            return (reservation.seat.seatNumber === code);\r\n                        });\r\n                        if (findReservationResult !== undefined) {\r\n                            section = findReservationResult.seat.seatSection;\r\n                            status = 'active';\r\n                        }\r\n                    }\r\n\r\n                    const seat = {\r\n                        className: `seat-${label}`,\r\n                        w: screenData.seatSize.w,\r\n                        h: screenData.seatSize.h,\r\n                        y: pos.y,\r\n                        x: pos.x,\r\n                        label: label,\r\n                        code: code,\r\n                        section: section,\r\n                        status: status\r\n                    };\r\n                    if (screenData.hc.indexOf(label) !== -1) {\r\n                        seat.className = `seat-${label} seat-hc`;\r\n                    }\r\n                    seats.push(seat);\r\n                }\r\n                // ポジション設定\r\n                if (screenData.map[y][x] === 2) {\r\n                    pos.x += screenData.aisle.middle.w + screenData.seatMargin.w;\r\n                } else if (screenData.map[y][x] === 3) {\r\n                    pos.x += screenData.aisle.small.w + screenData.seatMargin.w;\r\n                } else if (screenData.map[y][x] === 4) {\r\n                    pos.x += screenData.aisle.middle.w + screenData.seatSize.w + screenData.seatMargin.w;\r\n                } else if (screenData.map[y][x] === 5) {\r\n                    pos.x += screenData.aisle.small.w + screenData.seatSize.w + screenData.seatMargin.w;\r\n                } else if (screenData.map[y][x] === 6) {\r\n                    pos.x += screenData.aisle.middle.w + screenData.seatSize.w + screenData.seatMargin.w;\r\n                } else if (screenData.map[y][x] === 7) {\r\n                    pos.x += screenData.aisle.small.w + screenData.seatSize.w + screenData.seatMargin.w;\r\n                } else {\r\n                    pos.x += screenData.seatSize.w + screenData.seatMargin.w;\r\n                }\r\n            }\r\n        }\r\n        // スクリーンタイプ\r\n        const screenType = (screenData.type === 1)\r\n            ? 'screen-imax' : (screenData.type === 2)\r\n                ? 'screen-4dx' : '';\r\n\r\n        return {\r\n            screen: screenData,\r\n            objects: screenData.objects,\r\n            screenType: screenType,\r\n            lineLabels: (data.screen.lineLabel) ? lineLabels : [],\r\n            columnLabels: (data.screen.columnLabel) ? columnLabels : [],\r\n            seats: seats\r\n        };\r\n    }\r\n}\r\n\r\ninterface ISize {\r\n    w: number;\r\n    h: number;\r\n}\r\n\r\ninterface IPosition {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\ninterface IObject extends ISize, IPosition {\r\n    image: string;\r\n}\r\n\r\ninterface IScreen {\r\n    type: number;\r\n    size: ISize;\r\n    objects: IObject[];\r\n    seatStart: IPosition;\r\n    map: number[][];\r\n    special: string[];\r\n    hc: string[];\r\n    pair: string[];\r\n    seatSize: ISize;\r\n    seatMargin: ISize;\r\n    aisle: {\r\n        small: ISize;\r\n        middle: ISize;\r\n    };\r\n    seatLabelPos: number;\r\n    seatNumberPos: number;\r\n    seatNumberAlign: 'left' | 'right';\r\n    html: string;\r\n    style?: string;\r\n    columnLabel: boolean;\r\n    lineLabel: boolean;\r\n}\r\n\r\ninterface ILabel {\r\n    id: number;\r\n    w: number;\r\n    h: number;\r\n    y: number;\r\n    x: number;\r\n    label: string;\r\n}\r\n\r\nexport interface ISeat {\r\n    className: string;\r\n    w: number;\r\n    h: number;\r\n    y: number;\r\n    x: number;\r\n    label: string;\r\n    code: string;\r\n    section: string;\r\n    status: string;\r\n}\r\n\r\ninterface IData {\r\n    screen: IScreen;\r\n    objects: IObject[];\r\n    screenType: string;\r\n    lineLabels: ILabel[];\r\n    columnLabels: ILabel[];\r\n    seats: ISeat[];\r\n}\r\n\r\nexport interface IInputScreenData {\r\n    theaterCode: string;\r\n    // dateJouei: string;\r\n    titleCode: string;\r\n    // titleBranchNum: string;\r\n    // timeBegin: string;\r\n    screenCode: string;\r\n}\r\n","<!-- <div class=\"seat-info\" [class.screen-4dx]=\"type === '002'\"> -->\r\n<div class=\"seat-info\">\r\n    <div class=\"box radius bg-white\">\r\n        <div class=\"seat\">\r\n            <strong>空席</strong>\r\n        </div>\r\n        <div class=\"seat active\">\r\n            <strong>選択中</strong>\r\n        </div>\r\n        <div class=\"seat disabled\">\r\n            <strong>購入不可</strong>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-seat-info',\r\n  templateUrl: './seat-info.component.html',\r\n  styleUrls: ['./seat-info.component.scss']\r\n})\r\nexport class SeatInfoComponent implements OnInit {\r\n  @Input() public type: string;\r\n  constructor() { }\r\n\r\n  public ngOnInit() {\r\n  }\r\n\r\n}\r\n","<div class=\"site-seal d-table\">\r\n    <div class=\"d-td\">\r\n        <p class=\"small-x-text\">\r\n            この画面は、高いセキュリティでプライバシーを保護する為に、SSL暗号化通信を採用しています。\r\n        </p>\r\n    </div>\r\n    <div class=\"d-td\">\r\n        <table width=\"135\" border=\"0\" cellpadding=\"2\" cellspacing=\"0\" title=\"このマークは、SSL/TLSで通信を保護している証です。\">\r\n            <tbody>\r\n                <tr>\r\n                    <td width=\"135\" align=\"center\" valign=\"top\">\r\n                        <span>\r\n                            <img (click)=\"verifySeal()\" style=\"cursor:pointer;cursor:hand\" src=\"https://seal.godaddy.com/images/3/ja/siteseal_gd_3_h_d_m.gif\" alt=\"SSL site seal - click to verify\">\r\n                        </span>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-site-seal',\r\n    templateUrl: './site-seal.component.html',\r\n    styleUrls: ['./site-seal.component.scss']\r\n})\r\nexport class SiteSealComponent implements OnInit {\r\n\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n\r\n    public verifySeal() {\r\n        (<any>window).verifySeal();\r\n    }\r\n\r\n}\r\n","<app-header>\r\n    <app-purchase-step></app-purchase-step>\r\n</app-header>\r\n<router-outlet></router-outlet>\r\n<app-footer></app-footer>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-purchase-base',\r\n    templateUrl: './purchase-base.component.html',\r\n    styleUrls: ['./purchase-base.component.scss']\r\n})\r\nexport class PurchaseBaseComponent implements OnInit {\r\n\r\n    constructor() { }\r\n\r\n    public ngOnInit() {\r\n    }\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">購入完了</h1>\r\n    <p class=\"read\">ご購入ありがとうございました。\r\n        <br>購入者情報入力画面で入力していただいたメールアドレス宛に購入完了メールを送信しました。\r\n        <br>ご入場方法に関しましてはページ下部をご確認ください。\r\n        <br>※購入完了メールの送信に時間がかかる事がありますのでご注意ください。</p>\r\n\r\n    <div class=\"form-layout\">\r\n        <ul class=\"box radius bg-light-gray info mb-large\">\r\n            <li class=\"purchase-number\">\r\n                <dl>\r\n                    <dt>予約番号</dt>\r\n                    <dd>\r\n                        <strong class=\"red-text large-x-text\">{{ data.order.confirmationNumber }}</strong>\r\n                        <p class=\"small-x-text\">※チケットの発行等に必要な番号となりますので必ず忘れないようにしてください。</p>\r\n                    </dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>劇場 / スクリーン</dt>\r\n                    <dd>{{ getTheaterName() }} / {{ getScreenName() }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>作品名</dt>\r\n                    <dd>{{ getTitle() }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>鑑賞日時</dt>\r\n                    <dd>\r\n                        {{ getAppreciationDate() }} {{ getStartDate() }} - {{ getEndDate() }}\r\n                    </dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>座席</dt>\r\n                    <dd>\r\n                        <p *ngFor=\"let offer of data.order.acceptedOffers\">\r\n                            {{ offer.itemOffered.reservedTicket.ticketedSeat.seatNumber }} {{\r\n                            offer.itemOffered.reservedTicket.ticketType.name.ja\r\n                            }} ￥{{ offer.itemOffered.reservedTicket.totalPrice }}\r\n                        </p>\r\n                    </dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>ご利用金額</dt>\r\n                    <dd>￥{{ data.order.price }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>メールアドレス</dt>\r\n                    <dd>{{ data.order.customer.email }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li *ngIf=\"user.isMember()\">\r\n                <dl>\r\n                    <dt>獲得ポイント</dt>\r\n                    <dd>\r\n                        <strong class=\"red-text\">{{ data.incentive }}ポイント</strong>\r\n                    </dd>\r\n                </dl>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class=\"ticket-app-hide\">\r\n        <div class=\"mb-x-large\">\r\n            <p><strong>&lt;購入完了メールが届かない場合のご確認事項&gt;</strong></p>\r\n            <p class=\"mb-middle small-x-text\">\r\n                <br>購入完了後、購入完了メールが届かない場合は下記2点をご確認ください。\r\n                <br>また、購入完了メールは自動送信のため再送信は致しかねます。\r\n                <br>購入できているかのご確認は「予約番号」をお控えのうえ\r\n                <a class=\"inquiry-login-link\" href=\"{{ getInquiryUrl() }}\" target=\"_blank\">チケット照会ページ</a>よりご確認ください。\r\n                <br>・ご入力いただいたメールアドレスに不備があった場合やメールの着信を拒否されている場合は購入完了メールが受け取れない場合があります。\r\n                <br>・プロバイダのメール設定、携帯キャリア会社のメール設定のフィルタリング機能を有効にしている方は「削除フォルダ」または「迷惑メールフォルダ」をご確認ください。\r\n            </p>\r\n            <!-- <div class=\"button dark-blue-button print-button center-button not-print\">\r\n                <a class=\"icon-print-white\" (click)=\"print()\">印刷する</a>\r\n            </div> -->\r\n        </div>\r\n\r\n        <div class=\"not-print mb-x-large\">\r\n            <h2 class=\"page-ttl\">発券方法</h2>\r\n\r\n            <ul class=\"ticketing-method\">\r\n                <li>\r\n                    <dl class=\"box radius bg-light-gray\">\r\n                        <dt class=\"mb-small text-center large-text\">\r\n                            <strong>QRコード付きチケットをあなたのスマホから</strong>\r\n                        </dt>\r\n                        <dd>\r\n                            <p class=\"mb-small\">チケット発券は以下の照会ページから行えます。\r\n                                <br>『予約番号』と購入時に入力した『電話番号』でチケット発券して頂けます。\r\n                                <br>※QRコードは上映開始の24時間前から取得できます。</p>\r\n                            <div class=\"image mb-x-small\">\r\n                                <img src=\"/assets/images/purchase/complete/qr_ticket.svg\" alt=\"\">\r\n                            </div>\r\n                            <div class=\"button blue-button inquiry-button mb-middle center-button\">\r\n                                <a class=\"icon-new-tab-white\" href=\"{{ getInquiryUrl() }}\" target=\"_blank\">照会ページへ</a>\r\n                            </div>\r\n                            <p>\r\n                                <a class=\"icon-new-tab-blue\" href=\"{{ environment.FRONTEND_ENDPOINT }}/method/ticketing\"\r\n                                    target=\"_blank\">※お連れ様と別々で入場する場合のご案内</a>\r\n                            </p>\r\n                        </dd>\r\n                    </dl>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div class=\"not-print\">\r\n            <h2 class=\"page-ttl\">入場方法</h2>\r\n\r\n            <ul class=\"entry-method\">\r\n                <li>\r\n                    <dl class=\"box radius bg-light-gray\">\r\n                        <dt class=\"mb-x-small text-center large-text\">\r\n                            <strong>QRコードでスマート入場</strong>\r\n                        </dt>\r\n                        <dd>\r\n                            <p class=\"mb-small\">\r\n                                発券したQRコード付きチケットを提示してスムーズに入場！\r\n                            </p>\r\n                            <div class=\"image mb-x-small\">\r\n                                <img src=\"/assets/images/purchase/complete/qr.svg\" alt=\"\">\r\n                            </div>\r\n                            <p>\r\n                                スマートフォンをお持ちでない方は当日チケット発券/入場も可能です。\r\n                                <br>発券方法は\r\n                                <a class=\"icon-new-tab-blue\" href=\"{{ environment.FRONTEND_ENDPOINT }}/method/ticketing\"\r\n                                    target=\"_blank\">こちら</a>\r\n                            </p>\r\n                        </dd>\r\n                    </dl>\r\n                </li>\r\n            </ul>\r\n\r\n            <div class=\"button-area\">\r\n                <div class=\"prev-link\">\r\n                    <a href=\"{{ environment.PORTAL_SITE_URL }}\">\r\n                        <app-icon iconName=\"prev-black\" width=\"15\" height=\"15\"></app-icon>劇場ページへ\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"ticket-app-show\">\r\n        <dl class=\"box radius bg-light-gray mb-middle\">\r\n            <dt class=\"mb-small text-center\">\r\n                <strong>チケットホルダーでスマート入場</strong>\r\n            </dt>\r\n            <dd>\r\n                <div class=\"image mb-x-small bg-white\">\r\n                    <img src=\"/assets/images/purchase/complete/qr.svg\" alt=\"\">\r\n                </div>\r\n                <p>購入したチケットはチケットホルダーに登録されます。鑑賞当日はチケットホルダー内のQRコードを提示する事で、劇場で発券を行わずにスムーズにご入場頂けます。</p>\r\n            </dd>\r\n        </dl>\r\n\r\n        <div class=\"button blue-button center-button\">\r\n            <a href=\"{{ environment.APP_SITE_URL }}/#/ticket\">チケットホルダーに戻る</a>\r\n        </div>\r\n    </div>\r\n\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport * as factory from '@toei-jp/cinerino-factory';\r\nimport * as moment from 'moment';\r\nimport { environment } from '../../../../environments/environment';\r\n// import { CinerinoService } from '../../../services/cinerino/cinerino.service';\r\nimport { TimeFormatPipe } from '../../../pipes/time-format/time-format.pipe';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { SaveType, StorageService } from '../../../services/storage/storage.service';\r\nimport { UserService } from '../../../services/user/user.service';\r\n\r\n@Component({\r\n    selector: 'app-purchase-complete',\r\n    templateUrl: './purchase-complete.component.html',\r\n    styleUrls: ['./purchase-complete.component.scss']\r\n})\r\nexport class PurchaseCompleteComponent implements OnInit {\r\n    public data: {\r\n        order: factory.order.IOrder;\r\n        transaction: factory.transaction.placeOrder.ITransaction;\r\n        movieTheaterOrganization: factory.organization.movieTheater.IOrganization;\r\n        // sendEmailNotification?: factory.task.sendEmailMessage.ITask\r\n    };\r\n    public environment = environment;\r\n\r\n    constructor(\r\n        private storage: StorageService,\r\n        private error: ErrorService,\r\n        // private cinerino: CinerinoService,\r\n        public user: UserService\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        window.scrollTo(0, 0);\r\n        this.data = this.storage.load('complete', SaveType.Session);\r\n        if (this.data === null) {\r\n            this.error.redirect(new Error('complete data is null'));\r\n        }\r\n        /*if (this.data.sendEmailNotification === undefined) {\r\n            this.mailSendProcess(0).then().catch();\r\n        }*/\r\n    }\r\n\r\n    /**\r\n     * 印刷\r\n     * @method print\r\n     */\r\n    public print() {\r\n        print();\r\n    }\r\n\r\n    /**\r\n     * 劇場名取得\r\n     * @method getTheaterName\r\n     * @returns {string}\r\n     */\r\n    public getTheaterName() {\r\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\r\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\r\n            return '';\r\n        }\r\n\r\n        return itemOffered.reservationFor.superEvent.location.name.ja;\r\n    }\r\n\r\n    /**\r\n     * スクリーン名取得\r\n     * @method getScreenName\r\n     * @returns {string}\r\n     */\r\n    public getScreenName() {\r\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\r\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\r\n            return '';\r\n        }\r\n\r\n        return itemOffered.reservationFor.location.name.ja;\r\n    }\r\n\r\n    /**\r\n     * 作品名取得\r\n     * @method getTitle\r\n     * @returns {string}\r\n     */\r\n    public getTitle() {\r\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\r\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\r\n            return '';\r\n        }\r\n\r\n        return itemOffered.reservationFor.name.ja;\r\n    }\r\n\r\n    /**\r\n     * 鑑賞日取得\r\n     * @method getAppreciationDate\r\n     * @returns {string}\r\n     */\r\n    public getAppreciationDate() {\r\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\r\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\r\n            return '';\r\n        }\r\n        moment.locale('ja');\r\n\r\n        return moment(itemOffered.reservationFor.startDate).format('YYYY年MM月DD日(ddd)');\r\n    }\r\n\r\n    /**\r\n     * 上映開始時間取得\r\n     * @method getStartDate\r\n     * @returns {string}\r\n     */\r\n    public getStartDate() {\r\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\r\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\r\n            return '';\r\n        }\r\n        return new TimeFormatPipe().transform(itemOffered.reservationFor.startDate);\r\n    }\r\n\r\n    /**\r\n     * 上映終了取得\r\n     * @method getEndDate\r\n     * @returns {string}\r\n     */\r\n    public getEndDate() {\r\n        const itemOffered = this.data.order.acceptedOffers[0].itemOffered;\r\n        if (itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\r\n            return '';\r\n        }\r\n        return new TimeFormatPipe().transform(itemOffered.reservationFor.endDate);\r\n    }\r\n\r\n    /**\r\n     * 照会URL取得\r\n     * @method getInquiryUrl\r\n     * @returns {string}\r\n     */\r\n    public getInquiryUrl() {\r\n        const params = `theater=${this.data.movieTheaterOrganization.location.branchCode}&reserve=${this.data.order.confirmationNumber}`;\r\n        return `${this.environment.FRONTEND_ENDPOINT}/inquiry/login?${params}`;\r\n    }\r\n\r\n    /**\r\n     * メール送信処理\r\n     */\r\n    /*public async mailSendProcess(count: number) {\r\n        try {\r\n            const movieTheaterPlace = await this.cinerino.searchMovieTheaters({\r\n                location: branchCodes: [this.data.movieTheaterOrganization.location.branchCode]\r\n            });\r\n            const text = (this.user.isNative())\r\n                ? this.getAppMailText(movieTheaterPlace.telephone)\r\n                : this.getMailText(movieTheaterPlace.telephone);\r\n                const sendEmailNotificationArgs = {\r\n                    transactionId: this.data.transaction.id,\r\n                    emailMessageAttributes: {\r\n                        typeOf: <any>factory.creativeWorkType.EmailMessage,\r\n                        sender: {\r\n                            name: this.data.order.seller.name,\r\n                            email: 'noreply@ticket-cinemasunshine.com'\r\n                        },\r\n                        toRecipient: {\r\n                            name: `${this.data.order.customer.familyName} ${this.data.order.customer.givenName}`,\r\n                            email: this.data.order.customer.email\r\n                        },\r\n                        about: `${this.data.order.seller.name} 購入完了`,\r\n                        text: text\r\n                    }\r\n                };\r\n            this.data.sendEmailNotification =\r\n                await this.cinerino.transaction.placeOrder.sendEmailNotification(sendEmailNotificationArgs);\r\n            this.storage.save('complete', this.data, SaveType.Session);\r\n        } catch (err) {\r\n            const limit = 10;\r\n            if (count < limit) {\r\n                const timer = 1000;\r\n                setTimeout(\r\n                    () => {\r\n                        this.mailSendProcess(count + 1);\r\n                    },\r\n                    timer\r\n                );\r\n            }\r\n        }\r\n    }*/\r\n\r\n    public getMailText(telephone: string) {\r\n        // tslint:disable:max-line-length\r\n        return `${this.data.order.customer.familyName} ${this.data.order.customer.givenName} 様\r\nこの度は、${this.data.order.seller.name}のオンライン先売りチケットサービスにてご購入頂き、誠にありがとうございます。お客様がご購入されましたチケットの情報は下記の通りです。\r\n\r\n[予約番号]\r\n${this.data.order.confirmationNumber}\r\n\r\n[鑑賞日時]\r\n${this.getAppreciationDate()} ${this.getStartDate()} - ${this.getEndDate()}\r\n\r\n[作品名]\r\n${this.getTitle()}\r\n\r\n[スクリーン名]\r\n${this.getScreenName()}\r\n\r\n[座席]\r\n${this.data.order.acceptedOffers.map((offer) => {\r\n                if (offer.itemOffered.typeOf !== factory.chevre.reservationType.EventReservation) {\r\n                    return '';\r\n                }\r\n                return `${offer.itemOffered.reservedTicket.ticketedSeat} ${offer.itemOffered.reservedTicket.ticketType} ￥${offer.itemOffered.reservedTicket.totalPrice}`;\r\n            }).join('\\n')}\r\n[合計]\r\n￥${this.data.order.price}\r\n\r\n【チケット発券について】\r\nチケットの発券/入場方法は2通りからお選び頂けます。\r\n\r\n<発券/入場方法1 入場用QRコードで入場>\r\n以下のURLよりチケット情報確認画面へアクセス頂き、「チケットを購入した劇場」「予約番号」「お電話番号」を入力してログインしてください。 ご鑑賞時間の24時間前から入場用QRコードが表示されますので、入場時にそちらのQRコードをご提示ください。\r\n${this.getInquiryUrl()}\r\n\r\n<発券/入場方法2 劇場発券機で発券>\r\n劇場に設置されている発券機にて発券頂きます。予約番号をお控えの上ご来場ください。\r\nチケットが発券できなかった場合にはチケット売場にお越しください。\r\n\r\n【ご注意事項】\r\n・ご購入されたチケットの変更、キャンセル、払い戻しはいかなる場合でも致しかねます。\r\n・チケットの発券にお時間がかかる場合もございますので、お時間の余裕を持ってご来場ください。\r\n・メンバーズカード会員のお客様は、ポイントは付与いたしますので、発券したチケットまたは、表示されたQRコードとメンバーズカードをチケット売場までお持ちくださいませ。\r\n・年齢や学生など各種証明が必要なチケットを購入された方は、入場時にご提示ください。\r\nご提示頂けない場合は、一般料金との差額を頂きます。\r\n\r\nなお、このメールは、${this.data.order.seller.name}の予約システムでチケットをご購入頂いた方にお送りしておりますが、\r\nチケット購入に覚えのない方に届いております場合は、下記お問い合わせ先までご連絡ください。\r\n※なお、このメールアドレスは送信専用となっておりますので、ご返信頂けません。\r\nご不明な点がございましたら、下記番号までお問合わせください。\r\n\r\nお問い合わせはこちら\r\n${this.data.order.seller.name}\r\nTEL：${telephone}`;\r\n    }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">購入内容確認</h1>\r\n    <p class=\"read\">\r\n        <strong class=\"large-text red-text\">まだ購入は完了していません。</strong>\r\n        <br>ご購入内容をご確認頂き「購入完了」ボタンを押して購入を確定してください。</p>\r\n\r\n    <div class=\"form-layout\">\r\n        <h2 class=\"section-ttl\">\r\n            作品情報\r\n            <div class=\"right ticket-app-hide\">\r\n                <div class=\"button light-gray-button change-button\">\r\n                    <a href=\"{{ purchase.data.movieTheaterOrganization?.url }}\">変更</a>\r\n                </div>\r\n            </div>\r\n            <div class=\"right ticket-app-show\">\r\n                <div class=\"button light-gray-button change-button\">\r\n                    <a href=\"{{ environment.APP_SITE_URL }}/#/purchase\">変更</a>\r\n                </div>\r\n            </div>\r\n        </h2>\r\n\r\n        <ul class=\"box radius bg-light-gray mb-large\">\r\n            <li>\r\n                <dl>\r\n                    <dt>劇場 / スクリーン</dt>\r\n                    <dd>{{ purchase.getTheaterName() }} / {{ purchase.getScreenName() }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>作品名</dt>\r\n                    <dd>{{ purchase.getTitle() }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>鑑賞日時</dt>\r\n                    <dd>\r\n                        <div class=\"mb-xx-small\">\r\n                            <strong class=\"red-text\">\r\n                                {{ purchase.getAppreciationDate() }} {{ purchase.getStartDate() }} - {{\r\n                                purchase.getEndDate() }}\r\n                            </strong>\r\n                        </div>\r\n                        <p class=\"small-x-text red-text\">※鑑賞日時を必ずご確認ください。</p>\r\n                    </dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>座席</dt>\r\n                    <dd>\r\n                        <p *ngFor=\"let reservation of purchase.data.reservations\">\r\n                            {{ reservation.seat.seatNumber }} {{ reservation.ticket.ticketOffer.name.ja }} {{ reservation.getTicketPrice().total | currency : 'JPY' }}\r\n                        </p>\r\n                    </dd>\r\n                </dl>\r\n            </li>\r\n            <!-- <li *ngIf=\"user.isMember()\">\r\n                <dl>\r\n                    <dt>獲得ポイント</dt>\r\n                    <dd>\r\n                        <strong class=\"red-text\">0ポイント</strong>\r\n                    </dd>\r\n                </dl>\r\n            </li> -->\r\n        </ul>\r\n\r\n        <h2 class=\"section-ttl\">\r\n            購入情報\r\n            <div class=\"right\">\r\n                <div class=\"button light-gray-button change-button\">\r\n                    <a routerLink=\"/purchase/input\">変更</a>\r\n                </div>\r\n            </div>\r\n        </h2>\r\n        <ul class=\"box radius bg-light-gray mb-large\">\r\n            <li>\r\n                <dl>\r\n                    <dt>お名前（ひらがな）</dt>\r\n                    <dd>{{ purchase.data.customerContact?.familyName }} {{ purchase.data.customerContact?.givenName }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>メールアドレス</dt>\r\n                    <dd>{{ purchase.data.customerContact?.email }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>電話番号</dt>\r\n                    <dd>{{ (purchase.data.customerContact?.telephone | libphonenumberFormat) }}</dd>\r\n                </dl>\r\n            </li>\r\n\r\n            <li *ngIf=\"purchase.getTotalPrice() > 0\">\r\n                <dl>\r\n                    <dt>カード番号</dt>\r\n                    <dd *ngIf=\"purchase.data.gmoTokenObject !== undefined\">{{\r\n                        purchase.data.gmoTokenObject?.maskedCardNo }}</dd>\r\n                    <dd *ngIf=\"purchase.data.gmoTokenObject === undefined && user.data.creditCards !== undefined\">{{\r\n                        user.data.creditCards[0].cardNo }}</dd>\r\n                </dl>\r\n            </li>\r\n\r\n        </ul>\r\n\r\n        <h2 class=\"section-ttl\">注意事項(重要)</h2>\r\n        <p class=\"mb-small\">下記項目をご確認いただきチェックを入れて「購入完了」ボタンを押してください。</p>\r\n\r\n        <app-purchase-note class=\"mb-middle bg-light-gray\" [theaterCode]=\"purchase.data.screeningEvent?.superEvent.location.branchCode.slice(-2)\"></app-purchase-note>\r\n\r\n        <form [formGroup]=\"confirmForm\" (ngSubmit)=\"onSubmit()\">\r\n            <div class=\"mb-x-large text-center\">\r\n                <input type=\"checkbox\" formControlName=\"notes\" id=\"notes\">\r\n                <label for=\"notes\">\r\n                    <strong>上記内容に同意する</strong>\r\n                </label>\r\n                <div *ngIf=\"confirmForm.controls['notes'].invalid && (confirmForm.controls['notes'].dirty || confirmForm.controls['notes'].touched)\"\r\n                    class=\"validation-text\">利用規約に同意してください</div>\r\n            </div>\r\n            <app-buttons nextLabel=\"購入完了\" prevLabel=\"戻る\" prevLink=\"/purchase/input\"></app-buttons>\r\n        </form>\r\n    </div>\r\n    <app-site-seal></app-site-seal>\r\n</div>\r\n\r\n\r\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\nimport { UserService } from '../../../services/user/user.service';\r\n\r\n@Component({\r\n    selector: 'app-purchase-confirm',\r\n    templateUrl: './purchase-confirm.component.html',\r\n    styleUrls: ['./purchase-confirm.component.scss']\r\n})\r\nexport class PurchaseConfirmComponent implements OnInit {\r\n    public confirmForm: FormGroup;\r\n    public isLoading: boolean;\r\n    public disable: boolean;\r\n    public environment = environment;\r\n\r\n    constructor(\r\n        public purchase: PurchaseService,\r\n        public user: UserService,\r\n        private formBuilder: FormBuilder,\r\n        private router: Router,\r\n        private error: ErrorService\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        window.scrollTo(0, 0);\r\n        this.isLoading = false;\r\n        this.confirmForm = this.formBuilder.group({\r\n            notes: [false, [Validators.requiredTrue]]\r\n        });\r\n        this.disable = false;\r\n    }\r\n\r\n    public async onSubmit() {\r\n        if (this.disable) {\r\n            return;\r\n        }\r\n        if (this.confirmForm.invalid) {\r\n            this.confirmForm.controls.notes.markAsDirty();\r\n\r\n            return;\r\n        }\r\n        this.disable = true;\r\n        this.isLoading = true;\r\n        if (this.purchase.isExpired()) {\r\n            this.router.navigate(['expired']);\r\n\r\n            return;\r\n        }\r\n        if (this.purchase.getTotalPrice() > 0) {\r\n            try {\r\n                // クレジットカード処理\r\n                await this.purchase.creditCardPaymentProcess();\r\n            } catch (err) {\r\n                this.purchase.data.isCreditCardError = true;\r\n                this.router.navigate(['/purchase/input']);\r\n                return;\r\n            }\r\n        }\r\n        try {\r\n            // if (this.user.isMember() && this.purchase.isReservePoint()) {\r\n            //     // 会員かつポイント使用\r\n            //     await this.purchase.pointPaymentProcess();\r\n            // }\r\n            // if (this.user.isMember() && this.purchase.isIncentive()) {\r\n            //     // 会員かつポイント未使用\r\n            //     await this.purchase.incentiveProcess();\r\n            // }\r\n            await this.purchase.purchaseRegistrationProcess();\r\n            this.router.navigate(['/purchase/complete']);\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">購入者情報入力</h1>\r\n    <p class=\"read\">必須項目を入力し「次へ」ボタンを押してください。</p>\r\n\r\n    <form [formGroup]=\"inputForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"box radius bg-light-gray mb-middle\">\r\n            <h2 class=\"section-ttl mb-middle border-bottom\">購入者情報<span class=\"text-icon-red small-x-text\">入力必須</span></h2>\r\n            <h3 class=\"section-ttl\">お名前（ひらがな）</h3>\r\n            <div class=\"column-02 mb-middle\">\r\n                <dl>\r\n                    <dd>\r\n                        <input [class.validation]=\"inputForm.controls['familyName'].invalid && inputForm.controls['familyName'].touched\"\r\n                            type=\"text\" formControlName=\"familyName\" autocomplete=\"family-name\" placeholder=\"せい／例：しねま\">\r\n                        <div *ngIf=\"inputForm.controls['familyName'].invalid && inputForm.controls['familyName'].touched\">\r\n                            <div *ngIf=\"inputForm.controls['familyName'].errors.required\" class=\"validation-text\">せいが未入力です</div>\r\n                            <div *ngIf=\"inputForm.controls['familyName'].errors.maxlength\" class=\"validation-text\">せいは{{\r\n                                inputForm.controls['familyName'].errors.maxlength.requiredLength }}文字以下で入力してください</div>\r\n                            <div *ngIf=\"inputForm.controls['familyName'].errors.pattern\" class=\"validation-text\">せいは全角ひらがなで入力してください</div>\r\n                        </div>\r\n                    </dd>\r\n                </dl>\r\n                <dl>\r\n                    <dd>\r\n                        <input [class.validation]=\"inputForm.controls['givenName'].invalid && inputForm.controls['givenName'].touched\"\r\n                            type=\"text\" formControlName=\"givenName\" autocomplete=\"given-name\" placeholder=\"めい／例：たろう\">\r\n                        <div *ngIf=\"inputForm.controls['givenName'].invalid && inputForm.controls['givenName'].touched\">\r\n                            <div *ngIf=\"inputForm.controls['givenName'].errors.required\" class=\"validation-text\">めいが未入力です</div>\r\n                            <div *ngIf=\"inputForm.controls['givenName'].errors.maxlength\" class=\"validation-text\">めいは{{\r\n                                inputForm.controls['givenName'].errors.maxlength.requiredLength }}文字以下で入力してください</div>\r\n                            <div *ngIf=\"inputForm.controls['givenName'].errors.pattern\" class=\"validation-text\">めいは全角ひらがなで入力してください</div>\r\n                        </div>\r\n                    </dd>\r\n                </dl>\r\n            </div>\r\n            <h3 class=\"section-ttl\">メールアドレス</h3>\r\n            <dl>\r\n                <dd>\r\n                    <input [class.validation]=\"inputForm.controls['email'].invalid && inputForm.controls['email'].touched\"\r\n                        type=\"email\" formControlName=\"email\" autocomplete=\"email\" placeholder=\"例：cinema@toei.co.jp\">\r\n                    <div *ngIf=\"inputForm.controls['email'].invalid && inputForm.controls['email'].touched\">\r\n                        <div *ngIf=\"inputForm.controls['email'].errors.required\" class=\"validation-text\">メールアドレスが未入力です</div>\r\n                        <div *ngIf=\"inputForm.controls['email'].errors.maxlength\" class=\"validation-text\">メールアドレスは{{\r\n                            inputForm.controls['email'].errors.maxlength.requiredLength }}文字以下で入力してください</div>\r\n                        <div *ngIf=\"inputForm.controls['email'].errors.email\" class=\"validation-text\">メールアドレスが正しくありません</div>\r\n                    </div>\r\n                </dd>\r\n            </dl>\r\n            <dl class=\"mb-middle\">\r\n                <dt class=\"small-x-text\">確認のため再入力してください。</dt>\r\n                <dd>\r\n                    <input [class.validation]=\"inputForm.controls['emailConfirm'].invalid && inputForm.controls['emailConfirm'].touched\"\r\n                        type=\"email\" formControlName=\"emailConfirm\" placeholder=\"例：cinema@toei.co.jp\">\r\n                    <div *ngIf=\"inputForm.controls['emailConfirm'].invalid && inputForm.controls['emailConfirm'].touched\">\r\n                        <div *ngIf=\"inputForm.controls['emailConfirm'].errors.required\" class=\"validation-text\">メールアドレス確認が未入力です</div>\r\n                        <div *ngIf=\"inputForm.controls['emailConfirm'].errors.maxlength\" class=\"validation-text\">メールアドレス確認は{{\r\n                            inputForm.controls['emailConfirm'].errors.maxlength.requiredLength }}文字以下で入力してください</div>\r\n                        <div *ngIf=\"inputForm.controls['emailConfirm'].errors.email\" class=\"validation-text\">メールアドレス確認が正しくありません</div>\r\n                        <div *ngIf=\"inputForm.controls['emailConfirm'].errors.equals\" class=\"validation-text\">メールアドレス確認が一致しません</div>\r\n                    </div>\r\n                    <p class=\"small-x-text\">\r\n                        【ドメイン指定受信をご利用の場合について】\r\n                        <br>※ 携帯電話のドメイン指定受信をされている場合、「@toei.co.jp」を追加設定してください。\r\n                        <br>※ au(@ezweb.ne.jp)をご利用の場合、上記に加え「なりすまし規制回避リスト」にも「@toei.co.jp」の追加設定をしてください。\r\n                    </p>\r\n                </dd>\r\n            </dl>\r\n            <h3 class=\"section-ttl\">電話番号</h3>\r\n            <dl>\r\n                <dd>\r\n                    <input [class.validation]=\"inputForm.controls['telephone'].invalid && inputForm.controls['telephone'].touched\"\r\n                        type=\"tel\" formControlName=\"telephone\" autocomplete=\"tel\" placeholder=\"(例)08000000000\">\r\n                    <div *ngIf=\"inputForm.controls['telephone'].invalid && inputForm.controls['telephone'].touched\">\r\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.required\" class=\"validation-text\">電話番号が未入力です</div>\r\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.minlength\" class=\"validation-text\">電話番号は{{\r\n                            inputForm.controls['telephone'].errors.minlength.requiredLength }}文字以上で入力してください</div>\r\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.maxlength\" class=\"validation-text\">電話番号は{{\r\n                            inputForm.controls['telephone'].errors.maxlength.requiredLength }}文字以下で入力してください</div>\r\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.pattern\" class=\"validation-text\">電話番号は数字で入力してください</div>\r\n                        <div *ngIf=\"inputForm.controls['telephone'].errors.telephone\" class=\"validation-text\">電話番号が正しくありません</div>\r\n                    </div>\r\n                    <p class=\"small-x-text\">※半角数字、ハイフン「-」なしで入力してください</p>\r\n                </dd>\r\n            </dl>\r\n        </div>\r\n\r\n        <div *ngIf=\"purchase.getTotalPrice() > 0\">\r\n\r\n            <div *ngIf=\"creditCardType === 'input'\" class=\"credit-input mb-small\">\r\n                <ul class=\"box radius bg-light-gray mb-large credit form-layout\">\r\n                    <h2 class=\"section-ttl\">\r\n                        お支払情報\r\n                        <span class=\"text-icon-red small-x-text\">入力必須</span>\r\n                    </h2>\r\n                    <div class=\"credit-card-details mb-middle\">\r\n                        <p class=\"mb-small\">クレジットカード決済の必要事項を入力ください。</p>\r\n                        <span class=\"image credit-image\">\r\n                            <img src=\"/assets/images/common/credit_card.png\" alt=\"\">\r\n                        </span>\r\n                    </div>\r\n                    <li class=\"price\">\r\n                        <strong>ご利用金額<span class=\"large-text red-text\">￥{{ purchase.getTotalPrice() }}</span></strong>\r\n                    </li>\r\n                    <li>\r\n                        <dl>\r\n                            <dt>カード番号</dt>\r\n                            <dd>\r\n                                <input [class.validation]=\"inputForm.controls['cardNumber'].invalid && inputForm.controls['cardNumber'].touched\"\r\n                                    type=\"text\" pattern=\"\\d*\" formControlName=\"cardNumber\" id=\"cardNumber\" autocomplete=\"off\"\r\n                                    placeholder=\"(例)1234567890\" maxlength=\"16\">\r\n                                <div *ngIf=\"inputForm.controls['cardNumber'].invalid && inputForm.controls['cardNumber'].touched\">\r\n                                    <div *ngIf=\"inputForm.controls['cardNumber'].errors.required\" class=\"validation-text\">カード番号が未入力です</div>\r\n                                    <div *ngIf=\"inputForm.controls['cardNumber'].errors.pattern\" class=\"validation-text\">カード番号は数字で入力してください</div>\r\n                                </div>\r\n                                <p class=\"small-x-text\">※半角数字、ハイフン「-」なしで入力してください</p>\r\n                            </dd>\r\n                        </dl>\r\n                    </li>\r\n                    <li>\r\n                        <dl>\r\n                            <dt>有効期限</dt>\r\n                            <dd>\r\n\r\n                                <select formControlName=\"cardExpirationMonth\" id=\"cardExpirationMonth\">\r\n\r\n                                    <option *ngFor=\"let month of cardExpiration.month\" [value]=\"month\">{{ month }}</option>\r\n\r\n                                </select> 月\r\n                                <select formControlName=\"cardExpirationYear\" id=\"cardExpirationYear\">\r\n\r\n                                    <option *ngFor=\"let year of cardExpiration.year\" [value]=\"year\">{{ year }}</option>\r\n\r\n                                </select> 年\r\n\r\n                            </dd>\r\n                        </dl>\r\n                    </li>\r\n                    <li>\r\n                        <dl>\r\n                            <dt>セキュリティーコード</dt>\r\n                            <dd>\r\n                                <input [class.validation]=\"inputForm.controls['securityCode'].invalid && inputForm.controls['securityCode'].touched\"\r\n                                    type=\"text\" pattern=\"\\d*\" formControlName=\"securityCode\" autocomplete=\"off\"\r\n                                    placeholder=\"(例)123\" maxlength=\"4\">\r\n                                <div *ngIf=\"inputForm.controls['securityCode'].invalid && inputForm.controls['securityCode'].touched\">\r\n                                    <div *ngIf=\"inputForm.controls['securityCode'].errors.required\" class=\"validation-text\">セキュリティーコードが未入力です</div>\r\n                                </div>\r\n                                <p>\r\n                                    <a (click)=\"securityCodeModal = true\">セキュリティーコードについて</a>\r\n                                </p>\r\n                            </dd>\r\n                        </dl>\r\n                    </li>\r\n                    <li>\r\n                        <dl>\r\n                            <dt>カード名義人</dt>\r\n                            <dd>\r\n                                <input [class.validation]=\"inputForm.controls['holderName'].invalid && inputForm.controls['holderName'].touched\"\r\n                                    type=\"text\" formControlName=\"holderName\" autocomplete=\"off\" placeholder=\"(例)TARO CINEMA\">\r\n                                <div *ngIf=\"inputForm.controls['holderName'].invalid && inputForm.controls['holderName'].touched\">\r\n                                    <div *ngIf=\"inputForm.controls['holderName'].errors.required\" class=\"validation-text\">カード名義人が未入力です</div>\r\n                                </div>\r\n                            </dd>\r\n                        </dl>\r\n                    </li>\r\n                </ul>\r\n\r\n                <div *ngIf=\"user.isMember()\" class=\"text-center mb-middle\">\r\n                    <input type=\"checkbox\" formControlName=\"saveCreditCard\" id=\"saveCreditCard\">\r\n                    <label for=\"saveCreditCard\">\r\n                        <strong>クレジットカード情報を保存する</strong>\r\n                    </label>\r\n                </div>\r\n\r\n                <div *ngIf=\"user.isRegisteredCreditCards()\" class=\"button gray-button\">\r\n                    <button type=\"button\" (click)=\"changeRegisteredCreditCard()\">登録済みクレジットカードを使用する</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"creditCardType === 'registered'\" class=\"credit-registered mb-small\">\r\n                <ul class=\"box radius bg-light-gray mb-large credit form-layout\">\r\n                    <li class=\"price\">\r\n                        <dl>\r\n                            <dt>ご利用金額</dt>\r\n                            <dd class=\"large-text red-text\">\r\n                                <strong>￥{{ purchase.getTotalPrice() }}</strong>\r\n                            </dd>\r\n                        </dl>\r\n                    </li>\r\n                    <li>\r\n                        <dl>\r\n                            <dt>カード番号</dt>\r\n                            <dd>{{ user.data.creditCards[0]?.cardNo }}</dd>\r\n                        </dl>\r\n                    </li>\r\n                    <li>\r\n                        <dl>\r\n                            <dt>有効期限</dt>\r\n                            <dd>{{ user.data.creditCards[0]?.expire }}</dd>\r\n                        </dl>\r\n                    </li>\r\n                    <li>\r\n                        <dl>\r\n                            <dt>カード名義人</dt>\r\n                            <dd>{{ user.data.creditCards[0]?.holderName }}</dd>\r\n                        </dl>\r\n                    </li>\r\n                </ul>\r\n                <input type=\"hidden\" formControlName=\"cardNumber\">\r\n                <input type=\"hidden\" formControlName=\"cardExpirationMonth\">\r\n                <input type=\"hidden\" formControlName=\"cardExpirationYear\">\r\n                <input type=\"hidden\" formControlName=\"securityCode\">\r\n                <input type=\"hidden\" formControlName=\"holderName\">\r\n                <div class=\"button gray-button\" (click)=\"changeInputCreditCard()\">\r\n                    <button type=\"button\">クレジットカードを変更する</button>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div class=\"mb-x-small\">\r\n                    <strong>ご注意事項</strong>\r\n                </div>\r\n                <p class=\"small-x-text\">\r\n                    購入完了画面まで進まずにお取引を中断された場合でもご利用のカードによっては下記の事象が起こることがございますので、悪しからずご了承ください。\r\n                    <br>一部のクレジットカード会社からはカード利用速報のメールが配信される。\r\n                    <br> ⇒カード利用速報メールが配信されましても購入完了していなければ引き落とされることはありませんので、カード会社の月々の確定利用明細などをご確認ください。\r\n                    <br>プリペイド形式（デビットカード、LINEPayカード等）で一時的に残高が減る。\r\n                    <br> ⇒購入完了していない場合は後ほど残高が戻ります。残高が戻るまでの期間は各カード会社様によって異なります。\r\n                </p>\r\n            </div>\r\n        </div>\r\n\r\n        <app-buttons nextLabel=\"次へ\" prevLabel=\"戻る\" prevLink=\"/purchase/ticket\"></app-buttons>\r\n    </form>\r\n    <app-site-seal></app-site-seal>\r\n</div>\r\n\r\n<app-loading [show]=\"isLoading\"></app-loading>\r\n\r\n<app-modal class=\"security-code-modal\" [open]=\"securityCodeModal\" [layout]=\"false\" (close)=\"securityCodeModal = false\">\r\n    <div inner class=\"box radius bg-white\">\r\n        <div class=\"modal-title mb-xx-small text-center\">セキュリティーコードについて</div>\r\n        <p class=\"mb-middle small-x-text text-center\">※カード会社により表示箇所および名称が異なります。</p>\r\n        <div class=\"box radius bg-light-gray\">\r\n            <dl class=\"mb-middle\">\r\n                <dt>\r\n                    <strong>VISA / MASTER / DINERS / JCBの場合</strong>\r\n                </dt>\r\n                <dd>【カード裏面】セキュリティーコード(末尾3桁)</dd>\r\n                <dd>\r\n                    <img src=\"/assets/images/common/credit_back.svg\" alt=\"\">\r\n                </dd>\r\n            </dl>\r\n            <dl>\r\n                <dt>\r\n                    <strong>AMEXの場合</strong>\r\n                </dt>\r\n                <dd>【カード表面】セキュリティーコード(4桁)</dd>\r\n                <dd>\r\n                    <img src=\"/assets/images/common/credit_front.svg\" alt=\"\">\r\n                </dd>\r\n            </dl>\r\n        </div>\r\n    </div>\r\n</app-modal>\r\n\r\n<app-modal [open]=\"creditCardAlertModal\" [layout]=\"true\" (close)=\"creditCardAlertModal = false\">\r\n    <div class=\"modal-title large-text text-center mb-middle\">\r\n        <strong>エラーが発生しました</strong>\r\n    </div>\r\n</app-modal>","import { Component, ElementRef, OnInit } from '@angular/core';\r\nimport { AbstractControl, FormBuilder, FormGroup, ValidationErrors, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { factory } from '@toei-jp/cinerino-api-javascript-client';\r\nimport * as libphonenumber from 'libphonenumber-js';\r\nimport * as moment from 'moment';\r\nimport { LibphonenumberFormatPipe } from '../../../pipes/libphonenumber-format/libphonenumber-format.pipe';\r\nimport { AwsCognitoService } from '../../../services/aws-cognito/aws-cognito.service';\r\nimport { CinerinoService } from '../../../services/cinerino/cinerino.service';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { IGmoTokenObject, PurchaseService } from '../../../services/purchase/purchase.service';\r\nimport { UserService } from '../../../services/user/user.service';\r\nimport { UtilService } from '../../../services/util/util.service';\r\n\r\n/**\r\n * クレジットカードタイプ\r\n */\r\nenum CreditCardType {\r\n    Input = 'input',\r\n    Registered = 'registered'\r\n}\r\n\r\n@Component({\r\n    selector: 'app-purchase-input',\r\n    templateUrl: './purchase-input.component.html',\r\n    styleUrls: ['./purchase-input.component.scss']\r\n})\r\nexport class PurchaseInputComponent implements OnInit {\r\n    public cardExpiration: {\r\n        year: string[];\r\n        month: string[];\r\n    };\r\n    public inputForm: FormGroup;\r\n    public isLoading: boolean;\r\n    public securityCodeModal: boolean;\r\n    public creditCardAlertModal: boolean;\r\n    public disable: boolean;\r\n    public creditCardType: CreditCardType;\r\n\r\n    constructor(\r\n        public purchase: PurchaseService,\r\n        public user: UserService,\r\n        private elementRef: ElementRef,\r\n        private formBuilder: FormBuilder,\r\n        private router: Router,\r\n        private error: ErrorService,\r\n        private awsCognito: AwsCognitoService,\r\n        private cinerino: CinerinoService,\r\n        private utill: UtilService\r\n\r\n    ) { }\r\n\r\n    public async ngOnInit() {\r\n        window.scrollTo(0, 0);\r\n        this.isLoading = false;\r\n        this.cardExpiration = {\r\n            year: [],\r\n            month: []\r\n        };\r\n        this.inputForm = this.createForm();\r\n        this.disable = false;\r\n        this.creditCardType = CreditCardType.Input;\r\n        this.creditCardAlertModal = this.purchase.data.isCreditCardError;\r\n        if (this.purchase.data.isCreditCardError) {\r\n            // クレジットカードエラー\r\n            this.purchase.data.isCreditCardError = false;\r\n            this.inputForm.controls.cardNumber.markAsTouched();\r\n            this.inputForm.controls.cardExpirationMonth.markAsTouched();\r\n            this.inputForm.controls.cardExpirationYear.markAsTouched();\r\n            this.inputForm.controls.securityCode.markAsTouched();\r\n            this.inputForm.controls.holderName.markAsTouched();\r\n            this.validationScroll();\r\n        }\r\n        this.securityCodeModal = false;\r\n        try {\r\n            if (this.user.isNative() && !this.user.isMember()) {\r\n                // アプリ非会員ならCognitoから取得\r\n                const records = await this.awsCognito.getRecords({\r\n                    datasetName: 'profile'\r\n                });\r\n                if (records.familyName !== undefined\r\n                    || records.givenName !== undefined\r\n                    || records.email !== undefined\r\n                    || records.emailConfirm !== undefined\r\n                    || records.telephone !== undefined) {\r\n                    this.inputForm.controls.familyName.setValue(records.familyName);\r\n                    this.inputForm.controls.givenName.setValue(records.givenName);\r\n                    this.inputForm.controls.email.setValue(records.email);\r\n                    this.inputForm.controls.emailConfirm.setValue(records.email);\r\n                    this.inputForm.controls.telephone.setValue(records.telephone);\r\n                }\r\n            } else if (this.user.isMember()) {\r\n                // 会員\r\n                if (this.user.data.contact === undefined) {\r\n                    throw new Error('contact is undefined');\r\n                }\r\n                const contacts = this.user.data.contact;\r\n\r\n                if (this.user.data.creditCards === undefined\r\n                    || this.user.data.creditCards.length === 0) {\r\n                    throw new Error('creditCards is notfoud');\r\n                }\r\n\r\n                this.inputForm.controls.familyName.setValue(this.utill.convertToHira(contacts.familyName));\r\n                this.inputForm.controls.givenName.setValue(this.utill.convertToHira(contacts.givenName));\r\n                this.inputForm.controls.email.setValue(contacts.email);\r\n                this.inputForm.controls.emailConfirm.setValue(contacts.email);\r\n                this.inputForm.controls.telephone.setValue(contacts.telephone.replace(/-/g, ''));\r\n\r\n                const payment = this.purchase.getTotalPrice();\r\n                if (payment > 0) {\r\n                    // クレジット決済ありならクレジットカードタイプを変更\r\n                    this.changeRegisteredCreditCard();\r\n                }\r\n            }\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * バリデーションスクロール\r\n     * @method validationScroll\r\n     */\r\n    private validationScroll() {\r\n        setTimeout(() => {\r\n            const element: HTMLElement = this.elementRef.nativeElement;\r\n            const validation = <HTMLElement>element.querySelector('.validation');\r\n            if (validation === null) {\r\n                return;\r\n            }\r\n            const rect = validation.getBoundingClientRect();\r\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n            const top = rect.top + scrollTop - 50;\r\n            window.scrollTo(undefined, top);\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * 次へ\r\n     * @method onSubmit\r\n     */\r\n    public async onSubmit() {\r\n        if (this.disable) {\r\n            return;\r\n        }\r\n\r\n        if (this.inputForm.invalid) {\r\n            // フォームのステータス変更\r\n            this.inputForm.controls.familyName.markAsTouched();\r\n            this.inputForm.controls.givenName.markAsTouched();\r\n            this.inputForm.controls.email.markAsTouched();\r\n            this.inputForm.controls.emailConfirm.markAsTouched();\r\n            this.inputForm.controls.telephone.markAsTouched();\r\n            if (this.purchase.getTotalPrice() > 0) {\r\n                this.inputForm.controls.cardNumber.markAsTouched();\r\n                this.inputForm.controls.cardExpirationMonth.markAsTouched();\r\n                this.inputForm.controls.cardExpirationYear.markAsTouched();\r\n                this.inputForm.controls.securityCode.markAsTouched();\r\n                this.inputForm.controls.holderName.markAsTouched();\r\n            }\r\n            this.validationScroll();\r\n\r\n            return;\r\n        }\r\n        if (this.purchase.isExpired()) {\r\n            this.router.navigate(['expired']);\r\n\r\n            return;\r\n        }\r\n        this.disable = true;\r\n        this.isLoading = true;\r\n        if (this.purchase.isExpired()) {\r\n            this.router.navigate(['expired']);\r\n\r\n            return;\r\n        }\r\n        try {\r\n            if (this.purchase.data.transaction === undefined) {\r\n                throw new Error('status is different');\r\n            }\r\n            if (this.purchase.getTotalPrice() > 0) {\r\n                try {\r\n                    if (this.creditCardType === CreditCardType.Input) {\r\n                        this.purchase.data.gmoTokenObject = await this.getGmoObject();\r\n                        this.purchase.data.paymentCreditCard = {\r\n                            token: (<IGmoTokenObject>this.purchase.data.gmoTokenObject).token\r\n                        };\r\n                    } else {\r\n                        if (this.user.data.creditCards === undefined) {\r\n                            throw new Error('creditCards is undefined');\r\n                        }\r\n                        this.purchase.data.paymentCreditCard = {\r\n                            memberId: 'me',\r\n                            cardSeq: Number(this.user.data.creditCards[0].cardSeq)\r\n                        };\r\n                    }\r\n                } catch (err) {\r\n                    console.error(err);\r\n                    // クレジットカード処理失敗\r\n                    this.isLoading = false;\r\n                    this.creditCardAlertModal = true;\r\n                    if (this.creditCardType === CreditCardType.Input) {\r\n                        this.inputForm.controls.cardNumber.setValue('');\r\n                        this.inputForm.controls.securityCode.setValue('');\r\n                        this.inputForm.controls.holderName.setValue('');\r\n                    }\r\n                    this.disable = false;\r\n\r\n                    return;\r\n                }\r\n                if (this.user.isMember()\r\n                    && this.inputForm.controls.saveCreditCard.value\r\n                    && this.purchase.data.gmoTokenObject !== undefined) {\r\n                    // 会員 クレジットカード情報保存\r\n                    await this.cinerino.getServices();\r\n                    const gmoTokenObject = await this.getGmoObject();\r\n                    const addCreditCardArgs = {\r\n                        personId: 'me',\r\n                        creditCard: {\r\n                            token: gmoTokenObject.token\r\n                        }\r\n                    };\r\n                    await this.cinerino.personOwnershipInfo.addCreditCard(addCreditCardArgs);\r\n                }\r\n            }\r\n\r\n            const phoneNumber = libphonenumber.parse(this.inputForm.controls.telephone.value, 'JP');\r\n            // 入力情報を登録\r\n            const contact = {\r\n                familyName: this.inputForm.controls.familyName.value,\r\n                givenName: this.inputForm.controls.givenName.value,\r\n                email: this.inputForm.controls.email.value,\r\n                telephone: libphonenumber.formatNumber(phoneNumber, 'E.164')\r\n            };\r\n            await this.purchase.customerContactRegistrationProcess(contact);\r\n            this.router.navigate(['/purchase/confirm']);\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * GMOトークン取得\r\n     * @method getGmoToken\r\n     */\r\n    private async getGmoObject(): Promise<IGmoTokenObject> {\r\n        const sendParam = {\r\n            cardno: this.inputForm.controls.cardNumber.value,\r\n            expire: this.inputForm.controls.cardExpirationYear.value + this.inputForm.controls.cardExpirationMonth.value,\r\n            securitycode: this.inputForm.controls.securityCode.value,\r\n            holdername: this.inputForm.controls.holderName.value\r\n        };\r\n        // console.log(sendParam);\r\n        return new Promise<IGmoTokenObject>((resolve, reject) => {\r\n            if (\r\n                this.purchase.data.movieTheaterOrganization === undefined ||\r\n                this.purchase.data.movieTheaterOrganization.paymentAccepted === undefined\r\n            ) {\r\n                return reject(new Error('status is different'));\r\n            }\r\n            (<any>window).someCallbackFunction = function someCallbackFunction(response: any) {\r\n                if (response.resultCode === '000') {\r\n                    resolve(response.tokenObject);\r\n                } else {\r\n                    reject(new Error(response.resultCode));\r\n                }\r\n            };\r\n            const creditCardPayment = this.purchase.data.movieTheaterOrganization.paymentAccepted.find((payment) => {\r\n                return payment.paymentMethodType === factory.paymentMethodType.CreditCard;\r\n            });\r\n            if (creditCardPayment === undefined) {\r\n                return reject(new Error('status is different'));\r\n            }\r\n            const { shopId } = (<factory.organization.IPaymentAccepted<factory.paymentMethodType.CreditCard>>creditCardPayment).gmoInfo;\r\n            const Multipayment = (<any>window).Multipayment;\r\n            Multipayment.init(shopId);\r\n            Multipayment.getToken(sendParam, (<any>window).someCallbackFunction);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * フォーム作成\r\n     * @method createForm\r\n     */\r\n    private createForm() {\r\n        const payment = this.purchase.getTotalPrice();\r\n        const NAME_MAX_LENGTH = 12;\r\n        const MAIL_MAX_LENGTH = 50;\r\n        const TEL_MAX_LENGTH = 11;\r\n        const TEL_MIN_LENGTH = 9;\r\n        const customerContact = {\r\n            familyName: {\r\n                value: '',\r\n                validators: [\r\n                    Validators.required,\r\n                    Validators.maxLength(NAME_MAX_LENGTH),\r\n                    Validators.pattern(/^[ぁ-ゞー]+$/)\r\n                ]\r\n            },\r\n            givenName: {\r\n                value: '',\r\n                validators: [\r\n                    Validators.required,\r\n                    Validators.maxLength(NAME_MAX_LENGTH),\r\n                    Validators.pattern(/^[ぁ-ゞー]+$/)\r\n                ]\r\n            },\r\n            email: {\r\n                value: '', validators: [\r\n                    Validators.required,\r\n                    Validators.maxLength(MAIL_MAX_LENGTH),\r\n                    Validators.email\r\n                ]\r\n            },\r\n            emailConfirm: {\r\n                value: '', validators: [\r\n                    Validators.required,\r\n                    Validators.maxLength(MAIL_MAX_LENGTH),\r\n                    Validators.email,\r\n                    (control: AbstractControl): ValidationErrors | null => {\r\n                        const field = control.root.get('email');\r\n                        if (field !== null) {\r\n                            if (control.value !== field.value) {\r\n                                return { equals: true };\r\n                            }\r\n                        }\r\n\r\n                        return null;\r\n                    }\r\n                ]\r\n            },\r\n            telephone: {\r\n                value: '', validators: [\r\n                    Validators.required,\r\n                    Validators.maxLength(TEL_MAX_LENGTH),\r\n                    Validators.minLength(TEL_MIN_LENGTH),\r\n                    Validators.pattern(/^[0-9]+$/),\r\n                    (control: AbstractControl): ValidationErrors | null => {\r\n                        const field = control.root.get('telephone');\r\n                        if (field !== null) {\r\n                            const parsedNumber = libphonenumber.parse(field.value, 'JP');\r\n                            if (parsedNumber.phone === undefined) {\r\n                                return { telephone: true };\r\n                            }\r\n                            const isValid = libphonenumber.isValidNumber(parsedNumber);\r\n                            if (!isValid) {\r\n                                return { telephone: true };\r\n                            }\r\n                        }\r\n\r\n                        return null;\r\n                    }\r\n                ]\r\n            },\r\n            cardNumber: { value: '', validators: [Validators.required, Validators.pattern(/^[0-9]+$/)] },\r\n            cardExpirationMonth: { value: '01', validators: [Validators.required] },\r\n            cardExpirationYear: { value: moment().format('YYYY'), validators: [Validators.required] },\r\n            securityCode: { value: '', validators: [Validators.required] },\r\n            holderName: { value: '', validators: [Validators.required] }\r\n        };\r\n\r\n        if (this.purchase.data.customerContact !== undefined) {\r\n            // 購入者情報入力済み\r\n            customerContact.familyName.value = this.purchase.data.customerContact.familyName;\r\n            customerContact.givenName.value = this.purchase.data.customerContact.givenName;\r\n            customerContact.email.value = this.purchase.data.customerContact.email;\r\n            customerContact.emailConfirm.value = this.purchase.data.customerContact.email;\r\n            customerContact.telephone.value =\r\n                new LibphonenumberFormatPipe().transform(this.purchase.data.customerContact.telephone);\r\n        }\r\n        if (payment > 0) {\r\n            // 決済あり\r\n            for (let i = 0; i < 12; i++) {\r\n                const DIGITS = -2;\r\n                this.cardExpiration.month.push(`0${String(i + 1)}`.slice(DIGITS));\r\n            }\r\n            for (let i = 0; i < 10; i++) {\r\n                this.cardExpiration.year.push(moment().add(i, 'year').format('YYYY'));\r\n            }\r\n\r\n            if (this.user.isMember()) {\r\n                // 会員\r\n                return this.formBuilder.group({\r\n                    familyName: [customerContact.familyName.value, customerContact.familyName.validators],\r\n                    givenName: [customerContact.givenName.value, customerContact.givenName.validators],\r\n                    email: [customerContact.email.value, customerContact.email.validators],\r\n                    emailConfirm: [customerContact.emailConfirm.value, customerContact.emailConfirm.validators],\r\n                    telephone: [customerContact.telephone.value, customerContact.telephone.validators],\r\n                    cardNumber: [customerContact.cardNumber.value, customerContact.cardNumber.validators],\r\n                    cardExpirationMonth: [customerContact.cardExpirationMonth.value, customerContact.cardExpirationMonth.validators],\r\n                    cardExpirationYear: [customerContact.cardExpirationYear.value, customerContact.cardExpirationYear.validators],\r\n                    securityCode: [customerContact.securityCode.value, customerContact.securityCode.validators],\r\n                    holderName: [customerContact.holderName.value, customerContact.holderName.validators],\r\n                    saveCreditCard: [false]\r\n                });\r\n            } else {\r\n                // 非会員\r\n                return this.formBuilder.group({\r\n                    familyName: [customerContact.familyName.value, customerContact.familyName.validators],\r\n                    givenName: [customerContact.givenName.value, customerContact.givenName.validators],\r\n                    email: [customerContact.email.value, customerContact.email.validators],\r\n                    emailConfirm: [customerContact.emailConfirm.value, customerContact.emailConfirm.validators],\r\n                    telephone: [customerContact.telephone.value, customerContact.telephone.validators],\r\n                    cardNumber: [customerContact.cardNumber.value, customerContact.cardNumber.validators],\r\n                    cardExpirationMonth: [customerContact.cardExpirationMonth.value, customerContact.cardExpirationMonth.validators],\r\n                    cardExpirationYear: [customerContact.cardExpirationYear.value, customerContact.cardExpirationYear.validators],\r\n                    securityCode: [customerContact.securityCode.value, customerContact.securityCode.validators],\r\n                    holderName: [customerContact.holderName.value, customerContact.holderName.validators]\r\n                });\r\n            }\r\n\r\n        } else {\r\n            // 決済なし\r\n            return this.formBuilder.group({\r\n                familyName: [customerContact.familyName.value, customerContact.familyName.validators],\r\n                givenName: [customerContact.givenName.value, customerContact.givenName.validators],\r\n                email: [customerContact.email.value, customerContact.email.validators],\r\n                emailConfirm: [customerContact.emailConfirm.value, customerContact.emailConfirm.validators],\r\n                telephone: [customerContact.telephone.value, customerContact.telephone.validators]\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * クレジットカード情報入力へ変更\r\n     */\r\n    public changeInputCreditCard() {\r\n        this.creditCardType = CreditCardType.Input;\r\n        this.inputForm.controls.cardNumber.setValue('');\r\n        this.inputForm.controls.cardExpirationMonth.setValue('01');\r\n        this.inputForm.controls.cardExpirationYear.setValue(moment().format('YYYY'));\r\n        this.inputForm.controls.securityCode.setValue('');\r\n        this.inputForm.controls.holderName.setValue('');\r\n    }\r\n\r\n    /**\r\n     * 登録済みクレジットカードへ変更\r\n     */\r\n    public changeRegisteredCreditCard() {\r\n        this.creditCardType = CreditCardType.Registered;\r\n        this.inputForm.controls.cardNumber.setValue('4111111111111111');\r\n        this.inputForm.controls.cardExpirationMonth.setValue('01');\r\n        this.inputForm.controls.cardExpirationYear.setValue(moment().format('YYYY'));\r\n        this.inputForm.controls.securityCode.setValue('123');\r\n        this.inputForm.controls.holderName.setValue('TEST');\r\n    }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">ムビチケ券適用内容確認</h1>\r\n    <p class=\"read\">内容に問題なければ「券種選択へ戻る」ボタンを押してください。\r\n        <br>\r\n        <span class=\"small-text\">※券種選択よりムビチケ券を選択してください。</span>\r\n    </p>\r\n    <ul class=\"box radius bg-light-gray mb-middle mvtk-lists\">\r\n\r\n        <li *ngFor=\"let mvtkTicket of movieTickets\">\r\n            <dl class=\"d-table\">\r\n                <dt class=\"d-td\">ムビチケ購入番号 {{ mvtkTicket.identifier }}</dt>\r\n                <dd class=\"d-td width-medium\">\r\n                    <strong>{{ mvtkTicket.name }} × {{ mvtkTicket.num }}</strong>\r\n                </dd>\r\n            </dl>\r\n        </li>\r\n\r\n    </ul>\r\n\r\n\r\n    <form (ngSubmit)=\"onSubmit()\">\r\n        <app-buttons nextLabel=\"券種選択へ戻る\" prevLabel=\"戻る\" prevLink=\"/purchase/mvtk/input\"></app-buttons>\r\n    </form>\r\n    <app-site-seal></app-site-seal>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { factory } from '@toei-jp/cinerino-api-javascript-client';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\n\r\ntype IMovieTicketTypeChargeSpecification =\r\n    factory.chevre.priceSpecification.IPriceSpecification<factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification>;\r\n\r\n@Component({\r\n    selector: 'app-purchase-mvtk-confirm',\r\n    templateUrl: './purchase-mvtk-confirm.component.html',\r\n    styleUrls: ['./purchase-mvtk-confirm.component.scss']\r\n})\r\nexport class PurchaseMvtkConfirmComponent implements OnInit {\r\n    public movieTickets: {\r\n        identifier: string;\r\n        num: string;\r\n        name: string;\r\n    }[];\r\n    constructor(\r\n        public purchase: PurchaseService,\r\n        private router: Router,\r\n        private error: ErrorService\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        window.scrollTo(0, 0);\r\n        if (this.purchase.data.mvtkTickets.length === 0) {\r\n            this.error.redirect(new Error('status is different'));\r\n        }\r\n        this.movieTickets = [];\r\n        const checkMovieTicketActions = this.purchase.data.mvtkTickets;\r\n        checkMovieTicketActions.forEach((checkMovieTicketAction) => {\r\n            if (checkMovieTicketAction.result === undefined) {\r\n                return;\r\n            }\r\n            if (checkMovieTicketAction.result.purchaseNumberAuthResult.knyknrNoInfoOut === null) {\r\n                return;\r\n            }\r\n            checkMovieTicketAction.result.purchaseNumberAuthResult.knyknrNoInfoOut.forEach((knyknrNoInfoOut) => {\r\n                if (knyknrNoInfoOut.ykknInfo === null) {\r\n                    return;\r\n                }\r\n                knyknrNoInfoOut.ykknInfo.forEach((ykknInfo) => {\r\n                    this.movieTickets.push({\r\n                        identifier: knyknrNoInfoOut.knyknrNo,\r\n                        num: ykknInfo.ykknKnshbtsmiNum,\r\n                        name: this.getTicketName(ykknInfo.ykknshTyp)\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    public getTicketName(serviceType: string) {\r\n        const findTicketResult = this.purchase.data.salesTickets.find((salesTicket) => {\r\n            const MovieTicketTypeChargeSpecification =\r\n                <IMovieTicketTypeChargeSpecification>salesTicket.priceSpecification.priceComponent\r\n                    .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification)\r\n                    .shift();\r\n            return (MovieTicketTypeChargeSpecification !== undefined\r\n                && MovieTicketTypeChargeSpecification.appliesToMovieTicketType === serviceType);\r\n        });\r\n\r\n        if (findTicketResult === undefined) {\r\n            return '';\r\n        }\r\n        return findTicketResult.name.ja;\r\n    }\r\n\r\n    public onSubmit() {\r\n        this.router.navigate(['/purchase/ticket']);\r\n    }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">ムビチケ券認証</h1>\r\n    <p class=\"read\">ご利用になるムビチケ券の購入番号と、暗証番号を入力してください。\r\n        <br>複数枚ご利用になる場合は「ムビチケ券を追加」ボタンを押して追加してください。</p>\r\n\r\n    <div *ngFor=\"let mvtkForm of mvtkForms; let index = index\" class=\"ticket-list mb-middle\">\r\n        <form [formGroup]=\"mvtkForm\">\r\n            <div class=\"mvtk-box\">\r\n                <div *ngIf=\"mvtkForms.length > 1\" class=\"button light-gray-button remove-button\">\r\n                    <a (click)=\"removeMvtk(index)\">削除</a>\r\n                </div>\r\n                <ul class=\"box radius bg-light-gray mb-small form-layout\">\r\n                    <li>\r\n                        <dl>\r\n                            <dt>ムビチケ購入番号</dt>\r\n                            <dd>\r\n                                <input class=\"mvtk-code\" [class.validation]=\"mvtkForm.controls['code'].invalid && mvtkForm.controls['code'].touched\" type=\"text\" formControlName=\"code\"\r\n                                    autocomplete=\"off\" placeholder=\"(例)012345789\" maxlength=\"10\">\r\n                                <div *ngIf=\"mvtkForm.controls['code'].invalid && mvtkForm.controls['code'].touched\">\r\n                                    <div *ngIf=\"mvtkForm.controls['code'].errors.required\" class=\"validation-text\">ムビチケ購入番号が未入力です</div>\r\n                                    <div *ngIf=\"mvtkForm.controls['code'].errors.maxlength\" class=\"validation-text\">ムビチケ購入番号は{{ mvtkForm.controls['code'].errors.maxlength.requiredLength }}文字で入力してください</div>\r\n                                    <div *ngIf=\"mvtkForm.controls['code'].errors.minlength\" class=\"validation-text\">ムビチケ購入番号は{{ mvtkForm.controls['code'].errors.minlength.requiredLength }}文字で入力してください</div>\r\n                                    <div *ngIf=\"mvtkForm.controls['code'].errors.pattern\" class=\"validation-text\">ムビチケ購入番号は数字で入力してください</div>\r\n                                </div>\r\n                            </dd>\r\n                        </dl>\r\n                    </li>\r\n                    <li>\r\n                        <dl>\r\n                            <dt>ムビチケ暗証番号</dt>\r\n                            <dd>\r\n                                <input [class.validation]=\"mvtkForm.controls['password'].invalid && mvtkForm.controls['password'].touched\" type=\"password\"\r\n                                    formControlName=\"password\" autocomplete=\"off\" placeholder=\"(例)0123\" maxlength=\"4\">\r\n                                <div *ngIf=\"mvtkForm.controls['password'].invalid && mvtkForm.controls['password'].touched\">\r\n                                    <div *ngIf=\"mvtkForm.controls['password'].errors.required\" class=\"validation-text\">ムビチケ暗証番号が未入力です</div>\r\n                                    <div *ngIf=\"mvtkForm.controls['password'].errors.maxlength\" class=\"validation-text\">ムビチケ暗証番号は{{ mvtkForm.controls['password'].errors.maxlength.requiredLength }}文字で入力してください</div>\r\n                                    <div *ngIf=\"mvtkForm.controls['password'].errors.minlength\" class=\"validation-text\">ムビチケ暗証番号は{{ mvtkForm.controls['password'].errors.minlength.requiredLength }}文字で入力してください</div>\r\n                                    <div *ngIf=\"mvtkForm.controls['password'].errors.pattern\" class=\"validation-text\">ムビチケ暗証番号は数字で入力してください</div>\r\n                                </div>\r\n                            </dd>\r\n                        </dl>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </form>\r\n    </div>\r\n\r\n    <div *ngIf=\"purchase.data.reservations.length > mvtkForms.length\" class=\"button dark-blue-button add-button mb-middle center-button\">\r\n        <a class=\"icon-add-white\" (click)=\"addMvtk()\">ムビチケ券を追加</a>\r\n    </div>\r\n\r\n    <div class=\"box radius bg-light-gray mb-small\">\r\n        <div class=\"box-ttl\">選択中の座席</div>\r\n        <div class=\"text-right large-text\">\r\n            <strong>{{ purchase.data.reservations.length }}席</strong>\r\n        </div>\r\n    </div>\r\n\r\n    <p class=\"small-x-text\">※不足金額が発生した場合は別途クレジットカードにてお支払いいただきます。</p>\r\n\r\n    <form (ngSubmit)=\"onSubmit()\">\r\n        <app-buttons nextLabel=\"認証する\" prevLabel=\"戻る\" prevLink=\"/purchase/ticket\"></app-buttons>\r\n    </form>\r\n    <app-site-seal></app-site-seal>\r\n</div>\r\n\r\n<app-modal [open]=\"inputValidationModal\" [layout]=\"true\" (close)=\"inputValidationModal = false\">\r\n    <div class=\"modal-title large-text text-center mb-middle\">\r\n        <strong>入力項目にエラーがあります</strong>\r\n    </div>\r\n    <p class=\"text-center\">入力項目をご確認ください。</p>\r\n</app-modal>\r\n\r\n<app-modal [open]=\"authErrorModal\" [layout]=\"true\" (close)=\"authErrorModal = false\">\r\n    <div class=\"modal-title large-text text-center mb-middle\">\r\n        <strong>認証に失敗しました</strong>\r\n    </div>\r\n    <p class=\"text-center\">購入番号と暗証番号、もしくはムビチケ券の対象作品を再度ご確認ください。</p>\r\n</app-modal>\r\n\r\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\n\r\n@Component({\r\n    selector: 'app-purchase-mvtk-input',\r\n    templateUrl: './purchase-mvtk-input.component.html',\r\n    styleUrls: ['./purchase-mvtk-input.component.scss']\r\n})\r\nexport class PurchaseMvtkInputComponent implements OnInit {\r\n    public mvtkForms: FormGroup[];\r\n    public mvtkInputForm: FormGroup;\r\n    public inputValidationModal: boolean;\r\n    public authErrorModal: boolean;\r\n    public isLoading: boolean;\r\n    public disable: boolean;\r\n\r\n    constructor(\r\n        public purchase: PurchaseService,\r\n        private formBuilder: FormBuilder,\r\n        private router: Router\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        window.scrollTo(0, 0);\r\n        this.isLoading = false;\r\n        this.inputValidationModal = false;\r\n        this.authErrorModal = false;\r\n        this.mvtkForms = [];\r\n        this.mvtkForms.push(this.createForm());\r\n        this.mvtkInputForm = this.formBuilder.group({});\r\n        this.disable = false;\r\n    }\r\n\r\n    /**\r\n     * フォーム作成\r\n     * @method createForm\r\n     */\r\n    private createForm() {\r\n        const CODE_LENGTH = 10;\r\n        const PASSWORD_LENGTH = 4;\r\n        return this.formBuilder.group({\r\n            code: ['', [\r\n                Validators.required,\r\n                Validators.maxLength(CODE_LENGTH),\r\n                Validators.minLength(CODE_LENGTH),\r\n                Validators.pattern(/^[0-9]+$/)\r\n            ]],\r\n            password: ['', [\r\n                Validators.required,\r\n                Validators.maxLength(PASSWORD_LENGTH),\r\n                Validators.minLength(PASSWORD_LENGTH),\r\n                Validators.pattern(/^[0-9]+$/)\r\n            ]]\r\n        });\r\n    }\r\n\r\n    /**\r\n     * ムビチケ券追加\r\n     * @method addMvtk\r\n     */\r\n    public addMvtk() {\r\n        this.mvtkForms.push(this.createForm());\r\n    }\r\n\r\n    /**\r\n     * ムビチケ券削除\r\n     * @method removeMvtk\r\n     */\r\n    public removeMvtk(index: number) {\r\n        this.mvtkForms.splice(index, 1);\r\n    }\r\n\r\n    /**\r\n     * ムビチケ認証\r\n     */\r\n    public async onSubmit() {\r\n        this.mvtkForms.forEach((mvtkForm, index) => {\r\n            const mvtkCodeList = document.querySelectorAll('.mvtk-code');\r\n            const value = (<HTMLInputElement>mvtkCodeList[index]).value;\r\n            mvtkForm.controls.code.setValue(value);\r\n        });\r\n        const mvtkForms = this.mvtkForms.filter((group) => {\r\n            return (!group.invalid);\r\n        });\r\n        if (mvtkForms.length !== this.mvtkForms.length) {\r\n            this.inputValidationModal = true;\r\n\r\n            return;\r\n        }\r\n        if (this.disable) {\r\n            return;\r\n        }\r\n        this.disable = true;\r\n        this.isLoading = true;\r\n        if (this.purchase.isExpired()) {\r\n            this.router.navigate(['expired']);\r\n\r\n            return;\r\n        }\r\n        try {\r\n            const mvtkData = mvtkForms.map((mvtkForm) => {\r\n                return {\r\n                    knyknrNo: mvtkForm.controls.code.value,\r\n                    pinCd: mvtkForm.controls.password.value\r\n                };\r\n            });\r\n            await this.purchase.mvtkAuthenticationProcess(mvtkData);\r\n            this.router.navigate(['purchase/mvtk/confirm']);\r\n        } catch (err) {\r\n            console.error(err);\r\n            this.isLoading = false;\r\n            this.authErrorModal = true;\r\n            this.disable = false;\r\n        }\r\n    }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl red-text\">仮予約の座席があります</h1>\r\n    <p class=\"read\">現在、仮予約の座席があります。\r\n        <br>仮予約の座席の購入を進めるか、新しく選択した内容で購入を進めるか選択してください。\r\n        <br>仮予約の内容は下記になります。</p>\r\n\r\n    <div class=\"form-layout mb-x-large\">\r\n        <h2 class=\"section-ttl\">仮予約の上映スケジュール</h2>\r\n        <ul class=\"box radius bg-light-gray mb-large\">\r\n            <li>\r\n                <dl>\r\n                    <dt>劇場 / スクリーン</dt>\r\n                    <dd>{{ purchase.getTheaterName() }} / {{ purchase.getScreenName() }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>作品名</dt>\r\n                    <dd>{{ purchase.getTitle() }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>鑑賞日時</dt>\r\n                    <dd>\r\n                        {{ purchase.getAppreciationDate() }} {{ purchase.getStartDate() }} - {{ purchase.getEndDate() }}\r\n                    </dd>\r\n                </dl>\r\n            </li>\r\n        </ul>\r\n        <p class=\"text-center mb-x-small\">上記の仮予約内容で購入手続きへ戻ります。</p>\r\n        <form (ngSubmit)=\"returnTransaction()\">\r\n            <app-next-button>仮予約の購入手続きへ戻る</app-next-button>\r\n        </form>\r\n    </div>\r\n\r\n    <div class=\"form-layout\">\r\n        <h2 class=\"section-ttl\">新しく選択した上映スケジュール</h2>\r\n        <ul class=\"box radius bg-light-gray mb-large\">\r\n            <li>\r\n                <dl>\r\n                    <dt>劇場 / スクリーン</dt>\r\n                    <dd>{{ getTheaterName() }} / {{ getScreenName() }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>作品名</dt>\r\n                    <dd>{{ getTitle() }}</dd>\r\n                </dl>\r\n            </li>\r\n            <li>\r\n                <dl>\r\n                    <dt>鑑賞日時</dt>\r\n                    <dd>\r\n                        {{ getAppreciationDate() }} {{ screeningEvent.startDate | timeFormat }} - {{ screeningEvent.endDate | timeFormat }}\r\n                    </dd>\r\n                </dl>\r\n            </li>\r\n        </ul>\r\n        <p class=\"text-center  mb-x-small\">仮予約を削除し、新しく選択した上映スケジュールの購入手続きを進めます。</p>\r\n        <form (ngSubmit)=\"newTransaction()\">\r\n            <app-next-button>仮予約を削除して次へ進む</app-next-button>\r\n        </form>\r\n    </div>\r\n    <app-site-seal></app-site-seal>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { factory } from '@toei-jp/cinerino-api-javascript-client';\r\nimport * as moment from 'moment';\r\n// import { environment } from '../../../../environments/environment';\r\n// import { TimeFormatPipe } from '../../../pipes/time-format/time-format.pipe';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\nimport { SaveType, StorageService } from '../../../services/storage/storage.service';\r\n\r\n@Component({\r\n    selector: 'app-purchase-overlap',\r\n    templateUrl: './purchase-overlap.component.html',\r\n    styleUrls: ['./purchase-overlap.component.scss']\r\n})\r\nexport class PurchaseOverlapComponent implements OnInit {\r\n    public screeningEvent: factory.chevre.event.screeningEvent.IEvent;\r\n\r\n    constructor(\r\n        private storage: StorageService,\r\n        public purchase: PurchaseService,\r\n        private router: Router,\r\n        private error: ErrorService\r\n    ) { }\r\n\r\n    public async ngOnInit() {\r\n        window.scrollTo(0, 0);\r\n        try {\r\n            // イベント情報取得\r\n            this.screeningEvent = <factory.chevre.event.screeningEvent.IEvent>this.storage.load('screeningEvent', SaveType.Session);\r\n            if (this.screeningEvent === null) {\r\n                throw new Error('screeningEvent is null');\r\n            }\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 予約中のフローへ戻る\r\n     */\r\n    public returnTransaction() {\r\n        this.router.navigate(['/purchase/seat']);\r\n    }\r\n\r\n    /**\r\n     * 新しい取引へ\r\n     */\r\n    public async newTransaction() {\r\n        try {\r\n            await this.purchase.cancelSeatRegistrationProcess();\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n        this.storage.remove('screeningEvent', SaveType.Session);\r\n        this.storage.save('parameters', {\r\n            passportToken: '',\r\n            signInRedirect: false,\r\n            performanceId: this.screeningEvent.id\r\n        }, SaveType.Session);\r\n        this.router.navigate(['/purchase/transaction']);\r\n        // location.href = `${environment.ENTRANCE_SERVER_URL}/purchase/index.html?id=${this.screeningEvent.identifier}`;\r\n    }\r\n\r\n    /**\r\n     * 劇場名取得\r\n     * @method getTheaterName\r\n     * @returns {string}\r\n     */\r\n    public getTheaterName() {\r\n        return this.screeningEvent.superEvent.location.name.ja;\r\n    }\r\n\r\n    /**\r\n     * スクリーン名取得\r\n     * @method getScreenName\r\n     * @returns {string}\r\n     */\r\n    public getScreenName() {\r\n        return this.screeningEvent.location.name.ja;\r\n    }\r\n\r\n    /**\r\n     * 作品名取得\r\n     * @method getTitle\r\n     * @returns {string}\r\n     */\r\n    public getTitle() {\r\n        return this.screeningEvent.name.ja;\r\n    }\r\n\r\n    /**\r\n     * 鑑賞日取得\r\n     * @method getAppreciationDate\r\n     * @returns {string}\r\n     */\r\n    public getAppreciationDate() {\r\n        moment.locale('ja');\r\n\r\n        return moment(this.screeningEvent.startDate).format('YYYY年MM月DD日(ddd)');\r\n    }\r\n\r\n    /**\r\n     * 上映開始時間取得\r\n     * @method getStartDate\r\n     * @returns {string}\r\n     */\r\n    // public getStartDate() {\r\n    //     return new TimeFormatPipe().transform(this.screeningEvent.startDate);\r\n    // }\r\n\r\n    /**\r\n     * 上映終了取得\r\n     * @method getEndDate\r\n     * @returns {string}\r\n     */\r\n    // public getEndDate() {\r\n    //     return new TimeFormatPipe().transform(this.screeningEvent.endDate);\r\n    // }\r\n\r\n}\r\n","<div class=\"contents\">\r\n\r\n    <h1 class=\"page-ttl\">スケジュール選択</h1>\r\n    <p class=\"read\">こちらからチケットの購入をする事が出来ます。\r\n        <br>ご希望の鑑賞作品、鑑賞日時を選択してください。</p>\r\n    <div *ngFor=\"let theater of theaters\" class=\"mb-middle button blue-button center-button inquiry-button\">\r\n        <a href=\"{{ environment.FRONTEND_ENDPOINT }}/inquiry/login?theater={{ theater.location.branchCode }}\">{{ theater.name.ja }}照会</a>\r\n    </div>\r\n\r\n    <div class=\"mb-middle\">\r\n        <div *ngIf=\"!isPreSaleSchedules && preSaleDateList.length > 0\" class=\"blue-button center-button button\">\r\n            <button (click)=\"isPreSaleSchedules = true\">先行販売スケジュール</button>\r\n        </div>\r\n        <div *ngIf=\"isPreSaleSchedules && preSaleDateList.length > 0\" class=\"gray-button center-button button\">\r\n            <button (click)=\"isPreSaleSchedules = false\">普通スケジュール</button>\r\n        </div>\r\n        <dl *ngIf=\"showTheaterList\">\r\n            <dt class=\"mb-x-small\">劇場</dt>\r\n            <dd class=\"mb-small\">\r\n                <select [(ngModel)]=\"conditions.theater\" (change)=\"changeConditions()\">\r\n                    <option *ngFor=\"let theater of theaters\" value=\"{{ theater.location.branchCode }}\">{{ theater.name.ja }}</option>\r\n                </select>\r\n            </dd>\r\n        </dl>\r\n        <div *ngIf=\"!isPreSaleSchedules\" class=\"date-list\">\r\n            <div *ngFor=\"let date of dateList\" class=\"date-btn\" (click)=\"changeDate(date.value)\">{{ date.label.month }}/{{ date.label.date }}{{ date.label.day }}</div>\r\n        </div>\r\n        <div *ngIf=\"isPreSaleSchedules\" class=\"date-list\">\r\n            <div *ngFor=\"let date of preSaleDateList\" class=\"date-btn\" (click)=\"changePreSaleDate(date.value)\">{{ date.label.month }}/{{ date.label.date }}{{ date.label.day }}</div>\r\n        </div>\r\n    </div>\r\n\r\n    <ul *ngIf=\"!isPreSaleSchedules\" class=\"film-order\">\r\n        <app-purchase-film-order *ngFor=\"let film of filmOrder\" [data]=\"film\"></app-purchase-film-order>\r\n    </ul>\r\n    \r\n    <ul *ngIf=\"isPreSaleSchedules\" class=\"film-order\">\r\n        <app-purchase-film-order *ngFor=\"let film of preSaleFilmOrder\" [data]=\"film\"></app-purchase-film-order>\r\n    </ul>\r\n\r\n</div>\r\n\r\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { factory } from '@toei-jp/cinerino-api-javascript-client';\r\nimport * as moment from 'moment';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { CinerinoService } from '../../../services/cinerino/cinerino.service';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\n\r\ntype IMovieTheater = factory.organization.movieTheater.IOrganization;\r\ntype IScreeningEvent = factory.chevre.event.screeningEvent.IEvent;\r\ninterface IFilmOrder {\r\n    id: string;\r\n    films: IScreeningEvent[];\r\n}\r\n\r\ninterface IDate {\r\n    value: string;\r\n    label: {\r\n        date: string,\r\n        month: string,\r\n        day: string\r\n    };\r\n}\r\n\r\n@Component({\r\n    selector: 'app-purchase-schedule',\r\n    templateUrl: './purchase-schedule.component.html',\r\n    styleUrls: ['./purchase-schedule.component.scss']\r\n})\r\nexport class PurchaseScheduleComponent implements OnInit {\r\n    public theaters: IMovieTheater[];\r\n    public isLoading: boolean;\r\n    public showTheaterList: boolean;\r\n    public dateList: IDate[];\r\n    public filmOrder: IFilmOrder[];\r\n    public schedules: IScreeningEvent[];\r\n    public conditions: { theater: string; date: string };\r\n    public environment = environment;\r\n    private preSaleSchedules: IScreeningEvent[];\r\n    public preSaleDateList: IDate[];\r\n    public preSaleFilmOrder: IFilmOrder[];\r\n    public isPreSaleSchedules: boolean;\r\n\r\n    constructor(\r\n        private error: ErrorService,\r\n        private route: ActivatedRoute,\r\n        private purchase: PurchaseService,\r\n        private cinerino: CinerinoService\r\n    ) {\r\n        this.showTheaterList = true;\r\n        this.theaters = [];\r\n        this.dateList = [];\r\n        this.preSaleDateList = [];\r\n        this.preSaleFilmOrder = [];\r\n        this.filmOrder = [];\r\n        this.conditions = {\r\n            theater: '',\r\n            date: ''\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 初期化\r\n     * @method ngOnInit\r\n     * @returns {Promise<void>}\r\n     */\r\n    public async ngOnInit(): Promise<void> {\r\n        window.scrollTo(0, 0);\r\n        moment.locale('ja');\r\n        this.isLoading = true;\r\n        this.isPreSaleSchedules = false;\r\n        try {\r\n            await this.cinerino.getServices();\r\n            const theaterQs = this.route.snapshot.queryParamMap.get('theater');\r\n            this.theaters = (await this.cinerino.organization.searchMovieTheaters({})).data;\r\n            if (theaterQs !== null) {\r\n                const theater = this.theaters.find((t) => (\r\n                    t.name.en.toLocaleLowerCase().indexOf(theaterQs.toLocaleLowerCase()) >= 0\r\n                ));\r\n                if (theater !== undefined) {\r\n                    this.theaters = [theater];\r\n                    this.showTheaterList = false;\r\n                }\r\n            }\r\n            this.dateList = this.getDateList(7);\r\n            this.conditions = {\r\n                theater: this.theaters[0].location.branchCode,\r\n                date: this.dateList[0].value\r\n            };\r\n            this.preSaleSchedules = (await this.cinerino.event.searchScreeningEvents({\r\n                superEvent: {\r\n                    locationBranchCodes: [this.theaters[0].location.branchCode]\r\n                },\r\n                preSaleFlg: 1,\r\n                startFrom: moment().toDate(),\r\n                saleStartThrough: moment().toDate()\r\n            })).data;\r\n            this.preSaleDateList = this.getPreSaleDateList();\r\n            if (this.preSaleDateList.length > 0) {\r\n                this.changePreSaleDate(this.preSaleDateList[0].value);\r\n            }\r\n            await this.changeConditions();\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n        this.isLoading = false;\r\n    }\r\n\r\n    /**\r\n     * @method getDateList\r\n     * @param {number} loop\r\n     * @returns {IDate[]}\r\n     */\r\n    public getDateList(loop: number): IDate[] {\r\n        const results = [];\r\n        for (let i = 0; i < loop; i++) {\r\n            const date = moment().add(i, 'day');\r\n            results.push({\r\n                value: date.format('YYYYMMDD'),\r\n                label: {\r\n                    date: date.format('DD'),\r\n                    month: date.format('MM'),\r\n                    day: date.format('（dd）')\r\n                }\r\n            });\r\n        }\r\n\r\n        return results;\r\n    }\r\n\r\n    /**\r\n     * @method getPreSaleDateList\r\n     * @param {number} loop\r\n     * @returns {IDate[]}\r\n     */\r\n    public getPreSaleDateList(): IDate[] {\r\n        const results: IDate[] = [];\r\n        this.preSaleSchedules.forEach((schedule) => {\r\n            const date = moment(schedule.startDate);\r\n            const data = {\r\n                value: date.format('YYYYMMDD'),\r\n                label: {\r\n                    date: date.format('DD'),\r\n                    month: date.format('MM'),\r\n                    day: date.format('（dd）')\r\n                }\r\n            };\r\n            const duplicate = results.find((d) => d.value === data.value);\r\n            if (!duplicate) {\r\n                results.push(data);\r\n            }\r\n        });\r\n\r\n        return results;\r\n    }\r\n\r\n    /**\r\n     * 日付変更\r\n     * @method changeDate\r\n     * @param { string } date\r\n     * @returns {Promise<void>}\r\n     */\r\n    public async changeDate(date: string): Promise<void> {\r\n        this.conditions.date = date;\r\n        await this.changeConditions();\r\n    }\r\n\r\n    /**\r\n     * 日付変更\r\n     * @method changePreSaleDate\r\n     * @param { string } date\r\n     * @returns { void }\r\n     */\r\n    public changePreSaleDate(date: string): void {\r\n        const schedules = this.preSaleSchedules.filter((s) => {\r\n            return date === moment(s.startDate).format('YYYYMMDD');\r\n        });\r\n        this.preSaleFilmOrder = this.getEventFilmOrder(schedules);\r\n    }\r\n\r\n    /**\r\n     * 条件変更\r\n     * @method changeConditions\r\n     * @returns {Promise<void>}\r\n     */\r\n    public async changeConditions(): Promise<void> {\r\n        this.isLoading = true;\r\n        this.filmOrder = [];\r\n        try {\r\n            await this.cinerino.getServices();\r\n            const theater = this.theaters.find((target) => {\r\n                return (target.location.branchCode === this.conditions.theater);\r\n            });\r\n            if (theater === undefined || theater.identifier === undefined) {\r\n                throw new Error('theater is not found');\r\n            }\r\n            this.schedules = (await this.cinerino.event.searchScreeningEvents({\r\n                superEvent: {\r\n                    locationBranchCodes: [theater.location.branchCode]\r\n                },\r\n                startFrom: moment(this.conditions.date).toDate(),\r\n                startThrough: moment(this.conditions.date).add(1, 'day').toDate()\r\n            })).data;\r\n            this.filmOrder = this.getEventFilmOrder(this.schedules);\r\n            console.log(this.filmOrder);\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n        this.isLoading = false;\r\n    }\r\n\r\n    /**\r\n     * 作品別上映スケジュール取得\r\n     * @function getScreeningEvents\r\n     * @returns {IFilmOrder[]}\r\n     */\r\n    public getEventFilmOrder(schedules: IScreeningEvent[]): IFilmOrder[] {\r\n        const results: IFilmOrder[] = [];\r\n        schedules.forEach((screeningEvent) => {\r\n            // 販売可能時間判定\r\n            if (\r\n                !this.purchase.isSales(screeningEvent) ||\r\n                !this.purchase.isOnlineDisplay(screeningEvent)\r\n            ) {\r\n                return;\r\n            }\r\n            const film = results.find((event) => {\r\n                return (event.id === screeningEvent.workPerformed.identifier);\r\n            });\r\n            if (film === undefined) {\r\n                results.push({\r\n                    id: screeningEvent.workPerformed.identifier,\r\n                    films: [screeningEvent]\r\n                });\r\n            } else {\r\n                film.films.push(screeningEvent);\r\n            }\r\n        });\r\n\r\n        return results.sort((event1, event2) => {\r\n            if (event1.films[0].name.ja < event2.films[0].name.ja) {\r\n                return -1;\r\n            }\r\n            if (event1.films[0].name.ja > event2.films[0].name.ja) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n    }\r\n\r\n}\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">座席選択</h1>\r\n    <p class=\"read\">ご希望の座席を選択して「次へ」ボタンを押してください。\r\n        <br>選択できる座席数は最大\r\n        <span class=\"seat-limit-text\">{{ purchase.data.screeningEvent?.maxSeatNumber }}</span>席までとなります。\r\n        <br>\r\n        <span class=\"sp-text\">画面をタッチすると画面がズームしますので座席を選択してください。\r\n            <br>\r\n        </span>\r\n        <span class=\"small-x-text\">※車椅子席をご希望の方は、お手数ですが通常のお席をご購入の上、対象の劇場にご連絡ください。</span>\r\n    </p>\r\n\r\n    <div class=\"film-info mb-small\">\r\n        <p class=\"mb-small\">現在、選択されているチケットは下記のとおりです。</p>\r\n        <div class=\"border-bottom title\">\r\n            <div><img src=\"/assets/images/common/title-icon.svg\"></div>\r\n            <div class=\"film-info-contents\">{{ purchase.getTitle() }}</div>\r\n        </div>\r\n        <div class=\"film-info-inner\">\r\n            <div class=\"date\">\r\n                <div><img src=\"/assets/images/common/date-icon.svg\"></div>\r\n                <div class=\"film-info-contents\">\r\n                    {{ purchase.getAppreciationDate() }} {{ purchase.getStartDate() }} - {{ purchase.getEndDate() }}\r\n                </div>\r\n            </div>\r\n            <div class=\"screen-name\">\r\n                <div><img src=\"/assets/images/common/screen-name-icon.svg\"></div>\r\n                <div class=\"film-info-contents\">\r\n                    {{ purchase.getTheaterName() }} / {{ purchase.getScreenName() }}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <app-seat-info></app-seat-info>\r\n    </div>\r\n\r\n\r\n\r\n    <div class=\"mb-middle\">\r\n        <app-screen [inputData]=\"screenData\" [test]=\"false\" (select)=\"seatSelect($event)\" (alert)=\"seatSelectionAlert()\"\r\n            (load)=\"loadScreen()\">\r\n            <!-- <app-seat-info type=\"{{ purchase.data.screeningEvent?.superEvent.coaInfo.kbnJoueihousiki?.kubunCode }}\"></app-seat-info> -->\r\n        </app-screen>\r\n    </div>\r\n\r\n    <h2 class=\"section-ttl\">利用規約</h2>\r\n    <p class=\"mb-small\">利用規約に同意した上で「次へ」ボタンを押してください。</p>\r\n\r\n    <app-purchase-term class=\"mb-middle\" [theaterCode]=\"purchase.data.screeningEvent?.superEvent.location.branchCode.slice(-2)\"></app-purchase-term>\r\n\r\n    <form [formGroup]=\"seatForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"mb-x-large text-center\">\r\n            <input type=\"checkbox\" formControlName=\"terms\" id=\"terms\">\r\n            <label for=\"terms\" class=\"agree-label\">\r\n                <strong>利用規約に同意する</strong>\r\n            </label>\r\n            <div *ngIf=\"seatForm.controls['terms'].invalid && (seatForm.controls['terms'].dirty || seatForm.controls['terms'].touched)\"\r\n                class=\"validation-text\">利用規約に同意してください</div>\r\n        </div>\r\n\r\n        <app-buttons nextLabel=\"次へ\" prevLabel=\"戻る\" prevLink=\"/purchase/schedule\"></app-buttons>\r\n    </form>\r\n    <app-site-seal></app-site-seal>\r\n</div>\r\n\r\n<app-modal [open]=\"notSelectSeatModal\" [layout]=\"true\" (close)=\"notSelectSeatModal = false\">\r\n    <div class=\"modal-title large-text text-center mb-middle\">\r\n        <strong>座席が未選択です</strong>\r\n    </div>\r\n    <p class=\"text-center\">ご希望の空席を選択して「次へ」ボタンを押してください。</p>\r\n</app-modal>\r\n\r\n<app-modal [open]=\"upperLimitModal\" [layout]=\"true\" (close)=\"upperLimitModal = false\">\r\n    <div class=\"modal-title large-text text-center mb-middle\">\r\n        <strong>予約座席数が上限です</strong>\r\n    </div>\r\n    <p class=\"text-center\">予約座席数は最大\r\n        <span class=\"seat-limit-text\">{{ purchase.data.screeningEvent?.maxSeatNumber }}</span>席までとなります。</p>\r\n</app-modal>\r\n\r\n<app-loading [show]=\"isLoading\"></app-loading>","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { IReservationSeat, Reservation } from '../../../models';\r\nimport { CinerinoService } from '../../../services/cinerino/cinerino.service';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\n// import { FlgMember, UserService } from '../../../services/user/user.service';\r\nimport { IInputScreenData } from '../../parts/screen/screen.component';\r\n\r\n@Component({\r\n    selector: 'app-purchase-seat',\r\n    templateUrl: './purchase-seat.component.html',\r\n    styleUrls: ['./purchase-seat.component.scss']\r\n})\r\nexport class PurchaseSeatComponent implements OnInit, AfterViewInit {\r\n    public isLoading: boolean;\r\n    public seatForm: FormGroup;\r\n    public notSelectSeatModal: boolean;\r\n    public upperLimitModal: boolean;\r\n    public disable: boolean;\r\n    public screenData: IInputScreenData;\r\n    public environment = environment;\r\n\r\n    constructor(\r\n        public purchase: PurchaseService,\r\n        private router: Router,\r\n        private formBuilder: FormBuilder,\r\n        private cinerino: CinerinoService,\r\n        private error: ErrorService,\r\n        // private user: UserService\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        window.scrollTo(0, 0);\r\n        this.isLoading = true;\r\n        this.notSelectSeatModal = false;\r\n        this.seatForm = this.formBuilder.group({\r\n            terms: [false, [Validators.requiredTrue]]\r\n        });\r\n        this.disable = false;\r\n        if (this.purchase.data.screeningEvent === undefined) {\r\n            this.error.redirect(new Error('screeningEvent is undefined'));\r\n\r\n            return;\r\n        }\r\n\r\n        this.screenData = {\r\n            theaterCode: this.purchase.data.screeningEvent.superEvent.location.branchCode,\r\n            // dateJouei: this.purchase.data.screeningEvent.info.dateJouei,\r\n            titleCode: this.purchase.data.screeningEvent.superEvent.workPerformed.identifier,\r\n            // titleBranchNum: this.purchase.data.screeningEvent.info.titleBranchNum,\r\n            // timeBegin: this.purchase.data.screeningEvent.info.timeBegin,\r\n            screenCode: this.purchase.data.screeningEvent.location.branchCode\r\n        };\r\n\r\n    }\r\n\r\n    public async ngAfterViewInit() {\r\n        if (this.purchase.data.salesTickets.length === 0) {\r\n            this.purchase.data.salesTickets = await this.fitchSalesTickets();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * スクリーン読み込み完了\r\n     * @method loadScreen\r\n     * @param {ISeat[]} seats\r\n     */\r\n    public loadScreen() {\r\n        this.isLoading = false;\r\n    }\r\n\r\n    /**\r\n     * 販売可能チケット情報取得\r\n     * @method getSalesTickets\r\n     */\r\n    public async fitchSalesTickets() {\r\n        if (this.purchase.data.screeningEvent === undefined) {\r\n            return [];\r\n        }\r\n        const screeningEvent = this.purchase.data.screeningEvent;\r\n        await this.cinerino.getServices();\r\n        const salesTickets = await this.cinerino.event.searchScreeningEventTicketOffers({\r\n            eventId: screeningEvent.id\r\n        });\r\n        // console.log('salesTickets', salesTicketArgs, salesTickets);\r\n\r\n        return salesTickets.filter((ticket) => {\r\n            return ticket.isOnlineTicket !== false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 次へ\r\n     * @method onSubmit\r\n     */\r\n    public async onSubmit() {\r\n        if (this.purchase.data.reservations.length === 0) {\r\n            this.notSelectSeatModal = true;\r\n            return;\r\n        }\r\n        if (this.disable) {\r\n            return;\r\n        }\r\n        if (this.seatForm.invalid) {\r\n            this.seatForm.controls.terms.markAsDirty();\r\n\r\n            return;\r\n        }\r\n        this.disable = true;\r\n        this.isLoading = true;\r\n        if (this.purchase.isExpired()) {\r\n            this.router.navigate(['expired']);\r\n\r\n            return;\r\n        }\r\n        try {\r\n            await this.purchase.seatRegistrationProcess();\r\n            this.router.navigate(['/purchase/ticket']);\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 座席選択\r\n     * @method seatSelect\r\n     * @param {Iseat[]} seats\r\n     */\r\n    public seatSelect(seats: IReservationSeat[]) {\r\n        this.purchase.data.reservations = seats.map((seat) => {\r\n            const ticket = { ticketOffer: this.purchase.data.salesTickets[0] };\r\n            return new Reservation({ seat, ticket });\r\n        });\r\n        this.purchase.save();\r\n    }\r\n\r\n    /**\r\n     * 座席選択数警告\r\n     * @method seatSelectionAlert\r\n     */\r\n    public seatSelectionAlert() {\r\n        this.upperLimitModal = true;\r\n    }\r\n\r\n}\r\n\r\n","<div class=\"contents\">\r\n    <h1 class=\"page-ttl\">券種選択</h1>\r\n    <p class=\"read\">ご希望の券種を選択して「次へ」ボタンを押してください。</p>\r\n\r\n    <div class=\"box radius bg-light-gray mb-middle mvtk\">\r\n        <dl class=\"d-table\">\r\n            <dt class=\"d-td\">ムビチケ券を利用される方</dt>\r\n            <dd class=\"d-td width-medium\">\r\n                <div class=\"ghost-button mvtk-button\">\r\n                    <a routerLink=\"/purchase/mvtk/input\">\r\n                        <img src=\"/assets/images/common/mvtk_logo.svg\" alt=\"ムビチケ\">を利用する\r\n                    </a>\r\n                </div>\r\n            </dd>\r\n        </dl>\r\n    </div>\r\n\r\n    <ul class=\"mb-middle seats\">\r\n        <li *ngFor=\"let reservation of purchase.data.reservations\" class=\"box radius bg-light-gray mb-small\">\r\n            <dl class=\"d-table\">\r\n                <dt class=\"d-td seat-code\">{{ reservation.seat.seatNumber }}</dt>\r\n                <dd class=\"d-td width-medium\">\r\n\r\n                    <div *ngIf=\"reservation.ticket === undefined\" class=\"button blue-button\">\r\n                        <button type=\"button\" (click)=\"openTicketList(reservation)\">券種を選択してください</button>\r\n                    </div>\r\n                    <div *ngIf=\"reservation.ticket !== undefined\" class=\"blue-button ghost-button\">\r\n                        <button type=\"button\" (click)=\"openTicketList(reservation)\">\r\n                            {{ reservation.ticket.ticketOffer.name.ja }} {{ reservation.getTicketPrice().total |\r\n                            currency : 'JPY' }}\r\n                        </button>\r\n                    </div>\r\n                </dd>\r\n            </dl>\r\n        </li>\r\n    </ul>\r\n\r\n    <div class=\"box radius mb-large total\">\r\n        <div class=\"text-right\">\r\n            <div class=\"length mb-x-small\">購入枚数\r\n                <strong class=\"red-text large-text\">{{ purchase.data.reservations.length }}枚</strong>\r\n            </div>\r\n            <div class=\"price\">合計金額\r\n                <strong class=\"red-text large-text\">\r\n                    <span>{{ totalPrice }}</span>円</strong>\r\n            </div>\r\n        </div>\r\n        <div class=\"border-bottom mb-small\"></div>\r\n        <!-- 4DX -->\r\n        <!--<p *ngIf=\"(purchase.data.screeningEvent?.superEvent.coaInfo.kbnJoueihousiki?.kubunCode === '002')\" class=\"small-x-text mb-xx-small\">\r\n            ※[４DXをご鑑賞のお客様へ]\r\n            <br> ４DX®作品は「身長100cm未満の方は入場不可」「身長120cm未満のお子様は保護者同伴」の入場制限がありますので、ご注意くださいませ。\r\n            <br> また、妊娠されている方、ご高齢の方、心臓・背中・腰・首などに障害のある方、特別な疾病のある方、乗り物酔いしやすい方、体調に不安のある方はご利用になれません。\r\n            <br> 上映中のホットドリンク・アルコールはご遠慮ください。\r\n        </p>-->\r\n        <p class=\"small-x-text\">※メンバーズカード提示による割引やその他割引券などのご利用はできません。\r\n            <br>※車椅子席をご希望の方は、お手数ですが通常のお席をご購入の上、対象の劇場にご連絡ください。\r\n            <br>※ムビチケ券によっては別途追加料金が発生する場合がありますのでご了承ください。\r\n        </p>\r\n    </div>\r\n    <form [formGroup]=\"ticketForm\" (ngSubmit)=\"onSubmit()\">\r\n        <app-buttons nextLabel=\"次へ\" prevLabel=\"戻る\" prevLink=\"/purchase/seat\"></app-buttons>\r\n    </form>\r\n    <app-site-seal></app-site-seal>\r\n</div>\r\n\r\n<app-modal [open]=\"ticketsModal\" [layout]=\"false\" (close)=\"ticketsModal = false\">\r\n    {{ tickets.length }}\r\n    <div *ngIf=\"tickets.length === 0\" inner class=\"not-layout box radius bg-white\">\r\n        <p>販売可能券種がありません</p>\r\n    </div>\r\n    <ul *ngIf=\"tickets.length > 0\" inner class=\"not-layout box radius bg-white\">\r\n        <li *ngFor=\"let ticket of tickets\">\r\n            <dl class=\"d-table\">\r\n                <dt class=\"d-td\">\r\n                    <div class=\"mb-xx-small\">\r\n                        <strong>{{ ticket.ticketOffer.name.ja }} {{ getTicketPrice(ticket.ticketOffer).total | currency\r\n                            : 'JPY' }}</strong>\r\n                    </div>\r\n                    <p *ngIf=\"ticket.movieTicket\" class=\"small-x-text\">購入管理番号{{ ticket.movieTicket.identifier\r\n                        }}</p>\r\n                </dt>\r\n                <dd class=\"d-td width-small\">\r\n                    <div class=\"button blue-button ticket-type-select\">\r\n                        <button type=\"button\" (click)=\"selectTicket(ticket)\">選択</button>\r\n                    </div>\r\n                </dd>\r\n            </dl>\r\n        </li>\r\n    </ul>\r\n</app-modal>\r\n\r\n<app-modal [open]=\"notSelectModal\" [layout]=\"true\" (close)=\"notSelectModal = false\">\r\n    <div class=\"modal-title large-text text-center mb-middle\">\r\n        <strong>券種が未選択です</strong>\r\n    </div>\r\n    <p class=\"text-center\">ご希望の券種を選択して「次へ」ボタンを押してください。</p>\r\n</app-modal>\r\n\r\n<app-modal [open]=\"discountConditionsModal\" [layout]=\"true\" (close)=\"discountConditionsModal = false\">\r\n    <div class=\"modal-title large-text text-center mb-middle\">\r\n        <strong>割引条件が満たされていません</strong>\r\n    </div>\r\n    <p class=\"text-center\">選択した券種の中に、割引券が含まれています。\r\n        <br> 割引券の適用条件を再度ご確認ください。\r\n    </p>\r\n</app-modal>\r\n\r\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { factory } from '@toei-jp/cinerino-api-javascript-client/lib/abstract';\r\nimport { IMovieTicket } from '@toei-jp/cinerino-factory/lib/factory/paymentMethod/paymentCard/movieTicket';\r\nimport { IReservationTicket, Reservation } from '../../../models';\r\n// import { environment } from '../../../../environments/environment';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\nimport { UserService } from '../../../services/user/user.service';\r\n\r\ntype IMovieTicketTypeChargeSpecification =\r\n    factory.chevre.priceSpecification.IPriceSpecification<factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification>;\r\n\r\n@Component({\r\n    selector: 'app-purchase-ticket',\r\n    templateUrl: './purchase-ticket.component.html',\r\n    styleUrls: ['./purchase-ticket.component.scss']\r\n})\r\nexport class PurchaseTicketComponent implements OnInit {\r\n    public totalPrice: number;\r\n    public ticketsModal: boolean;\r\n    public isLoading: boolean;\r\n    public discountConditionsModal: boolean;\r\n    public notSelectModal: boolean;\r\n    public ticketForm: FormGroup;\r\n    public disable: boolean;\r\n    public selectedReservation: Reservation;\r\n    public tickets: IReservationTicket[];\r\n\r\n    constructor(\r\n        public purchase: PurchaseService,\r\n        public user: UserService,\r\n        private formBuilder: FormBuilder,\r\n        private router: Router,\r\n        private error: ErrorService\r\n    ) { }\r\n\r\n    public ngOnInit() {\r\n        // console.log(this.purchase.data.salesTickets);\r\n        window.scrollTo(0, 0);\r\n        this.purchase.load();\r\n        this.isLoading = false;\r\n        this.ticketsModal = false;\r\n        this.discountConditionsModal = false;\r\n        this.notSelectModal = false;\r\n        this.ticketForm = this.formBuilder.group({});\r\n        this.disable = false;\r\n        this.tickets = [];\r\n        try {\r\n            this.totalPrice = this.purchase.getTotalPrice();\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 次へ\r\n     * @method onSubmit\r\n     */\r\n    public async onSubmit() {\r\n        const selectedReservations = this.purchase.data.reservations.filter((reservation) => {\r\n            return (reservation.ticket !== undefined);\r\n        });\r\n        if (selectedReservations.length === 0) {\r\n            this.notSelectModal = true;\r\n\r\n            return;\r\n        }\r\n\r\n        if (this.disable) {\r\n            return;\r\n        }\r\n        this.disable = true;\r\n        this.isLoading = true;\r\n        if (this.purchase.isExpired()) {\r\n            this.router.navigate(['expired']);\r\n\r\n            return;\r\n        }\r\n        try {\r\n            await this.purchase.ticketRegistrationProcess();\r\n            this.router.navigate(['/purchase/input']);\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 券種選択\r\n     * @method openTicketList\r\n     */\r\n    public openTicketList(reservation: Reservation) {\r\n        this.createTickets();\r\n        this.selectedReservation = reservation;\r\n        this.ticketsModal = true;\r\n    }\r\n\r\n    /**\r\n     * 券種一覧作成\r\n     */\r\n    public createTickets() {\r\n        this.tickets = [];\r\n        this.purchase.data.salesTickets.forEach((ticketOffer) => {\r\n            const movieTicketTypeChargeSpecification = <IMovieTicketTypeChargeSpecification>ticketOffer.priceSpecification.priceComponent\r\n                .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification)\r\n                .shift();\r\n            if (movieTicketTypeChargeSpecification === undefined) {\r\n                // ムビチケ以外\r\n                this.tickets.push({ ticketOffer });\r\n                return;\r\n            }\r\n\r\n            // 対象ムビチケ券\r\n            const movieTickets: IMovieTicket[] = [];\r\n            this.purchase.data.mvtkTickets.forEach((checkMovieTicketAction) => {\r\n                if (checkMovieTicketAction.result === undefined) {\r\n                    return;\r\n                }\r\n                checkMovieTicketAction.result.movieTickets.forEach((movieTicket) => {\r\n                    if (movieTicket.serviceType === movieTicketTypeChargeSpecification.appliesToMovieTicketType) {\r\n                        movieTickets.push(movieTicket);\r\n                    }\r\n                });\r\n            });\r\n\r\n            // 選択中の対象ムビチケ券\r\n            const reservations = this.purchase.data.reservations.filter((reservation) => {\r\n                if (reservation.ticket === undefined\r\n                    || reservation.ticket.movieTicket === undefined) {\r\n                    return false;\r\n                }\r\n                return (movieTicketTypeChargeSpecification.appliesToMovieTicketType\r\n                    === reservation.ticket.movieTicket.serviceType);\r\n            });\r\n\r\n            movieTickets.forEach((movieTicket, index) => {\r\n                if (index >= (movieTickets.length - reservations.length)) {\r\n                    return;\r\n                }\r\n                this.tickets.push({ ticketOffer, movieTicket });\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 券種選択\r\n     * @method selectTicket\r\n     */\r\n    public selectTicket(ticket: IReservationTicket) {\r\n        const findReservationResult = this.purchase.data.reservations.find((reservation) => {\r\n            return (reservation.seat.seatNumber === this.selectedReservation.seat.seatNumber\r\n                && reservation.seat.seatSection === this.selectedReservation.seat.seatSection);\r\n        });\r\n        if (findReservationResult !== undefined) {\r\n            findReservationResult.ticket = ticket;\r\n        }\r\n        this.purchase.save();\r\n        this.totalPrice = this.purchase.getTotalPrice();\r\n        // this.upDateSalesTickets();\r\n        this.ticketsModal = false;\r\n    }\r\n\r\n    /**\r\n     * 券種金額取得\r\n     */\r\n    public getTicketPrice(ticket: factory.chevre.event.screeningEvent.ITicketOffer) {\r\n        const result = {\r\n            unitPriceSpecification: 0,\r\n            videoFormatCharge: 0,\r\n            soundFormatCharge: 0,\r\n            movieTicketTypeCharge: 0,\r\n            total: 0\r\n        };\r\n        const unitPriceSpecifications = ticket.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.UnitPriceSpecification);\r\n        const videoFormatCharges = ticket.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.VideoFormatChargeSpecification);\r\n        const soundFormatCharges = ticket.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.SoundFormatChargeSpecification);\r\n        const movieTicketTypeCharges = ticket.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification);\r\n\r\n        unitPriceSpecifications.forEach((unitPriceSpecification) => {\r\n            result.unitPriceSpecification += unitPriceSpecification.price;\r\n        });\r\n        videoFormatCharges.forEach((videoFormatCharge) => {\r\n            result.videoFormatCharge += videoFormatCharge.price;\r\n        });\r\n        soundFormatCharges.forEach((soundFormatCharge) => {\r\n            result.soundFormatCharge += soundFormatCharge.price;\r\n        });\r\n        movieTicketTypeCharges.forEach((movieTicketTypeCharge) => {\r\n            result.movieTicketTypeCharge += movieTicketTypeCharge.price;\r\n        });\r\n        result.total = result.unitPriceSpecification + result.videoFormatCharge + result.soundFormatCharge + result.movieTicketTypeCharge;\r\n\r\n        return result;\r\n    }\r\n\r\n\r\n}\r\n","<app-loading [show]=\"true\"></app-loading>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport * as moment from 'moment';\r\nimport { AwsCognitoService } from '../../../services/aws-cognito/aws-cognito.service';\r\nimport { CinerinoService } from '../../../services/cinerino/cinerino.service';\r\nimport { ErrorService } from '../../../services/error/error.service';\r\nimport { PurchaseService } from '../../../services/purchase/purchase.service';\r\nimport { SaveType, StorageService } from '../../../services/storage/storage.service';\r\nimport { UserService } from '../../../services/user/user.service';\r\n\r\n@Component({\r\n    selector: 'app-purchase-transaction',\r\n    templateUrl: './purchase-transaction.component.html',\r\n    styleUrls: ['./purchase-transaction.component.scss']\r\n})\r\nexport class PurchaseTransactionComponent implements OnInit {\r\n    public parameters: {\r\n        /**\r\n         * パフォーマンスId\r\n         */\r\n        performanceId?: string;\r\n        /**\r\n         * WAITER許可証トークン\r\n         */\r\n        passportToken?: string;\r\n        /**\r\n         * awsCognitoIdentityId\r\n         */\r\n        identityId?: string;\r\n        /**\r\n         * ネイティブアプリ\r\n         */\r\n        native?: string;\r\n        /**\r\n         * 会員\r\n         */\r\n        member?: string;\r\n        /**\r\n         * アクセストークン\r\n         */\r\n        accessToken?: string;\r\n        /**\r\n         * signinリダイレクト\r\n         */\r\n        signInRedirect: boolean;\r\n    };\r\n    constructor(\r\n        private storage: StorageService,\r\n        private router: Router,\r\n        private cinerino: CinerinoService,\r\n        private purchase: PurchaseService,\r\n        private error: ErrorService,\r\n        private awsCognito: AwsCognitoService,\r\n        private user: UserService\r\n    ) { }\r\n\r\n    /**\r\n     * 初期化\r\n     */\r\n    public async ngOnInit() {\r\n        try {\r\n            this.parameters = this.storage.load('parameters', SaveType.Session);\r\n            if (!this.parameters.signInRedirect) {\r\n                this.user.reset();\r\n                this.user.load();\r\n                this.user.save();\r\n            }\r\n            // if (!this.parametersChack()) {\r\n            //     throw new Error('parameters is undefined');\r\n            // }\r\n            this.user.setNative(this.parameters.native);\r\n            // this.user.setAccessToken(this.parameters.accessToken);\r\n            this.user.save();\r\n            // console.log('this.cinerino.auth', this.cinerino.auth);\r\n            /*if (this.parameters.member === FlgMember.Member && !this.parameters.signInRedirect) {\r\n                await this.cinerino.signIn();\r\n\r\n                return;\r\n            }*/\r\n\r\n            // ticketアプリテスト\r\n            // this.parameters.identityId = 'ap-northeast-1:c93ad6a4-47e6-4023-a078-2a9ea80c15c9';\r\n            if (this.parameters.identityId !== undefined) {\r\n                await this.awsCognito.authenticateWithDeviceId(this.parameters.identityId);\r\n            }\r\n            await this.cinerino.getServices();\r\n            // イベント情報取得\r\n            const screeningEvent = await this.cinerino.event.findScreeningEventById({\r\n                id: (<string>this.parameters.performanceId)\r\n            });\r\n            // 開始可能日判定\r\n            if (!this.purchase.isSales(screeningEvent)) {\r\n                throw new Error('Unable to start sales');\r\n            }\r\n            const END_TIME = screeningEvent.endSaleTimeAfterScreening || 0;\r\n            // 終了可能日判定\r\n            if (moment().unix() > moment(screeningEvent.startDate).add(END_TIME, 'minutes').unix()) {\r\n                throw new Error('unable to end sales');\r\n            }\r\n            if (this.purchase.data.transaction !== undefined && this.purchase.isExpired()) {\r\n                // 取引期限切れなら購入情報削除\r\n                this.purchase.reset();\r\n            }\r\n            if (this.user.isNative()) {\r\n                // アプリなら購入情報削除\r\n                this.purchase.reset();\r\n            }\r\n            if (this.purchase.data.reservations.length > 0) {\r\n                // 重複確認へ\r\n                this.storage.save('screeningEvent', screeningEvent, SaveType.Session);\r\n                this.router.navigate([`/purchase/overlap`]);\r\n\r\n                return;\r\n            }\r\n\r\n            await this.purchase.transactionStartProcess({\r\n                passportToken: <string>this.parameters.passportToken,\r\n                screeningEvent: screeningEvent\r\n            });\r\n            this.storage.remove('parameters', SaveType.Session);\r\n            this.router.navigate(['/purchase/seat'], { replaceUrl: true });\r\n        } catch (err) {\r\n            this.error.redirect(err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method parametersChack\r\n     * @requires {boolean}\r\n     */\r\n    // private parametersChack(): boolean {\r\n    //     let result = true;\r\n    //     if (this.parameters.passportToken === undefined\r\n    //         || this.parameters.performanceId === undefined) {\r\n    //         result = false;\r\n    //     }\r\n\r\n    //     return result;\r\n    // }\r\n\r\n}\r\n","<div class=\"mb-middle\">\r\n    <app-screen [inputData]=\"screenData\" [test]=\"true\"></app-screen>\r\n</div>\r\n\r\n<app-loading [show]=\"isLoading\"></app-loading>","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { IInputScreenData } from '../../parts/screen/screen.component';\r\n\r\n@Component({\r\n    selector: 'app-test-screen',\r\n    templateUrl: './test-screen.component.html',\r\n    styleUrls: ['./test-screen.component.scss']\r\n})\r\nexport class TestScreenComponent implements OnInit {\r\n    public isLoading: boolean;\r\n    public screenData: IInputScreenData;\r\n    constructor(\r\n        private activatedRoute: ActivatedRoute\r\n    ) { }\r\n\r\n    public async ngOnInit() {\r\n        this.isLoading = true;\r\n        this.activatedRoute.params.subscribe(params => {\r\n            this.screenData = {\r\n                theaterCode: params.theaterCode,\r\n                // dateJouei: '',\r\n                titleCode: '',\r\n                // titleBranchNum: '',\r\n                // timeBegin: '',\r\n                screenCode: params.screenCode\r\n            };\r\n\r\n            this.isLoading = false;\r\n        });\r\n    }\r\n\r\n}\r\n","export * from './reservation';\r\n","import { factory } from '@toei-jp/cinerino-api-javascript-client';\r\nimport { IMovieTicket } from '@toei-jp/cinerino-factory/lib/factory/paymentMethod/paymentCard/movieTicket';\r\n\r\n/**\r\n * Reservation\r\n */\r\nexport class Reservation {\r\n    public seat: IReservationSeat;\r\n    public ticket?: IReservationTicket;\r\n\r\n    constructor(args: { seat: IReservationSeat, ticket?: IReservationTicket }) {\r\n        this.seat = args.seat;\r\n        this.ticket = args.ticket;\r\n    }\r\n\r\n    /**\r\n     * ムビチケ判定\r\n     */\r\n    public isMovieTicket() {\r\n        if (this.ticket === undefined) {\r\n            return false;\r\n        }\r\n        const movieTicketTypeChargeSpecification = this.ticket.ticketOffer.priceSpecification.priceComponent.find(\r\n            (component) => component.typeOf === factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification\r\n        );\r\n\r\n        return (movieTicketTypeChargeSpecification !== undefined);\r\n    }\r\n\r\n    /**\r\n     * 券種金額取得\r\n     */\r\n    public getTicketPrice() {\r\n        const result = {\r\n            unitPriceSpecification: 0,\r\n            videoFormatCharge: 0,\r\n            soundFormatCharge: 0,\r\n            movieTicketTypeCharge: 0,\r\n            total: 0\r\n        };\r\n        if (this.ticket === undefined) {\r\n            return result;\r\n        }\r\n        const unitPriceSpecifications = this.ticket.ticketOffer.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.UnitPriceSpecification);\r\n        const videoFormatCharges = this.ticket.ticketOffer.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.VideoFormatChargeSpecification);\r\n        const soundFormatCharges = this.ticket.ticketOffer.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.SoundFormatChargeSpecification);\r\n        const movieTicketTypeCharges = this.ticket.ticketOffer.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification);\r\n\r\n        unitPriceSpecifications.forEach((unitPriceSpecification) => {\r\n            result.unitPriceSpecification += unitPriceSpecification.price;\r\n        });\r\n        videoFormatCharges.forEach((videoFormatCharge) => {\r\n            result.videoFormatCharge += videoFormatCharge.price;\r\n        });\r\n        soundFormatCharges.forEach((soundFormatCharge) => {\r\n            result.soundFormatCharge += soundFormatCharge.price;\r\n        });\r\n        movieTicketTypeCharges.forEach((movieTicketTypeCharge) => {\r\n            result.movieTicketTypeCharge += movieTicketTypeCharge.price;\r\n        });\r\n        result.total = result.unitPriceSpecification + result.videoFormatCharge + result.soundFormatCharge + result.movieTicketTypeCharge;\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\n/**\r\n * IReservationSeat\r\n */\r\nexport interface IReservationSeat {\r\n    seatNumber: string;\r\n    seatSection: string;\r\n}\r\n\r\n/**\r\n * IReservationTicket\r\n */\r\nexport interface IReservationTicket {\r\n    ticketOffer: factory.chevre.event.screeningEvent.ITicketOffer;\r\n    movieTicket?: IMovieTicket;\r\n}\r\n","/**\r\n * DurationPipe\r\n */\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\nimport * as moment from 'moment';\r\n\r\n@Pipe({\r\n    name: 'duration'\r\n})\r\nexport class DurationPipe implements PipeTransform {\r\n\r\n    /**\r\n     * 変換\r\n     * @method transform\r\n     * @param {any} value\r\n     * @param {string} format 単位\r\n     */\r\n    public transform(value: any, format: string): number {\r\n        let result: number;\r\n        switch (format) {\r\n            case 'milliseconds':\r\n                result = moment.duration(value).asMilliseconds();\r\n                break;\r\n            case 'seconds':\r\n                result = moment.duration(value).asSeconds();\r\n                break;\r\n            case 'minutes':\r\n                result = moment.duration(value).asMinutes();\r\n                break;\r\n            case 'hours':\r\n                result = moment.duration(value).asHours();\r\n                break;\r\n            case 'days':\r\n                result = moment.duration(value).asDays();\r\n                break;\r\n            case 'weeks':\r\n                result = moment.duration(value).asWeeks();\r\n                break;\r\n            case 'months':\r\n                result = moment.duration(value).asMonths();\r\n                break;\r\n            case 'years':\r\n                result = moment.duration(value).asYears();\r\n                break;\r\n            default:\r\n                result = moment.duration(value).asMilliseconds();\r\n                break;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport * as libphonenumber from 'libphonenumber-js';\r\n\r\n@Pipe({\r\n    name: 'libphonenumberFormat'\r\n})\r\nexport class LibphonenumberFormatPipe implements PipeTransform {\r\n\r\n    /**\r\n     * 電話番号変換\r\n     * @method transform\r\n     * @param {string} phoneNumber\r\n     * @param {string} countryCode\r\n     */\r\n    public transform(\r\n        phoneNumber: string,\r\n        countryCode?: libphonenumber.CountryCode,\r\n        format?: IFormat): string {\r\n        countryCode = (countryCode === undefined) ? 'JP' : countryCode;\r\n        format = (format === undefined) ? 'National' : format;\r\n        const parsedNumber = libphonenumber.parse(phoneNumber, countryCode);\r\n        return libphonenumber.format(parsedNumber, format).replace(/\\-/g, '');\r\n    }\r\n}\r\n\r\ntype IFormat = 'International' | 'E.164' | 'National' | 'RFC3966';\r\n","/**\r\n * TimeFormatPipe\r\n */\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\nimport * as moment from 'moment';\r\n\r\n@Pipe({\r\n    name: 'timeFormat'\r\n})\r\nexport class TimeFormatPipe implements PipeTransform {\r\n\r\n    /**\r\n     * 時間変換\r\n     * @method transform\r\n     * @param {Date | string} screeningTime\r\n     * @param {string} referenceDate\r\n     */\r\n    // public transform(screeningTime: Date | string, referenceDate: string | Date): string {\r\n    //     const HOUR = 60;\r\n    //     const DIGITS = -2;\r\n    //     const diff = moment(screeningTime).diff(moment(referenceDate), 'minutes');\r\n    //     const hour = (`00${Math.floor(diff / HOUR)}`).slice(DIGITS);\r\n    //     const minutes = moment(screeningTime).format('mm');\r\n\r\n    //     return `${hour}:${minutes}`;\r\n    // }\r\n\r\n    /**\r\n     * 時間変換\r\n     * @method transform\r\n     * @param {Date | string} screeningTime\r\n     * @param {string} referenceDate\r\n     */\r\n    public transform(time: Date | string): string {\r\n        const mm = moment(time).tz('Asia/Tokyo');\r\n        const hour = mm.format('HH');\r\n        const minutes = mm.format('mm');\r\n\r\n        return `${hour}:${minutes}`;\r\n    }\r\n}\r\n","/**\r\n * AwsCognitoService\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport * as AWS from 'aws-sdk';\r\nimport * as moment from 'moment';\r\nimport { environment } from '../../../environments/environment';\r\nimport { SaveType, StorageService } from '../storage/storage.service';\r\n\r\n@Injectable()\r\nexport class AwsCognitoService {\r\n    public static REGION: string = environment.COGNITO_REGION;\r\n    public static IDENTITY_POOL_ID: string = environment.COGNITO_IDENTITY_POOL_ID;\r\n    public static USER_POOL_ID: string = environment.COGNITO_USER_POOL_ID;\r\n    public static CLIENT_ID: string = environment.COGNITO_CLIENT_ID;\r\n\r\n    public credentials: AWS.CognitoIdentityCredentials;\r\n\r\n    constructor(\r\n        private storage: StorageService\r\n    ) {\r\n    }\r\n\r\n    /**\r\n     * 端末IDで認証\r\n     * @method authenticateWithDeviceId\r\n     * @returns {Promise<void>}\r\n     */\r\n    public async authenticateWithDeviceId(deviceId?: string): Promise<void> {\r\n        if (this.isAuthenticate()) {\r\n            return;\r\n        }\r\n        AWS.config.region = AwsCognitoService.REGION;\r\n        if (deviceId !== undefined) {\r\n            this.storage.save('device', { id: deviceId }, SaveType.Session);\r\n            AWS.config.credentials = new AWS.CognitoIdentityCredentials({\r\n                IdentityPoolId: AwsCognitoService.IDENTITY_POOL_ID,\r\n                IdentityId: deviceId\r\n            });\r\n        } else {\r\n            AWS.config.credentials = new AWS.CognitoIdentityCredentials({\r\n                IdentityPoolId: AwsCognitoService.IDENTITY_POOL_ID\r\n            });\r\n        }\r\n        this.credentials = (<AWS.CognitoIdentityCredentials>AWS.config.credentials);\r\n        await this.credentials.getPromise();\r\n    }\r\n\r\n    /**\r\n     * 認証確認\r\n     * @method isAuthenticate\r\n     * @returns {boolean}\r\n     */\r\n    public isAuthenticate(): boolean {\r\n        return (this.credentials !== undefined\r\n            && this.credentials.identityId !== undefined\r\n            && this.credentials.identityId.length > 0);\r\n    }\r\n\r\n    /**\r\n     * レコード更新\r\n     * @param {string} datasetName\r\n     * @param {value} value\r\n     * @returns {Promise<any>}\r\n     */\r\n    public async updateRecords(args: {\r\n        datasetName: string;\r\n        value: any;\r\n    }): Promise<any> {\r\n        if (this.credentials === undefined) {\r\n            throw new Error('credentials is undefined');\r\n        }\r\n        await this.credentials.getPromise();\r\n        const cognitoSync = new AWS.CognitoSync({\r\n            credentials: this.credentials\r\n        });\r\n        const listRecords = await cognitoSync.listRecords({\r\n            DatasetName: args.datasetName,\r\n            IdentityId: this.credentials.identityId,\r\n            IdentityPoolId: AwsCognitoService.IDENTITY_POOL_ID,\r\n            LastSyncCount: 0\r\n        }).promise();\r\n        if (listRecords.DatasetSyncCount === undefined\r\n            || listRecords.SyncSessionToken === undefined) {\r\n            throw new Error('listRecords: Records or DatasetSyncCount or SyncSessionToken is undefined');\r\n        }\r\n        if (listRecords.Records === undefined) {\r\n            listRecords.Records = [];\r\n        }\r\n        args.value.updateAt = moment().toISOString();\r\n        const mergeValue = this.convertToObjects(listRecords.Records);\r\n        Object.assign(mergeValue, args.value);\r\n\r\n        const updateRecords = await cognitoSync.updateRecords({\r\n            DatasetName: args.datasetName,\r\n            IdentityId: this.credentials.identityId,\r\n            IdentityPoolId: AwsCognitoService.IDENTITY_POOL_ID,\r\n            SyncSessionToken: listRecords.SyncSessionToken,\r\n            RecordPatches: this.convertToRecords(mergeValue, listRecords.DatasetSyncCount)\r\n        }).promise();\r\n        if (updateRecords.Records === undefined) {\r\n            updateRecords.Records = [];\r\n        }\r\n\r\n        return this.convertToObjects(updateRecords.Records);\r\n    }\r\n\r\n    /**\r\n     * レコード取得\r\n     * @param {string} datasetName\r\n     * @returns {Promise<any>}\r\n     */\r\n    public async getRecords(args: { datasetName: string; }): Promise<any> {\r\n        if (this.credentials === undefined) {\r\n            throw new Error('credentials is undefined');\r\n        }\r\n        await this.credentials.getPromise();\r\n        const cognitoSync = new AWS.CognitoSync({\r\n            credentials: this.credentials\r\n        });\r\n        const listRecords = await cognitoSync.listRecords({\r\n            DatasetName: args.datasetName,\r\n            IdentityId: this.credentials.identityId,\r\n            IdentityPoolId: AwsCognitoService.IDENTITY_POOL_ID,\r\n            LastSyncCount: 0\r\n        }).promise();\r\n        if (listRecords.Records === undefined) {\r\n            listRecords.Records = [];\r\n        }\r\n        // console.log('getRecords', this.convertToObjects(listRecords.Records));\r\n\r\n        return (<any>this.convertToObjects(listRecords.Records));\r\n    }\r\n\r\n    /**\r\n     * レコードの形式へ変換\r\n     * @param {any} value\r\n     * @param {number} count\r\n     * @returns {{ Key: string; Op: string; SyncCount: number; Value: string; }[]}\r\n     */\r\n    private convertToRecords(value: any, count: number): {\r\n        Key: string;\r\n        Op: string;\r\n        SyncCount: number;\r\n        Value: string;\r\n    }[] {\r\n        return Object.keys(value).map((key: string) => {\r\n            return {\r\n                Key: key,\r\n                Op: 'replace',\r\n                SyncCount: count,\r\n                Value: JSON.stringify(value[key])\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * オブジェクトの形式へ変換\r\n     * @param {any[]} records\r\n     * @param {number} count\r\n     * @returns {Object}\r\n     */\r\n    private convertToObjects(records: any[]): Object {\r\n        const result: any = {};\r\n        records.forEach((record: {\r\n            Key: string;\r\n            Op: string;\r\n            SyncCount: number;\r\n            Value: string;\r\n        }) => {\r\n            result[record.Key] = JSON.parse(record.Value);\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n}\r\n","/**\r\n * CallNativeService\r\n */\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class CallNativeService {\r\n\r\n    constructor() { }\r\n\r\n    /**\r\n     * @method postMessage\r\n     * @param data {any}\r\n     */\r\n    private postMessage(data: any) {\r\n        const TARGET_VIEW = 'mainView';\r\n        try {\r\n            const json: string = JSON.stringify(data);\r\n            (<any>window).wizViewMessenger.postMessage(json, TARGET_VIEW);\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * inAppBrowser呼び出し\r\n     * @method postMessage\r\n     * @param args {IinAppBrowserArgs}\r\n     */\r\n    public inAppBrowser(args: IinAppBrowserArgs) {\r\n        try {\r\n            const data = {\r\n                method: 'inAppBrowser',\r\n                option: args\r\n            };\r\n            this.postMessage(data);\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * localNotification呼び出し\r\n     * @method localNotification\r\n     * @param args {IlocalNotificationArgs}\r\n     */\r\n    public localNotification(args: IlocalNotificationArgs) {\r\n        try {\r\n            const data = {\r\n                method: 'localNotification',\r\n                option: args\r\n            };\r\n            this.postMessage(data);\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * URLの読み込み先として使用するブラウザーの種別。\r\n */\r\nexport enum InAppBrowserTarget {\r\n    /**\r\n     * ホワイトリストに対象の URL が登録されている場合には、Cordova WebView を開きます。それ以外の場合には、InAppBrowser を開きます。\r\n     */\r\n    Self = '_self',\r\n    /**\r\n     * InAppBrowser を開きます。\r\n     */\r\n    Blank = '_blank',\r\n    /**\r\n     * システム標準の Web ブラウザー ( system’s web browser ) を開きます。\r\n     */\r\n    System = '_system'\r\n}\r\n\r\n/**\r\n * IinAppBrowserArgs\r\n */\r\nexport interface IinAppBrowserArgs {\r\n    /**\r\n     * URL\r\n     */\r\n    url: string;\r\n    /**\r\n     * URLの読み込み先として使用するブラウザーの種別（デフォルトはシステム標準の Web ブラウザー）\r\n     */\r\n    target?: InAppBrowserTarget;\r\n}\r\n\r\n/**\r\n * localNotificationArgs\r\n */\r\nexport interface IlocalNotificationArgs {\r\n    /**\r\n     * ID\r\n     */\r\n    id: number;\r\n    /**\r\n     * タイトル\r\n     */\r\n    title: string;\r\n    /**\r\n     * テキスト\r\n     */\r\n    text: string;\r\n    /**\r\n     * 通知トリガー\r\n     */\r\n    trigger?: {\r\n        /**\r\n         * 通知を送る時間（ISO）\r\n         */\r\n        at: string\r\n    };\r\n    /**\r\n     * アイコンの画像パス\r\n     */\r\n    icon?: string;\r\n    /**\r\n     * スモールアイコンの画像パス\r\n     */\r\n    smallIcon?: string;\r\n    /**\r\n     * 前面表示（デフォルトは前面表示しない）\r\n     */\r\n    foreground?: boolean;\r\n}\r\n\r\n","import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport * as cinerino from '@toei-jp/cinerino-api-javascript-client';\r\nimport 'rxjs/add/operator/toPromise';\r\nimport { environment } from '../../../environments/environment';\r\nimport { SaveType, StorageService } from '../storage/storage.service';\r\n\r\n@Injectable()\r\nexport class CinerinoService {\r\n    public auth: cinerino.IImplicitGrantClient;\r\n    public event: cinerino.service.Event;\r\n    public order: cinerino.service.Order;\r\n    public organization: cinerino.service.Organization;\r\n    public person: cinerino.service.Person;\r\n    public personOwnershipInfo: cinerino.service.person.OwnershipInfo;\r\n    public payment: cinerino.service.Payment;\r\n    public transaction: {\r\n        placeOrder: cinerino.service.transaction.PlaceOrder\r\n    };\r\n\r\n    constructor(\r\n        private http: HttpClient,\r\n        private storage: StorageService\r\n    ) { }\r\n\r\n    /**\r\n     * getServices\r\n     */\r\n    public async getServices(): Promise<void> {\r\n        try {\r\n            const option = await this.createOption();\r\n            this.event = new cinerino.service.Event(option);\r\n            this.order = new cinerino.service.Order(option);\r\n            this.organization = new cinerino.service.Organization(option);\r\n            this.person = new cinerino.service.Person(option);\r\n            this.payment = new cinerino.service.Payment(option);\r\n            this.transaction = {\r\n                placeOrder: new cinerino.service.transaction.PlaceOrder(option)\r\n            };\r\n            console.log(this);\r\n        } catch (err) {\r\n            console.error(err);\r\n            throw new Error('getServices is failed');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method createOption\r\n     */\r\n    public async createOption() {\r\n        await this.authorize();\r\n        return {\r\n            endpoint: environment.CINERINO_API_ENDPOINT,\r\n            auth: this.auth\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @method authorize\r\n     */\r\n    public async authorize() {\r\n        const user = this.storage.load('user', SaveType.Session);\r\n        const member = user.memberType;\r\n        const url = '/api/authorize/getCredentials';\r\n        const options = {\r\n            headers: new HttpHeaders({\r\n                'Pragma': 'no-cache',\r\n                'Cache-Control': 'no-cache',\r\n                'If-Modified-Since': new Date(0).toUTCString()\r\n            }),\r\n            params: new HttpParams().set('member', member)\r\n        };\r\n        const credentials = await this.http.get<any>(url, options).toPromise();\r\n        const option = {\r\n            domain: '',\r\n            clientId: '',\r\n            redirectUri: '',\r\n            logoutUri: '',\r\n            responseType: '',\r\n            scope: '',\r\n            state: '',\r\n            nonce: null,\r\n            tokenIssuer: ''\r\n        };\r\n        this.auth = cinerino.createAuthInstance(option);\r\n        this.auth.setCredentials(credentials);\r\n    }\r\n\r\n    /**\r\n     * サインイン\r\n     */\r\n    public async signIn() {\r\n        const url = '/api/authorize/signIn';\r\n        const result = await this.http.get<any>(url, {}).toPromise();\r\n        // console.log(result.url);\r\n        location.href = result.url;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\n@Injectable()\r\nexport class ErrorService {\r\n    public errorDetail: any;\r\n\r\n    constructor(private router: Router) { }\r\n\r\n    public redirect(error: any) {\r\n        console.error(error);\r\n        this.errorDetail = error;\r\n        this.router.navigate(['/error']);\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate } from '@angular/router';\r\nimport { ErrorService } from '../error/error.service';\r\nimport { UserService } from '../user/user.service';\r\n\r\n@Injectable()\r\nexport class MemberGuardService implements CanActivate {\r\n\r\n    constructor(\r\n        private user: UserService,\r\n        private error: ErrorService\r\n    ) { }\r\n\r\n    /**\r\n     * 認証\r\n     * @method canActivate\r\n     */\r\n    public async canActivate() {\r\n        if (!this.user.isMember()) {\r\n            this.error.redirect(new Error('非会員で使用することはできません。'));\r\n\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, Router } from '@angular/router';\r\nimport * as moment from 'moment';\r\nimport { PurchaseService } from '../purchase/purchase.service';\r\n\r\n@Injectable()\r\nexport class PurchaseGuardService implements CanActivate {\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private purchase: PurchaseService\r\n    ) { }\r\n\r\n    public canActivate(): boolean {\r\n        if (this.purchase.data === undefined\r\n            || this.purchase.data.transaction === undefined) {\r\n            // console.log('transaction is undefined');\r\n            this.router.navigate(['/error']);\r\n\r\n            return false;\r\n        }\r\n        const expires = moment(this.purchase.data.transaction.expires).unix();\r\n        if (expires < moment().unix()) {\r\n            // console.log('transaction is expired');\r\n            this.router.navigate(['/expired']);\r\n\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as factory from '@toei-jp/cinerino-factory';\r\nimport * as moment from 'moment';\r\nimport { IReservationTicket, Reservation } from '../../models';\r\nimport { TimeFormatPipe } from '../../pipes/time-format/time-format.pipe';\r\nimport { CinerinoService } from '../cinerino/cinerino.service';\r\nimport { SaveType, StorageService } from '../storage/storage.service';\r\n\r\ndeclare const ga: Function;\r\n\r\nexport type ICustomerContact = factory.transaction.placeOrder.ICustomerContact;\r\nexport type ISalesTicketResult = factory.chevre.event.screeningEvent.ITicketOffer;\r\ntype IUnauthorizedCardOfMember = factory.paymentMethod.paymentCard.creditCard.IUnauthorizedCardOfMember;\r\ntype IUncheckedCardTokenized = factory.paymentMethod.paymentCard.creditCard.IUncheckedCardTokenized;\r\n\r\nexport interface IOffer {\r\n    price: number;\r\n    priceCurrency: string;\r\n    seatNumber: string;\r\n    seatSection: string;\r\n    selected: boolean;\r\n    validation: boolean;\r\n    ticketInfo: {\r\n        mvtkNum: string;\r\n        ticketId: string,\r\n        ticketName: { en: string, ja: string };\r\n        description: { en: string, ja: string };\r\n        charge: number,\r\n        mvtkAppPrice: number;\r\n        kbnEisyahousiki: string;\r\n        mvtkKbnDenshiken: string;\r\n        mvtkKbnMaeuriken: string;\r\n        mvtkKbnKensyu: string;\r\n        mvtkSalesPrice: number;\r\n        seatNum: string;\r\n        ticketCount: number,\r\n    };\r\n}\r\n\r\ninterface IData {\r\n    /**\r\n     * 取引\r\n     */\r\n    transaction?: factory.transaction.placeOrder.ITransaction;\r\n    /**\r\n     * 上映イベント\r\n     */\r\n    screeningEvent?: factory.chevre.event.screeningEvent.IEvent;\r\n    /**\r\n     * 劇場ショップ\r\n     */\r\n    movieTheaterOrganization?: factory.organization.movieTheater.IOrganization;\r\n    /**\r\n     * 販売可能チケット情報\r\n     */\r\n    salesTickets: ISalesTicketResult[];\r\n    /**\r\n     * 予約座席\r\n     */\r\n    seatReservationAuthorization?: factory.action.authorize.offer.seatReservation.IAction;\r\n    /**\r\n     * オーダー回数\r\n     */\r\n    orderCount: number;\r\n    /**\r\n     * GMOトークンオブジェクト\r\n     */\r\n    gmoTokenObject?: IGmoTokenObject;\r\n    /**\r\n     * 支払いクレジットカード\r\n     */\r\n    paymentCreditCard?: IUnauthorizedCardOfMember | IUncheckedCardTokenized;\r\n    /**\r\n     * クレジットカードエラー\r\n     */\r\n    isCreditCardError: boolean;\r\n    /**\r\n     * 決済情報（クレジット）\r\n     */\r\n    creditCardAuthorization?: {\r\n        id: string;\r\n    };\r\n    /**\r\n     * 購入者情報\r\n     */\r\n    customerContact?: ICustomerContact;\r\n    /**\r\n     * ムビチケ券種情報\r\n     */\r\n    mvtkTickets: factory.action.check.paymentMethod.movieTicket.IAction[];\r\n    /**\r\n     * 予約リスト\r\n     */\r\n    reservations: Reservation[];\r\n    /**\r\n     * ムビチケ承認情報\r\n     */\r\n    authorizeMovieTicketPayment?: factory.action.authorize.paymentMethod.movieTicket.IAction;\r\n}\r\n\r\nexport interface IGmoTokenObject {\r\n    token: string;\r\n    toBeExpiredAt: string;\r\n    maskedCardNo: string;\r\n    isSecurityCodeSet: boolean;\r\n}\r\n\r\n/**\r\n * インセンティブ\r\n */\r\n/*enum Incentive {\r\n    WatchingMovies = 1\r\n}*/\r\n\r\n@Injectable()\r\nexport class PurchaseService {\r\n\r\n    public data: IData;\r\n\r\n    constructor(\r\n        private storage: StorageService,\r\n        private cinerino: CinerinoService\r\n    ) {\r\n        this.load();\r\n    }\r\n\r\n    /**\r\n     * 読み込み\r\n     * @method load\r\n     */\r\n    public load() {\r\n        const data: IData | null = this.storage.load('purchase', SaveType.Session);\r\n        if (data === null) {\r\n            this.data = {\r\n                salesTickets: [],\r\n                mvtkTickets: [],\r\n                // pointTickets: [],\r\n                orderCount: 0,\r\n                // incentive: 0,\r\n                isCreditCardError: false,\r\n                reservations: []\r\n            };\r\n\r\n            return;\r\n        }\r\n        const reservations = data.reservations.map(reservation => new Reservation(reservation));\r\n        data.reservations = reservations;\r\n        this.data = data;\r\n    }\r\n\r\n    /**\r\n     * 保存\r\n     * @method save\r\n     */\r\n    public save() {\r\n        this.storage.save('purchase', this.data, SaveType.Session);\r\n    }\r\n\r\n    /**\r\n     * リセット\r\n     * @method reset\r\n     */\r\n    public reset() {\r\n        this.data = {\r\n            salesTickets: [],\r\n            mvtkTickets: [],\r\n            // pointTickets: [],\r\n            orderCount: 0,\r\n            // incentive: 0,\r\n            isCreditCardError: false,\r\n            reservations: []\r\n\r\n        };\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * 期限切れ\r\n     * @method isExpired\r\n     */\r\n    public isExpired() {\r\n        if (this.data.transaction === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        const expires = moment(this.data.transaction.expires).unix();\r\n        const now = moment().unix();\r\n        let result = false;\r\n        if (expires < now) {\r\n            result = true;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 販売可能時間判定\r\n     * @method isSalesTime\r\n     * @param {factory.chevre.event.screeningEvent.IEvent} screeningEvent\r\n     * @returns {boolean}\r\n     */\r\n    public isSalesTime(screeningEvent: factory.chevre.event.screeningEvent.IEvent): boolean {\r\n        const END_TIME = 30; // 30分前\r\n\r\n        return (moment().unix() < moment(screeningEvent.startDate).subtract(END_TIME, 'minutes').unix());\r\n    }\r\n\r\n    /**\r\n     * 販売可能判定\r\n     * @method isSales\r\n     * @param {factory.chevre.event.screeningEvent.IEvent} screeningEvent\r\n     * @returns {boolean}\r\n     */\r\n    public isSales(screeningEvent: factory.chevre.event.screeningEvent.IEvent): boolean {\r\n        // const PRE_SALE = '1'; // 先行販売\r\n\r\n        // return (moment(screeningEvent.info.rsvStartDate).unix() <= moment().unix()\r\n        //     || screeningEvent.info.flgEarlyBooking === PRE_SALE);\r\n        if (screeningEvent.saleStartDate === undefined) {\r\n            // 一旦true\r\n            return true;\r\n        }\r\n        return moment(screeningEvent.saleStartDate).unix() <= moment().unix();\r\n    }\r\n\r\n    /**\r\n     * オンライン表示判定\r\n     * @method isOnlineDisplay\r\n     * @param {factory.chevre.event.screeningEvent.IEvent} screeningEvent\r\n     * @returns {boolean}\r\n     */\r\n    public isOnlineDisplay(screeningEvent: factory.chevre.event.screeningEvent.IEvent): boolean {\r\n        if (screeningEvent.onlineDisplayStartDate === undefined) {\r\n            // 一旦true\r\n            return true;\r\n        }\r\n        return moment(screeningEvent.onlineDisplayStartDate).unix() <= moment().unix();\r\n    }\r\n\r\n    /**\r\n     * 劇場名取得\r\n     * @method getTheaterName\r\n     * @returns {string}\r\n     */\r\n    public getTheaterName(): string {\r\n        if (this.data.screeningEvent === undefined) {\r\n            return '';\r\n        }\r\n        const screeningEvent = this.data.screeningEvent;\r\n\r\n        return screeningEvent.superEvent.location.name.ja;\r\n    }\r\n\r\n    /**\r\n     * スクリーン名取得\r\n     * @method getScreenName\r\n     * @returns {string}\r\n     */\r\n    public getScreenName(): string {\r\n        if (this.data.screeningEvent === undefined) {\r\n            return '';\r\n        }\r\n        const screeningEvent = this.data.screeningEvent;\r\n\r\n        return screeningEvent.location.name.ja;\r\n    }\r\n\r\n    /**\r\n     * 作品名取得\r\n     * @method getTitle\r\n     * @returns {string}\r\n     */\r\n    public getTitle(): string {\r\n        if (this.data.screeningEvent === undefined) {\r\n            return '';\r\n        }\r\n        const screeningEvent = this.data.screeningEvent;\r\n\r\n        return screeningEvent.name.ja;\r\n    }\r\n\r\n    /**\r\n     * 鑑賞日取得\r\n     * @method getAppreciationDate\r\n     * @returns {string}\r\n     */\r\n    public getAppreciationDate(): string {\r\n        if (this.data.screeningEvent === undefined) {\r\n            return '';\r\n        }\r\n        const screeningEvent = this.data.screeningEvent;\r\n        moment.locale('ja');\r\n\r\n        return moment(screeningEvent.startDate).format('YYYY年MM月DD日(ddd)');\r\n    }\r\n\r\n    /**\r\n     * 上映開始時間取得\r\n     * @method getStartDate\r\n     * @returns {string}\r\n     */\r\n    public getStartDate(): string {\r\n        if (this.data.screeningEvent === undefined) {\r\n            return '';\r\n        }\r\n        return new TimeFormatPipe().transform(this.data.screeningEvent.startDate);\r\n    }\r\n\r\n    /**\r\n     * 上映終了取得\r\n     * @method getEndDate\r\n     * @returns {string}\r\n     */\r\n    public getEndDate(): string {\r\n        if (this.data.screeningEvent === undefined) {\r\n            return '';\r\n        }\r\n        return new TimeFormatPipe().transform(this.data.screeningEvent.endDate);\r\n    }\r\n\r\n    /**\r\n     * 合計金額計算\r\n     * @method getTotalPrice\r\n     */\r\n    public getTotalPrice(): number {\r\n        let result = 0;\r\n        const selectedReservations = this.data.reservations.filter((reservation) => {\r\n            return (reservation.ticket !== undefined);\r\n        });\r\n        selectedReservations.forEach((reservation) => {\r\n            if (reservation.ticket === undefined) {\r\n                return;\r\n            }\r\n            result += reservation.getTicketPrice().total;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * ムビチケ合計金額計算\r\n     * @method getTotalPrice\r\n     */\r\n    public getMvtkTotalPrice(): number {\r\n        let result = 0;\r\n        const selectedReservations = this.data.reservations.filter((reservation) => {\r\n            return (reservation.ticket !== undefined);\r\n        });\r\n        selectedReservations.forEach((reservation) => {\r\n            if (reservation.ticket === undefined) {\r\n                return;\r\n            }\r\n            result += reservation.getTicketPrice().movieTicketTypeCharge;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * ムビチケ対応作品判定\r\n     * @method isUsedMvtk\r\n     * @returns {boolean}\r\n     */\r\n    public isUsedMvtk(): boolean {\r\n        if (this.data.screeningEvent === undefined) {\r\n            return false;\r\n        }\r\n\r\n        return this.data.screeningEvent.superEvent.mvtkFlg === 1 &&\r\n            this.data.screeningEvent.mvtkExcludeFlg !== 1;\r\n    }\r\n\r\n    /**\r\n     * ムビチケでの予約判定\r\n     * @method isReserveMvtk\r\n     * @returns {boolean}\r\n     */\r\n    public isReserveMvtk(): boolean {\r\n        return (this.getMvtkTotalPrice() > 0);\r\n    }\r\n\r\n    /**\r\n     * 取引開始処理\r\n     * @method transactionStartProcess\r\n     */\r\n    public async transactionStartProcess(args: {\r\n        passportToken: string;\r\n        screeningEvent: factory.chevre.event.screeningEvent.IEvent\r\n    }) {\r\n        // 購入データ削除\r\n        this.reset();\r\n        this.data.screeningEvent = args.screeningEvent;\r\n        await this.cinerino.getServices();\r\n        // 劇場のショップを検索\r\n        this.data.movieTheaterOrganization = (await this.cinerino.organization.searchMovieTheaters({\r\n            location: { branchCodes: [this.data.screeningEvent.superEvent.location.branchCode] }\r\n        })).data[0];\r\n        // 取引期限\r\n        const VALID_TIME = 15;\r\n        const expires = moment().add(VALID_TIME, 'minutes').toDate();\r\n        // 取引開始\r\n        this.data.transaction = await this.cinerino.transaction.placeOrder.start({\r\n            expires: expires,\r\n            seller: {\r\n                id: this.data.movieTheaterOrganization.id,\r\n                typeOf: this.data.movieTheaterOrganization.typeOf\r\n            },\r\n            object: {\r\n                passport: {\r\n                    token: args.passportToken\r\n                }\r\n            }\r\n        });\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * 座席開放処理\r\n     * @method cancelSeatRegistrationProcess\r\n     */\r\n    public async cancelSeatRegistrationProcess() {\r\n        if (this.data.transaction === undefined\r\n            || this.data.seatReservationAuthorization === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        const transaction = this.data.transaction;\r\n        const seatReservationAuthorization = this.data.seatReservationAuthorization;\r\n        await this.cinerino.getServices();\r\n        await this.cinerino.transaction.placeOrder.voidSeatReservation({\r\n            transactionId: transaction.id,\r\n            actionId: seatReservationAuthorization.id\r\n        });\r\n        this.data.seatReservationAuthorization = undefined;\r\n        this.reset();\r\n    }\r\n\r\n    /**\r\n     * 座席登録処理\r\n     * @method seatRegistrationProcess\r\n     */\r\n    public async seatRegistrationProcess() {\r\n        if (this.data.transaction === undefined\r\n            || this.data.screeningEvent === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        await this.cinerino.getServices();\r\n        // 予約中なら座席削除\r\n        if (this.data.seatReservationAuthorization !== undefined) {\r\n            await this.cinerino.transaction.placeOrder.voidSeatReservation({\r\n                transactionId: this.data.transaction.id,\r\n                actionId: this.data.seatReservationAuthorization.id\r\n            });\r\n            this.data.seatReservationAuthorization = undefined;\r\n            this.save();\r\n        }\r\n\r\n        this.data.seatReservationAuthorization =\r\n            await this.cinerino.transaction.placeOrder.authorizeSeatReservation({\r\n                transactionId: this.data.transaction.id,\r\n                event: {\r\n                    id: this.data.screeningEvent.id\r\n                },\r\n                notes: '',\r\n                clientUser: this.data.transaction.object.clientUser,\r\n                acceptedOffer: this.data.reservations.map((reservation) => ({\r\n                    ticketedSeat: {\r\n                        seatSection: reservation.seat.seatSection,\r\n                        seatNumber: reservation.seat.seatNumber,\r\n                        seatRow: '',\r\n                        seatingType: '',\r\n                        typeOf: factory.chevre.placeType.Seat\r\n                    },\r\n                    id: (<IReservationTicket>reservation.ticket).ticketOffer.id\r\n                }))\r\n            });\r\n        this.data.reservations.forEach((reservation) => {\r\n            reservation.ticket = undefined;\r\n        });\r\n        this.data.orderCount = 0;\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * 券種登録処理\r\n     * @method ticketRegistrationProcess\r\n     */\r\n    public async ticketRegistrationProcess() {\r\n        if (this.data.transaction === undefined\r\n            || this.data.screeningEvent === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        await this.cinerino.getServices();\r\n        // 予約中なら座席削除\r\n        if (this.data.seatReservationAuthorization !== undefined) {\r\n            await this.cinerino.transaction.placeOrder.voidSeatReservation({\r\n                transactionId: this.data.transaction.id,\r\n                actionId: this.data.seatReservationAuthorization.id\r\n            });\r\n            this.data.seatReservationAuthorization = undefined;\r\n            this.save();\r\n        }\r\n\r\n        this.data.seatReservationAuthorization =\r\n            await this.cinerino.transaction.placeOrder.authorizeSeatReservation({\r\n                transactionId: this.data.transaction.id,\r\n                event: {\r\n                    id: this.data.screeningEvent.id\r\n                },\r\n                notes: '',\r\n                clientUser: this.data.transaction.object.clientUser,\r\n                acceptedOffer: this.data.reservations.map((reservation) => ({\r\n                    ticketedSeat: {\r\n                        seatSection: reservation.seat.seatSection,\r\n                        seatNumber: reservation.seat.seatNumber,\r\n                        seatRow: '',\r\n                        seatingType: '',\r\n                        typeOf: factory.chevre.placeType.Seat\r\n                    },\r\n                    id: (<IReservationTicket>reservation.ticket).ticketOffer.id\r\n                }))\r\n            });\r\n        if (this.data.seatReservationAuthorization === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * 購入者情報登録処理\r\n     * @method customerContactRegistrationProcess\r\n     */\r\n    public async customerContactRegistrationProcess(args: factory.transaction.placeOrder.ICustomerContact) {\r\n        if (this.data.transaction === undefined) {\r\n            throw new Error('transaction is undefined');\r\n        }\r\n        await this.cinerino.getServices();\r\n        // 入力情報を登録\r\n        this.data.customerContact = await this.cinerino.transaction.placeOrder.setCustomerContact({\r\n            transactionId: this.data.transaction.id,\r\n            contact: args\r\n        });\r\n\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * クレジットカード支払い処理\r\n     */\r\n    public async creditCardPaymentProcess() {\r\n        if (this.data.transaction === undefined\r\n            || this.data.paymentCreditCard === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        await this.cinerino.getServices();\r\n        if (this.data.creditCardAuthorization !== undefined) {\r\n            // クレジットカード登録済みなら削除\r\n            const cancelCreditCardAuthorizationArgs = {\r\n                transactionId: this.data.transaction.id,\r\n                actionId: this.data.creditCardAuthorization.id\r\n            };\r\n            await this.cinerino.transaction.placeOrder.voidCreditCardPayment(cancelCreditCardAuthorizationArgs);\r\n            this.data.creditCardAuthorization = undefined;\r\n            this.save();\r\n        }\r\n        // クレジットカード登録\r\n        const METHOD_LUMP = '1';\r\n        this.data.creditCardAuthorization =\r\n            await this.cinerino.transaction.placeOrder.authorizeCreditCardPayment({\r\n                transactionId: this.data.transaction.id,\r\n                typeOf: factory.paymentMethodType.CreditCard,\r\n                orderId: this.createOrderId(),\r\n                amount: this.getTotalPrice(),\r\n                method: <any>METHOD_LUMP,\r\n                creditCard: this.data.paymentCreditCard\r\n            });\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * オーダーID生成\r\n     * @method createOrderId\r\n     */\r\n    private createOrderId() {\r\n        if (this.data.seatReservationAuthorization === undefined\r\n            || this.data.seatReservationAuthorization.result === undefined\r\n            || this.data.screeningEvent === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        const DIGITS = {\r\n            '02': -2,\r\n            '08': -8\r\n        };\r\n        const orderCount = `00${this.data.orderCount}`.slice(DIGITS['02']);\r\n        const tmpReserveNum =\r\n            `00000000${this.data.seatReservationAuthorization.id}`.slice(DIGITS['08']);\r\n        const theaterCode = this.data.screeningEvent.superEvent.location.branchCode;\r\n        const reserveDate = moment().format('YYYYMMDD');\r\n        this.data.orderCount += 1;\r\n        // オーダーID 予約日 + 劇場ID(3桁) + 予約番号(8桁) + オーソリカウント(2桁)\r\n        return `${reserveDate}${theaterCode}${tmpReserveNum}${orderCount}`;\r\n    }\r\n\r\n    /**\r\n     * 購入登録処理\r\n     */\r\n    public async purchaseRegistrationProcess() {\r\n        if (this.data.transaction === undefined\r\n            || this.data.screeningEvent === undefined\r\n            || this.data.seatReservationAuthorization === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        const transaction = this.data.transaction;\r\n        const screeningEvent = this.data.screeningEvent;\r\n        const authorizeSeatReservation = this.data.seatReservationAuthorization;\r\n        const reservations = this.data.reservations;\r\n        await this.cinerino.getServices();\r\n        let order: factory.order.IOrder;\r\n        if (this.isReserveMvtk()) {\r\n            if (this.data.authorizeMovieTicketPayment !== undefined) {\r\n                await this.cinerino.transaction.placeOrder.voidMovieTicketPayment({\r\n                    transactionId: transaction.id,\r\n                    actionId: this.data.authorizeMovieTicketPayment.id\r\n                });\r\n            }\r\n            // 決済方法として、ムビチケを追加する\r\n            this.data.authorizeMovieTicketPayment =\r\n                await this.cinerino.transaction.placeOrder.authorizeMovieTicketPayment({\r\n                    transactionId: transaction.id,\r\n                    typeOf: factory.paymentMethodType.MovieTicket,\r\n                    amount: 0,\r\n                    movieTickets: this.createMovieTicketsFromAuthorizeSeatReservation({\r\n                        authorizeSeatReservation, reservations\r\n                    })\r\n                });\r\n        }\r\n        // 取引確定\r\n        order = (await this.cinerino.transaction.placeOrder.confirm({\r\n            transactionId: transaction.id,\r\n            sendEmailMessage: true\r\n        })).order;\r\n        const complete = {\r\n            order,\r\n            transaction,\r\n            movieTheaterOrganization: this.data.movieTheaterOrganization\r\n        };\r\n        this.storage.save('complete', complete, SaveType.Session);\r\n\r\n        try {\r\n            // Google Analytics\r\n            const sendData = {\r\n                hitType: 'event',\r\n                eventCategory: 'purchase',\r\n                eventAction: 'complete',\r\n                eventLabel: `conversion-${screeningEvent.location.branchCode}`\r\n            };\r\n            ga('send', sendData);\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n\r\n        // 購入情報削除\r\n        this.reset();\r\n    }\r\n\r\n    /**\r\n     * 予約情報からムビチケ情報作成\r\n     */\r\n    private createMovieTicketsFromAuthorizeSeatReservation(args: {\r\n        authorizeSeatReservation: factory.action.authorize.offer.seatReservation.IAction;\r\n        reservations: Reservation[];\r\n    }) {\r\n        const results: factory.paymentMethod.paymentCard.movieTicket.IMovieTicket[] = [];\r\n        const authorizeSeatReservation = args.authorizeSeatReservation;\r\n        const reservations = args.reservations;\r\n        if (authorizeSeatReservation.result === undefined) {\r\n            return results;\r\n        }\r\n        const pendingReservations = authorizeSeatReservation.result.responseBody.object.reservations;\r\n\r\n        pendingReservations.forEach((pendingReservation) => {\r\n            const findReservationResult = reservations.find((reservation) => {\r\n                return (reservation.seat.seatNumber === pendingReservation.reservedTicket.ticketedSeat.seatNumber);\r\n            });\r\n            if (findReservationResult === undefined\r\n                || findReservationResult.ticket === undefined\r\n                || findReservationResult.ticket.movieTicket === undefined) {\r\n                return;\r\n            }\r\n\r\n            results.push({\r\n                typeOf: factory.paymentMethodType.MovieTicket,\r\n                identifier: findReservationResult.ticket.movieTicket.identifier,\r\n                accessCode: findReservationResult.ticket.movieTicket.accessCode,\r\n                serviceType: findReservationResult.ticket.movieTicket.serviceType,\r\n                serviceOutput: {\r\n                    reservationFor: {\r\n                        typeOf: pendingReservation.reservationFor.typeOf,\r\n                        id: pendingReservation.reservationFor.id\r\n                    },\r\n                    reservedTicket: { ticketedSeat: pendingReservation.reservedTicket.ticketedSeat }\r\n                }\r\n            });\r\n        });\r\n\r\n        return results;\r\n    }\r\n\r\n    /**\r\n     * ムビチケ認証処理\r\n     */\r\n    public async mvtkAuthenticationProcess(movieTickets: {\r\n        knyknrNo: string;\r\n        pinCd: string;\r\n    }[]) {\r\n        if (this.data.screeningEvent === undefined\r\n            || this.data.transaction === undefined) {\r\n            throw new Error('status is different');\r\n        }\r\n        await this.cinerino.getServices();\r\n        const transaction = this.data.transaction;\r\n        const screeningEvent = this.data.screeningEvent;\r\n\r\n        const checkMovieTicketAction = await this.cinerino.payment.checkMovieTicket({\r\n            typeOf: factory.paymentMethodType.MovieTicket,\r\n            movieTickets: movieTickets.map((movieTicket) => {\r\n                const result: factory.paymentMethod.paymentCard.movieTicket.IMovieTicket = {\r\n                    typeOf: <any>factory.paymentMethodType.MovieTicket,\r\n                    identifier: movieTicket.knyknrNo,\r\n                    accessCode: movieTicket.pinCd,\r\n                    serviceType: '', // 情報空でよし\r\n                    serviceOutput: {\r\n                        reservationFor: {\r\n                            typeOf: screeningEvent.typeOf,\r\n                            id: screeningEvent.id\r\n                        },\r\n                        reservedTicket: {\r\n                            ticketedSeat: {\r\n                                typeOf: factory.chevre.placeType.Seat,\r\n                                seatingType: '', // 情報空でよし\r\n                                seatNumber: '', // 情報空でよし\r\n                                seatRow: '', // 情報空でよし\r\n                                seatSection: '' // 情報空でよし\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n\r\n                return result;\r\n            }),\r\n            seller: {\r\n                typeOf: transaction.seller.typeOf,\r\n                id: transaction.seller.id\r\n            }\r\n        });\r\n\r\n        this.data.mvtkTickets = [checkMovieTicketAction];\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * 券種金額取得\r\n     */\r\n    public getTicketPrice(ticket: ISalesTicketResult) {\r\n        const result = {\r\n            unitPriceSpecification: 0,\r\n            videoFormatCharge: 0,\r\n            soundFormatCharge: 0,\r\n            movieTicketTypeCharge: 0,\r\n            total: 0\r\n        };\r\n        const unitPriceSpecifications = ticket.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.UnitPriceSpecification);\r\n        const videoFormatCharges = ticket.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.VideoFormatChargeSpecification);\r\n        const soundFormatCharges = ticket.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.SoundFormatChargeSpecification);\r\n        const movieTicketTypeCharges = ticket.priceSpecification.priceComponent\r\n            .filter((s) => s.typeOf === factory.chevre.priceSpecificationType.MovieTicketTypeChargeSpecification);\r\n\r\n        unitPriceSpecifications.forEach((unitPriceSpecification) => {\r\n            result.unitPriceSpecification += unitPriceSpecification.price;\r\n        });\r\n        videoFormatCharges.forEach((videoFormatCharge) => {\r\n            result.videoFormatCharge += videoFormatCharge.price;\r\n        });\r\n        soundFormatCharges.forEach((soundFormatCharge) => {\r\n            result.soundFormatCharge += soundFormatCharge.price;\r\n        });\r\n        movieTicketTypeCharges.forEach((movieTicketTypeCharge) => {\r\n            result.movieTicketTypeCharge += movieTicketTypeCharge.price;\r\n        });\r\n        result.total = result.unitPriceSpecification + result.videoFormatCharge + result.soundFormatCharge + result.movieTicketTypeCharge;\r\n\r\n        return result;\r\n    }\r\n}\r\n","/**\r\n * StorageService\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport * as moment from 'moment';\r\n\r\nexport enum SaveType {\r\n    /**\r\n     * セッションへ保存\r\n     */\r\n    Session = 0,\r\n    /**\r\n     * ローカルへ保存\r\n     */\r\n    Local = 1\r\n}\r\n\r\n@Injectable()\r\nexport class StorageService {\r\n\r\n    constructor() {}\r\n\r\n    public load(key: string, saveType?: SaveType): any {\r\n        const storage = (saveType === SaveType.Session) ? sessionStorage : localStorage;\r\n        const value = storage.getItem(key);\r\n\r\n        return (value !== null) ? JSON.parse(value) : null;\r\n    }\r\n\r\n    public save(key: string, value: any, saveType?: SaveType): void {\r\n        value.updateAt = moment().toISOString();\r\n        const storage = (saveType === SaveType.Session) ? sessionStorage : localStorage;\r\n        try {\r\n            storage.setItem(key, JSON.stringify(value));\r\n        } catch (err) {\r\n            console.error('StorageService.save', err);\r\n        }\r\n    }\r\n\r\n    public remove(key: string, saveType?: SaveType): void {\r\n        const storage = (saveType === SaveType.Session) ? sessionStorage : localStorage;\r\n        storage.removeItem(key);\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, Router } from '@angular/router';\r\nimport { environment } from '../../../environments/environment';\r\n\r\n@Injectable()\r\nexport class TestGuardService implements CanActivate {\r\n\r\n    constructor(\r\n        private router: Router\r\n    ) { }\r\n\r\n    public canActivate(): boolean {\r\n        if (environment.production) {\r\n            this.router.navigate(['/error']);\r\n\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { factory } from '@toei-jp/cinerino-api-javascript-client';\r\n// import { CinerinoService } from '../cinerino/cinerino.service';\r\nimport { SaveType, StorageService } from '../storage/storage.service';\r\n\r\n/**\r\n * ネイティブアプリフラグ\r\n */\r\nenum NativeAppFlg {\r\n    /**\r\n     * 非ネイティブアプリ\r\n     */\r\n    NotNative = '0',\r\n    /**\r\n     * ネイティブアプリ\r\n     */\r\n    Native = '1'\r\n}\r\n\r\n/**\r\n * 会員用フラグ\r\n */\r\nexport enum FlgMember {\r\n    /**\r\n     * 非会員\r\n     */\r\n    NonMember = '0',\r\n    /**\r\n     * 会員\r\n     */\r\n    Member = '1',\r\n}\r\n\r\nexport interface IData {\r\n    native: NativeAppFlg;\r\n    memberType: FlgMember;\r\n    contact?: factory.person.IProfile;\r\n    creditCards?: factory.paymentMethod.paymentCard.creditCard.ICheckedCard[];\r\n    accessToken?: string;\r\n    account?: factory.pecorino.account.IAccount<factory.accountType.Point>;\r\n}\r\n\r\n@Injectable()\r\nexport class UserService {\r\n    public data: IData;\r\n\r\n    constructor(\r\n        private storage: StorageService,\r\n        // private cinerino: CinerinoService\r\n    ) {\r\n        this.load();\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * 読み込み\r\n     * @method load\r\n     */\r\n    public load() {\r\n        const data: IData | null = this.storage.load('user', SaveType.Session);\r\n        if (data === null) {\r\n            this.data = {\r\n                native: NativeAppFlg.NotNative,\r\n                memberType: FlgMember.NonMember\r\n            };\r\n\r\n            return;\r\n        }\r\n        this.data = data;\r\n    }\r\n\r\n    /**\r\n     * 保存\r\n     * @method save\r\n     */\r\n    public save() {\r\n        this.storage.save('user', this.data, SaveType.Session);\r\n    }\r\n\r\n    /**\r\n     * リセット\r\n     * @method reset\r\n     */\r\n    public reset() {\r\n        this.data = {\r\n            native: NativeAppFlg.NotNative,\r\n            memberType: FlgMember.NonMember\r\n        };\r\n        this.save();\r\n    }\r\n\r\n    /**\r\n     * 会員初期化\r\n     */\r\n    /*public async initMember() {\r\n        this.data.memberType = FlgMember.Member;\r\n        this.save();\r\n        await this.cinerino.getServices();\r\n        // 連絡先取得\r\n        const contact = await this.cinerino.person.getContacts({\r\n            personId: 'me'\r\n        });\r\n        if (contact === undefined) {\r\n            throw new Error('contact is undefined');\r\n        }\r\n        this.data.contact = contact;\r\n\r\n        try {\r\n            // クレジットカード検索\r\n            const creditCards = await this.cinerino.personOwnershipInfo.searchCreditCards({\r\n                personId: 'me'\r\n            });\r\n            this.data.creditCards = creditCards;\r\n        } catch (err) {\r\n            console.error(err);\r\n            this.data.creditCards = [];\r\n        }\r\n\r\n        // 口座検索\r\n        let accounts = await this.cinerino.person.findAccounts({\r\n            personId: 'me'\r\n        });\r\n        accounts = accounts.filter((account) => {\r\n            return account.status === factory.pecorino.accountStatusType.Opened;\r\n        });\r\n        if (accounts.length === 0) {\r\n            // 口座開設\r\n            this.data.account = await this.cinerino.personOwnershipInfo.openAccount({\r\n                personId: 'me',\r\n                name: `${this.data.contact.familyName} ${this.data.contact.givenName}`\r\n            });\r\n        } else {\r\n            this.data.account = accounts[0];\r\n        }\r\n        // console.log('口座番号', this.data.account.accountNumber);\r\n\r\n        this.save();\r\n    }*/\r\n\r\n    /**\r\n     * クレジットカード登録判定\r\n     */\r\n    public isRegisteredCreditCards() {\r\n        return (this.data.creditCards !== undefined\r\n            && this.data.creditCards.length > 0);\r\n    }\r\n\r\n    /**\r\n     * ネイティブアプリ判定\r\n     */\r\n    public isNative() {\r\n        return (this.data.native === NativeAppFlg.Native);\r\n    }\r\n\r\n    /**\r\n     * 会員判定\r\n     */\r\n    public isMember() {\r\n        return (this.data.memberType === FlgMember.Member);\r\n    }\r\n\r\n    /**\r\n     * ネイティブアプリ判定設定\r\n     */\r\n    public setNative(value?: string) {\r\n        this.data.native = (value === NativeAppFlg.Native)\r\n            ? NativeAppFlg.Native\r\n            : NativeAppFlg.NotNative;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class UtilService {\r\n\r\n    constructor() { }\r\n\r\n    /**\r\n     * カタカナをひらがなへ変換\r\n     * @param {string} str\r\n     */\r\n    public convertToHira(str: string) {\r\n        return str.replace(/[\\u30a1-\\u30f6]/g, function (match) {\r\n            const chr = match.charCodeAt(0) - 0x60;\r\n\r\n            return String.fromCharCode(chr);\r\n        });\r\n    }\r\n\r\n}\r\n","import { DEVELOPMENT_MEMBER_TICKET, DEVELOPMENT_POINT_TICKET } from './ticket';\r\n\r\nexport const environment = {\r\n    production: false,\r\n    PORTAL_SITE_URL: '/',\r\n    APP_SITE_URL: 'https://toei-ticket-test.azurewebsites.net',\r\n    API_ENDPOINT: '',\r\n    FRONTEND_ENDPOINT: '',\r\n    ENTRANCE_SERVER_URL: 'https://xxxxx.cloudfront.net',\r\n    MVTK_COMPANY_CODE: 'SSK000',\r\n\r\n    COGNITO_REGION: 'ap-northeast-1', // identity poolのリージョンを指定する\r\n    COGNITO_IDENTITY_POOL_ID: 'ap-northeast-1:49f4caee-80e0-429a-8f8d-4850b626d96d', // identity poolのID(AWS consoleで確認)\r\n    COGNITO_USER_POOL_ID: '',\r\n    COGNITO_CLIENT_ID: '',\r\n\r\n    CINERINO_API_ENDPOINT: 'https://toei-cinerino-api-test.azurewebsites.net',\r\n    TOKEN_ISSUER: '',\r\n\r\n    POINT_TICKET: DEVELOPMENT_POINT_TICKET,\r\n\r\n    ANALYTICS_ID: 'UA-99018492-2',\r\n\r\n    MEMBER_TICKET: DEVELOPMENT_MEMBER_TICKET, // 毎週木曜1,100円鑑賞の購入枚数上限は1枚だけ\r\n};\r\n","export const DEVELOPMENT_POINT_TICKET = [\r\n    {\r\n        THEATER: '101',\r\n        TICKET_CODE: []\r\n    },\r\n    {\r\n        THEATER: '112',\r\n        TICKET_CODE: []\r\n    },\r\n    {\r\n        THEATER: '118',\r\n        TICKET_CODE: [\r\n            '3800001',\r\n            '3800002',\r\n            '3900001',\r\n            '3900002'\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '119',\r\n        TICKET_CODE: []\r\n    }\r\n];\r\n\r\nexport const PRODUCTION_POINT_TICKET = [\r\n    {\r\n        THEATER: '001',\r\n        TICKET_CODE: [\r\n            '4000011',\r\n            '4000012',\r\n            '4000013',\r\n            '4000021',\r\n            '4000022',\r\n            '4000023',\r\n            '4000031',\r\n            '4000032',\r\n            '4000033'\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '012',\r\n        TICKET_CODE: [\r\n            '4000011',\r\n            '4000012',\r\n            '4000013',\r\n            '4000021',\r\n            '4000022',\r\n            '4000023',\r\n            '4000031',\r\n            '4000032',\r\n            '4000033'\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '018',\r\n        TICKET_CODE: [\r\n            '4000011',\r\n            '4000012',\r\n            '4000013',\r\n            '4000021',\r\n            '4000022',\r\n            '4000023',\r\n            '4000031',\r\n            '4000032',\r\n            '4000033'\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '019',\r\n        TICKET_CODE: [\r\n            '4000011',\r\n            '4000012',\r\n            '4000013',\r\n            '4000021',\r\n            '4000022',\r\n            '4000023',\r\n            '4000031',\r\n            '4000032',\r\n            '4000033'\r\n        ]\r\n    }\r\n];\r\n\r\nexport const DEVELOPMENT_MEMBER_TICKET = [\r\n    {\r\n        THEATER: '101',\r\n        TICKET_CODE: [\r\n            '3100011',　   // メンバーズ一般\r\n            '132',      　 // メンバースデイ\r\n            '3100021'   　 // メンバーズ大学生\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '112',\r\n        TICKET_CODE: [\r\n            '3100011',　   // メンバーズ一般\r\n            '132',      　 // メンバースデイ\r\n            '3100021'   　 // メンバーズ大学生\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '118',\r\n        TICKET_CODE: [\r\n            '3100011',　   // メンバーズ一般\r\n            '132',      　 // メンバースデイ\r\n            '3100021'   　 // メンバーズ大学生\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '119',\r\n        TICKET_CODE: [\r\n            '3100011',　   // メンバーズ一般\r\n            '132',      　 // メンバースデイ\r\n            '3100021'   　 // メンバーズ大学生\r\n        ]\r\n    }\r\n];\r\n\r\nexport const PRODUCTION_MEMBER_TICKET = [\r\n    {\r\n        THEATER: '001',\r\n        TICKET_CODE: [\r\n            '4000031',　   // ｱﾌﾟﾘ会員ﾃﾞｰ\r\n            '4000032',　   // ｱﾌﾟﾘ会員ﾃﾞｰ3D\r\n            '4000033'　    // ｱﾌﾟﾘ会員ﾃﾞｰ★3D\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '012',\r\n        TICKET_CODE: [\r\n            '4000031',　   // ｱﾌﾟﾘ会員ﾃﾞｰ\r\n            '4000032',　   // ｱﾌﾟﾘ会員ﾃﾞｰ3D\r\n            '4000033'　    // ｱﾌﾟﾘ会員ﾃﾞｰ★3D\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '018',\r\n        TICKET_CODE: [\r\n            '4000031',　   // ｱﾌﾟﾘ会員ﾃﾞｰ\r\n            '4000032',　   // ｱﾌﾟﾘ会員ﾃﾞｰ3D\r\n            '4000033'　    // ｱﾌﾟﾘ会員ﾃﾞｰ★3D\r\n        ]\r\n    },\r\n    {\r\n        THEATER: '019',\r\n        TICKET_CODE: [\r\n            '4000031',　   // ｱﾌﾟﾘ会員ﾃﾞｰ\r\n            '4000032',　   // ｱﾌﾟﾘ会員ﾃﾞｰ3D\r\n            '4000033'　    // ｱﾌﾟﾘ会員ﾃﾞｰ★3D\r\n        ]\r\n    }\r\n];\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nimport * as moment from 'moment-timezone';\r\n\r\nmoment.tz.setDefault('Asia/Tokyo');\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n","/* (ignored) */"],"sourceRoot":""}